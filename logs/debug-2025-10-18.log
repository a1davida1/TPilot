{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T14:31:54.951Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T14:31:56.319Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T14:31:56.319Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T14:31:56.319Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T14:31:56.661Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T14:31:56.662Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T14:31:56.662Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T14:31:56.662Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T14:31:56.662Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:31:56.671Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:31:56.672Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T14:31:56.672Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T14:31:56.674Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T14:31:56.675Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T14:31:56.677Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T14:31:56.677Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T14:31:56.678Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T14:31:56.678Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T14:31:56.678Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T14:31:56.685Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T14:31:56.685Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T14:31:56.686Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T14:31:56.687Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:31:56.773Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:31:56.773Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:31:56.974Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:31:56.975Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-18T14:31:57.244Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-18T14:31:57.245Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-18T14:31:57.245Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-18T14:31:57.245Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-18T14:31:57.245Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:31:57.276Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T14:31:57.276Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:31:57.276Z"}
{"devErr":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-18T14:31:57.655Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T14:31:57.656Z"}
{"error":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-18T14:31:57.957Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T14:31:57.959Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T14:31:57.960Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T14:31:57.960Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T14:31:57.960Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T14:31:57.962Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T14:31:57.971Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.118Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:31:58.121Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.273Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.429Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.591Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.752Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.909Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:31:58.913Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T14:31:58.914Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T14:31:58.915Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T14:31:58.952Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T14:31:58.958Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T14:31:58.963Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T14:31:58.966Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T14:31:58.976Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T14:31:58.980Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T14:31:58.985Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T14:31:58.989Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T14:31:58.995Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T14:31:58.995Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T14:31:58.995Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:31:58.996Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T14:31:59.001Z"}
{"level":"debug","message":"Client build candidate missing index at /home/dave/CascadeProjects/dist/client/index.html","timestamp":"2025-10-18T14:31:59.224Z"}
{"level":"debug","message":"Client build candidate missing index at /home/dave/CascadeProjects/client/dist/index.html","timestamp":"2025-10-18T14:31:59.224Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T14:31:59.225Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T14:31:59.690Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 3028ms","timestamp":"2025-10-18T14:31:59.690Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-18T14:31:59.690Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-18T14:31:59.690Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 3029ms","timestamp":"2025-10-18T14:31:59.691Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-18T14:31:59.691Z"}
{"level":"debug","message":"‚è∞ Running cron job: process-scheduled-posts","timestamp":"2025-10-18T14:32:00.069Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-18T14:32:00.069Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-18T14:32:00.229Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:00.279Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:02.569Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:05.026Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:07.178Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:09.346Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:11.786Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:14.244Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:16.399Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:18.554Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:21.003Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:23.414Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:25.565Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:27.717Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.088Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.259Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.424Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.577Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.738Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:29.879Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.894Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:32.031Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:34.521Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:36.678Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:38.995Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:41.155Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:43.531Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:45.957Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:48.319Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:50.478Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:52.631Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:54.788Z"}
{"level":"debug","message":"Health metrics collected","process":{"cpu":{"system":537226,"user":5219048},"memory":{"external":6.248806953430176,"heapTotal":99.55078125,"heapUsed":96.43603515625,"rss":244.90625},"pid":238431,"uptime":62.272335895},"system":{"freeMemory":6324.734375,"loadAverage":[1.65,1.49,1.19],"totalMemory":32039.32421875},"timestamp":"2025-10-18T14:32:56.685Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:56.939Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.067Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:59.102Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.223Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.385Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.542Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.696Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.858Z"}
{"level":"debug","message":"‚è∞ Running cron job: process-scheduled-posts","timestamp":"2025-10-18T14:33:00.007Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-18T14:33:00.007Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-18T14:33:00.166Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:01.264Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:03.416Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:05.574Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:07.725Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:09.968Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:12.211Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:14.368Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:16.678Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:18.839Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:21.123Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:23.275Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:25.722Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:27.877Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:29.231Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:29.618Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:29.993Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:30.030Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:30.154Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:30.311Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:30.476Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:32.190Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:34.347Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:36.784Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:39.251Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:41.492Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:43.677Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:45.950Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:48.207Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:50.361Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:52.575Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:55.017Z"}
{"level":"debug","message":"Health metrics collected","process":{"cpu":{"system":561805,"user":5360096},"memory":{"external":6.280455589294434,"heapTotal":99.80078125,"heapUsed":97.16554260253906,"rss":245.7109375},"pid":238431,"uptime":122.271514806},"system":{"freeMemory":6226.859375,"loadAverage":[1.43,1.45,1.19],"totalMemory":32039.32421875},"timestamp":"2025-10-18T14:33:56.684Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:57.195Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:59.312Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:59.436Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:59.520Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:59.925Z"}
{"level":"debug","message":"‚è∞ Running cron job: process-scheduled-posts","timestamp":"2025-10-18T14:34:00.005Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:00.082Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-18T14:34:00.005Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-18T14:34:00.173Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:00.243Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:00.408Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:01.589Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:03.910Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:06.275Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:08.731Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:10.893Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:13.055Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:15.506Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:17.926Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:20.308Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:22.766Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:24.926Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:27.176Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.064Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.229Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:29.365Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.391Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.562Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.808Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.980Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:31.522Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:33.789Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:35.974Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:38.126Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:40.454Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:42.831Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:44.984Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T14:34:45.310Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T14:34:46.225Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T14:34:46.225Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T14:34:46.226Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T14:34:46.464Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T14:34:46.464Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T14:34:46.465Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T14:34:46.465Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T14:34:46.465Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:46.476Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:46.476Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T14:34:46.477Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T14:34:46.479Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T14:34:46.479Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T14:34:46.481Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T14:34:46.481Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T14:34:46.482Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T14:34:46.482Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T14:34:46.483Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T14:34:46.486Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T14:34:46.486Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T14:34:46.488Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T14:34:46.489Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:46.577Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:46.578Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-18T14:34:46.648Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-18T14:34:46.649Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-18T14:34:46.649Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-18T14:34:46.649Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-18T14:34:46.649Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:46.778Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:46.778Z"}
{"devErr":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-18T14:34:46.806Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T14:34:46.807Z"}
{"error":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-18T14:34:46.965Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T14:34:46.967Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T14:34:46.967Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T14:34:46.968Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T14:34:46.968Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T14:34:46.969Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T14:34:46.972Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:47.079Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T14:34:47.080Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:47.080Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.124Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:47.128Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:47.138Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.283Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.434Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.587Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.741Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.910Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:34:47.910Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T14:34:47.911Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T14:34:47.911Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T14:34:47.933Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T14:34:47.937Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T14:34:47.942Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T14:34:47.946Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T14:34:47.954Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T14:34:47.959Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T14:34:47.964Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T14:34:47.968Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T14:34:47.973Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T14:34:47.973Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T14:34:47.973Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:34:47.974Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T14:34:47.976Z"}
{"level":"debug","message":"Client build candidate missing index at /home/dave/CascadeProjects/dist/client/index.html","timestamp":"2025-10-18T14:34:48.130Z"}
{"level":"debug","message":"Client build candidate missing index at /home/dave/CascadeProjects/client/dist/index.html","timestamp":"2025-10-18T14:34:48.131Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T14:34:48.131Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T14:34:48.517Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:49.298Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:51.511Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:53.892Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:56.146Z"}
{"level":"debug","message":"Health metrics collected","process":{"cpu":{"system":579402,"user":5513538},"memory":{"external":6.268610954284668,"heapTotal":99.80078125,"heapUsed":97.10893249511719,"rss":245.8515625},"pid":238431,"uptime":182.272345357},"system":{"freeMemory":6462.9453125,"loadAverage":[1.74,1.56,1.25],"totalMemory":32039.32421875},"timestamp":"2025-10-18T14:34:56.685Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T14:34:57.455Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T14:34:58.325Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T14:34:58.325Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T14:34:58.325Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T14:34:58.538Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T14:34:58.539Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T14:34:58.539Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T14:34:58.539Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T14:34:58.539Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:58.550Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:58.551Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T14:34:58.551Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T14:34:58.553Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T14:34:58.553Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T14:34:58.555Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T14:34:58.555Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T14:34:58.556Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T14:34:58.556Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T14:34:58.557Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T14:34:58.560Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T14:34:58.560Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T14:34:58.562Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T14:34:58.563Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:58.651Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:58.652Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-18T14:34:58.726Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-18T14:34:58.727Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-18T14:34:58.727Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-18T14:34:58.727Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-18T14:34:58.727Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:58.852Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:58.853Z"}
{"devErr":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-18T14:34:58.885Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T14:34:58.886Z"}
{"error":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-18T14:34:59.041Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T14:34:59.043Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T14:34:59.044Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T14:34:59.044Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T14:34:59.044Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T14:34:59.045Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T14:34:59.048Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:59.153Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T14:34:59.153Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:59.153Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:59.189Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.193Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.339Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.501Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.656Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.814Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.989Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:34:59.990Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T14:34:59.990Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T14:34:59.990Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T14:35:00.009Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T14:35:00.015Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T14:35:00.020Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T14:35:00.025Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T14:35:00.034Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T14:35:00.040Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T14:35:00.044Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T14:35:00.049Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T14:35:00.054Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T14:35:00.054Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T14:35:00.054Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:35:00.055Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T14:35:00.057Z"}
{"level":"debug","message":"Client build candidate missing index at /home/dave/CascadeProjects/dist/client/index.html","timestamp":"2025-10-18T14:35:00.228Z"}
{"level":"debug","message":"Client build candidate missing index at /home/dave/CascadeProjects/client/dist/index.html","timestamp":"2025-10-18T14:35:00.228Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T14:35:00.228Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T14:35:00.647Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 2108ms","timestamp":"2025-10-18T14:35:00.647Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 5000","timestamp":"2025-10-18T14:35:00.648Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:5000","timestamp":"2025-10-18T14:35:00.648Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 5000 in 2110ms","timestamp":"2025-10-18T14:35:00.649Z"}
{"level":"info","message":"serving on port 5000","timestamp":"2025-10-18T14:35:00.649Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:01.351Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:03.730Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:06.163Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:08.315Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:10.468Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:12.635Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:14.794Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:17.151Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:19.303Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:21.749Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:23.999Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:26.457Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:28.612Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:30.348Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:30.666Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:30.890Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:30.891Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:31.166Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:31.358Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:31.558Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:33.049Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:35.214Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:37.519Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:39.709Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:41.862Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:44.344Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:46.945Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:49.171Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:51.596Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:53.799Z"}
