{"date":"Sat Oct 11 2025 05:51:17 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: caption request failed\nError: caption request failed\n    at /home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:99:13\n    at retryWithBackoff (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:27:14)\n    at captionImage (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:89:15)\n    at Module.nsfwCaptionFallback (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:120:19)","os":{"loadavg":[2,1.4,1.17],"uptime":257198.68},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/node_modules/tinypool/dist/entry/process.js"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":257004,"external":3988025,"heapTotal":171114496,"heapUsed":126851448,"rss":262594560},"pid":1790987,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"Error: caption request failed\n    at /home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:99:13\n    at retryWithBackoff (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:27:14)\n    at captionImage (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:89:15)\n    at Module.nsfwCaptionFallback (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:120:19)","timestamp":"2025-10-11T10:51:17.376Z","trace":[{"column":13,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":null,"line":99,"method":null,"native":false},{"column":14,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"retryWithBackoff","line":27,"method":null,"native":false},{"column":15,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"captionImage","line":89,"method":null,"native":false},{"column":19,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"Module.nsfwCaptionFallback","line":120,"method":"nsfwCaptionFallback","native":false}]}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.068Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:45:41.070Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:45:41.072Z"}
{"level":"error","message":"üöÄ Using Redis BullMQ queue backend","timestamp":"2025-10-11T11:45:41.073Z"}
{"level":"error","message":"üöÄ Initializing Redis BullMQ Queue backend","timestamp":"2025-10-11T11:45:41.074Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.120Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.220Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.371Z"}
{"error":{},"level":"error","message":"‚ùå Failed to initialize queue system","timestamp":"2025-10-11T11:45:41.377Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.120Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:45:49.121Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:45:49.123Z"}
{"level":"error","message":"üöÄ Using Redis BullMQ queue backend","timestamp":"2025-10-11T11:45:49.125Z"}
{"level":"error","message":"üöÄ Initializing Redis BullMQ Queue backend","timestamp":"2025-10-11T11:45:49.125Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.172Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.273Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.423Z"}
{"error":{},"level":"error","message":"‚ùå Failed to initialize queue system","timestamp":"2025-10-11T11:45:49.428Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:01.708Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:48:01.709Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:48:01.711Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:48:01.713Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:48:01.713Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:01.717Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:48:01.725Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.728Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.730Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.732Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.733Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.736Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.738Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:48:01.739Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:01.770Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:01.871Z"}
{"code":"ERR_MODULE_NOT_FOUND","level":"error","message":"Failed to initialise application: Cannot find package 'bcryptjs' imported from /home/dave/CascadeProjects/TPilot/server/routes/user-profile.ts","stack":"Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'bcryptjs' imported from /home/dave/CascadeProjects/TPilot/server/routes/user-profile.ts\n    at packageResolve (node:internal/modules/esm/resolve:873:9)\n    at moduleResolve (node:internal/modules/esm/resolve:946:18)\n    at defaultResolve (node:internal/modules/esm/resolve:1188:11)\n    at nextResolve (node:internal/modules/esm/hooks:864:28)\n    at resolveBase (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:3744)\n    at resolveDirectory (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:4243)\n    at resolveTsPaths (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:4984)\n    at async resolve (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:5355)\n    at async nextResolve (node:internal/modules/esm/hooks:864:22)\n    at async Hooks.resolve (node:internal/modules/esm/hooks:306:24)","timestamp":"2025-10-11T11:48:01.924Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.652Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:48:29.653Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:48:29.655Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:48:29.657Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:48:29.657Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:29.662Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:48:29.663Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.667Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.669Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.670Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.672Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.674Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.676Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:48:29.676Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.711Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.813Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.964Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:30.166Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:30.504Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:30.805Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:31.155Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:31.557Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:31.663Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:32.008Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:32.509Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:33.060Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:33.662Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:33.664Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:34.312Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:35.014Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:35.666Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:35.766Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:36.567Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:37.418Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:37.669Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:38.318Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:39.270Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:39.674Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:40.274Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:41.325Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:41.681Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:42.426Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:43.576Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:43.683Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:44.778Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:45.687Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:46.030Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:47.331Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:47.690Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:48.682Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:49.691Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:50.083Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:51.534Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:51.693Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:53.036Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:53.696Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:54.588Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:55.698Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:56.190Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:57.700Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:57.842Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:59.542Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.678Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.680Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.682Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.683Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.684Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.686Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:59.702Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:49:00.006Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:49:00.008Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:01.293Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:01.704Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:03.095Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:03.706Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:04.946Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:05.709Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:06.847Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:07.711Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:08.799Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:09.713Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:10.801Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:11.716Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:12.803Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:13.717Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:14.805Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:15.720Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:16.807Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:17.721Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:18.809Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:19.724Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:20.810Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:21.726Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:22.812Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:23.729Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:24.813Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:25.731Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:26.814Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:27.733Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:28.815Z"}
{"date":"Sat Oct 11 2025 06:49:29 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.26,1.59,1.23],"uptime":260691.52},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":431102,"external":6500767,"heapTotal":114962432,"heapUsed":110537120,"rss":255389696},"pid":1809108,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:49:29.618Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.284Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:49:38.286Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:49:38.288Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:49:38.290Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:49:38.290Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:38.294Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:49:38.296Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.299Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.301Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.303Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.304Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.307Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.309Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:49:38.309Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.339Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.441Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.593Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.793Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:39.065Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:39.367Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:39.718Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:40.119Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:40.296Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:40.569Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:41.071Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:41.623Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:42.224Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:42.299Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:42.874Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:43.576Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:44.302Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:44.327Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:45.129Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:45.980Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:46.304Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:46.881Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:47.833Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:48.305Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:48.833Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:49.884Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:50.308Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:50.985Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:52.136Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:52.310Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:53.338Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:54.313Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:54.589Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:55.891Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:56.315Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:57.242Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:58.318Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:58.644Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:50:00.010Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:50:00.014Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"status\" = $1 and \"scheduled_posts\".\"updated_at\" <= $2)\nparams: processing,2025-10-11T11:40:00.011Z","level":"error","message":"‚ùå Failed to check stuck jobs","timestamp":"2025-10-11T11:50:00.014Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:00.095Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:00.321Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:01.597Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:02.328Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:03.147Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:04.331Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:04.748Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:06.332Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:06.400Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:08.102Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.311Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.313Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.314Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.316Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.317Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.320Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:08.334Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:09.853Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:10.336Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:11.655Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:12.338Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:13.507Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:14.341Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:15.409Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:16.342Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:17.361Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:18.345Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:19.363Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:20.348Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:21.364Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:22.351Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:23.366Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:24.353Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:25.367Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:26.356Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:27.368Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:28.358Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:29.369Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:30.360Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:31.371Z"}
{"cause":{},"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:32.361Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:33.372Z"}
{"cause":{},"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:34.363Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:35.374Z"}
{"cause":{},"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:36.370Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:37.375Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","date":"Sat Oct 11 2025 06:50:38 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.25,1.49,1.22],"uptime":260760.15},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":448583,"external":6520296,"heapTotal":118108160,"heapUsed":111974008,"rss":253116416},"pid":1809506,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:50:38.245Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.431Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:51:45.433Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:51:45.434Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:51:45.436Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:51:45.436Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:45.441Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:51:45.442Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.446Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.447Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.449Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.450Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.452Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.454Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:51:45.454Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.485Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.586Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.737Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.938Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:46.198Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:46.500Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:46.851Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:47.252Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:47.444Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:47.704Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:48.205Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:48.755Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:49.356Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:49.445Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:50.007Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:50.708Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:51.447Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:51.459Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:52.260Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:53.112Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:53.449Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:54.013Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:54.965Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:55.451Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:55.967Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:57.017Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:57.453Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:58.118Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:59.268Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:59.453Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:52:00.008Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:52:00.010Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:00.469Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:01.457Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:01.721Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:03.022Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:03.459Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:04.374Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:05.461Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:05.775Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:07.227Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:07.464Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:08.728Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:09.468Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:10.280Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:11.471Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:11.881Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:13.473Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:13.532Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:15.232Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.456Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.458Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.459Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.461Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.462Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.464Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:15.476Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:16.983Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:17.477Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:18.785Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:19.480Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:20.637Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:21.484Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:22.540Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:23.487Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:24.493Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:25.488Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:26.494Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:27.490Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:28.497Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:29.492Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:30.499Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:31.494Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:32.501Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:33.497Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:34.503Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:35.499Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:36.506Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:37.502Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:38.509Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:39.504Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:40.511Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:41.507Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:42.512Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:43.508Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:44.514Z"}
{"date":"Sat Oct 11 2025 06:52:45 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.52,1.59,1.29],"uptime":260887.3},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":458881,"external":6528546,"heapTotal":115486720,"heapUsed":110775040,"rss":256860160},"pid":1810590,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:52:45.398Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.490Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:52:55.492Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:52:55.495Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:52:55.497Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:52:55.498Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:55.502Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:52:55.504Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.508Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.510Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.512Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.514Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.515Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.517Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:52:55.518Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.549Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.650Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.801Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.002Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.269Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.571Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.925Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:57.328Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:57.504Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:57.778Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:58.281Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:58.832Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:59.435Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:59.507Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:53:00.006Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:53:00.008Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:00.087Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:00.790Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:01.510Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:01.540Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:02.342Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:03.193Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:03.512Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:04.094Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:05.045Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:05.514Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:06.045Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:07.096Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:07.516Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:08.199Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:09.352Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:09.518Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:10.554Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:11.531Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:11.806Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:13.108Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:13.540Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:14.459Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:15.545Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:15.859Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:17.310Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:17.547Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:18.810Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:19.549Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:20.361Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:21.557Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:21.966Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:23.564Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:23.617Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:25.318Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.519Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.520Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.522Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.524Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.525Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.527Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:25.566Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:27.068Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:27.567Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:28.869Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:29.570Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:30.720Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:31.572Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:32.621Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:33.576Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:34.571Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:35.580Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:36.574Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:37.583Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:38.576Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:39.586Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:40.577Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:41.592Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:42.579Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:43.593Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:44.580Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:45.595Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:46.582Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:47.598Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:48.583Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:49.599Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:50.584Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:51.601Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:52.585Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:53.604Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:54.586Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","date":"Sat Oct 11 2025 06:53:55 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[2.11,1.79,1.39],"uptime":260957.35},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":455702,"external":6527415,"heapTotal":114438144,"heapUsed":111039160,"rss":251592704},"pid":1810950,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:53:55.450Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.071Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:56:00.072Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:56:00.075Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:56:00.077Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:56:00.077Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:00.083Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:56:00.085Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.089Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.090Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.092Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.093Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.096Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.098Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:56:00.098Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.131Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.232Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.383Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.600Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.910Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:01.211Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":{"cause":{},"params":[],"query":"select count(*) from \"users\""},"level":"error","message":"Failed to load metrics summary","timestamp":"2025-10-11T11:56:01.324Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:01.562Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:01.964Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:02.086Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:02.414Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:02.916Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:03.468Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:04.069Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:04.087Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:04.720Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:05.422Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:06.089Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:06.173Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:06.975Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:07.826Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:08.091Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:08.727Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:09.679Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:10.093Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:10.680Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:11.731Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:12.095Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:12.832Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:13.984Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:14.097Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:15.187Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:16.100Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:16.441Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:17.746Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:18.106Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:19.097Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:20.108Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:20.499Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:21.951Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:22.110Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:23.453Z"}
{"cause":{},"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:24.113Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:25.004Z"}
{"cause":{},"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:26.115Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:26.605Z"}
{"cause":{},"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:28.118Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:28.256Z"}
{"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:29.956Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.101Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.102Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.103Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.105Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.106Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.108Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:30.121Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:31.707Z"}
{"cause":{},"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:32.122Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:33.509Z"}
{"cause":{},"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:34.125Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:35.361Z"}
{"cause":{},"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:36.126Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:37.263Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:38.128Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:39.215Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:40.130Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:41.216Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:42.134Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:43.216Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:44.136Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:45.218Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:46.141Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:47.219Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:48.144Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:49.220Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:50.146Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:51.221Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:52.148Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:53.224Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:54.150Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:55.225Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:56.154Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:57.227Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:58.160Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:59.229Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:57:00.007Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:57:00.009Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","date":"Sat Oct 11 2025 06:57:00 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.86,1.7,1.41],"uptime":261141.94},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":445412,"external":6517125,"heapTotal":115748864,"heapUsed":112342920,"rss":254132224},"pid":1811997,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:57:00.034Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
