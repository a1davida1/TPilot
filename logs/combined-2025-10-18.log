{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T14:31:54.951Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T14:31:56.319Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T14:31:56.319Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T14:31:56.319Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T14:31:56.661Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T14:31:56.662Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T14:31:56.662Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T14:31:56.662Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T14:31:56.662Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:31:56.671Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:31:56.672Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T14:31:56.672Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T14:31:56.674Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T14:31:56.675Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T14:31:56.677Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T14:31:56.677Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T14:31:56.678Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T14:31:56.678Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T14:31:56.678Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T14:31:56.685Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T14:31:56.685Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T14:31:56.686Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T14:31:56.687Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:31:56.773Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:31:56.773Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:31:56.974Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:31:56.975Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-18T14:31:57.244Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-18T14:31:57.245Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-18T14:31:57.245Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-18T14:31:57.245Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-18T14:31:57.245Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:31:57.276Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T14:31:57.276Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:31:57.276Z"}
{"devErr":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-18T14:31:57.655Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T14:31:57.656Z"}
{"error":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-18T14:31:57.957Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T14:31:57.959Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T14:31:57.960Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T14:31:57.960Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T14:31:57.960Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T14:31:57.962Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T14:31:57.971Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.118Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:31:58.121Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.273Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.429Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.591Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.752Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:31:58.909Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:31:58.913Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T14:31:58.914Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T14:31:58.915Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T14:31:58.952Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T14:31:58.958Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T14:31:58.963Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T14:31:58.966Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T14:31:58.976Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T14:31:58.980Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T14:31:58.985Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T14:31:58.989Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T14:31:58.995Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T14:31:58.995Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T14:31:58.995Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:31:58.996Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T14:31:59.001Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T14:31:59.225Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T14:31:59.690Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 3028ms","timestamp":"2025-10-18T14:31:59.690Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-18T14:31:59.690Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-18T14:31:59.690Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 3029ms","timestamp":"2025-10-18T14:31:59.691Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-18T14:31:59.691Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-18T14:32:00.069Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-18T14:32:00.229Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:00.279Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:02.569Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:05.026Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:07.178Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:09.346Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:11.786Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:14.244Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:16.399Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:18.554Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:21.003Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:23.414Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:25.565Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:27.717Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.088Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.259Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.424Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.577Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.738Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:29.879Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:29.894Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:32.031Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:34.521Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:36.678Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:38.995Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:41.155Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:43.531Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:45.957Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:48.319Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:50.478Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:52.631Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:54.788Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:56.939Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.067Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:32:59.102Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.223Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.385Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.542Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.696Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:32:59.858Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-18T14:33:00.007Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-18T14:33:00.166Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:01.264Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:03.416Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:05.574Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:07.725Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:09.968Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:12.211Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:14.368Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:16.678Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:18.839Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:21.123Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:23.275Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:25.722Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:27.877Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:29.231Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:29.618Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:29.993Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:30.030Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:30.154Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:30.311Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:30.476Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:32.190Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:34.347Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:36.784Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:39.251Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:41.492Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:43.677Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:45.950Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:48.207Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:50.361Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:52.575Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:55.017Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:57.195Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:59.312Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:33:59.436Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:59.520Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:33:59.925Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:00.082Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-18T14:34:00.005Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-18T14:34:00.173Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:00.243Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:00.408Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:01.589Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:03.910Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:06.275Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:08.731Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:10.893Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:13.055Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:15.506Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:17.926Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:20.308Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:22.766Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:24.926Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:27.176Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.064Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.229Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:29.365Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.391Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.562Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.808Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:34:29.980Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:31.522Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:33.789Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:35.974Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:38.126Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:40.454Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:42.831Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:44.984Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T14:34:45.310Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T14:34:46.225Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T14:34:46.225Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T14:34:46.226Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T14:34:46.464Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T14:34:46.464Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T14:34:46.465Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T14:34:46.465Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T14:34:46.465Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:46.476Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:46.476Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T14:34:46.477Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T14:34:46.479Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T14:34:46.479Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T14:34:46.481Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T14:34:46.481Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T14:34:46.482Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T14:34:46.482Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T14:34:46.483Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T14:34:46.486Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T14:34:46.486Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T14:34:46.488Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T14:34:46.489Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:46.577Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:46.578Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-18T14:34:46.648Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-18T14:34:46.649Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-18T14:34:46.649Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-18T14:34:46.649Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-18T14:34:46.649Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:46.778Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:46.778Z"}
{"devErr":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-18T14:34:46.806Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T14:34:46.807Z"}
{"error":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-18T14:34:46.965Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T14:34:46.967Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T14:34:46.967Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T14:34:46.968Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T14:34:46.968Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T14:34:46.969Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T14:34:46.972Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:47.079Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T14:34:47.080Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:47.080Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.124Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:47.128Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:47.138Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.283Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.434Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.587Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.741Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:47.910Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:34:47.910Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T14:34:47.911Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T14:34:47.911Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T14:34:47.933Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T14:34:47.937Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T14:34:47.942Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T14:34:47.946Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T14:34:47.954Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T14:34:47.959Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T14:34:47.964Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T14:34:47.968Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T14:34:47.973Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T14:34:47.973Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T14:34:47.973Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:34:47.974Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T14:34:47.976Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T14:34:48.131Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T14:34:48.517Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:49.298Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:51.511Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:53.892Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:56.146Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T14:34:57.455Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T14:34:58.325Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T14:34:58.325Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T14:34:58.325Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T14:34:58.538Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T14:34:58.539Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T14:34:58.539Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T14:34:58.539Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T14:34:58.539Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:58.550Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:58.551Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T14:34:58.551Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T14:34:58.553Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T14:34:58.553Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T14:34:58.555Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T14:34:58.555Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T14:34:58.556Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T14:34:58.556Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T14:34:58.557Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T14:34:58.560Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T14:34:58.560Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T14:34:58.562Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T14:34:58.563Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:58.651Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:58.652Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-18T14:34:58.726Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-18T14:34:58.727Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-18T14:34:58.727Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-18T14:34:58.727Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-18T14:34:58.727Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:58.852Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:58.853Z"}
{"devErr":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-18T14:34:58.885Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T14:34:58.886Z"}
{"error":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-18T14:34:59.041Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T14:34:59.043Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T14:34:59.044Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T14:34:59.044Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T14:34:59.044Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T14:34:59.045Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T14:34:59.048Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T14:34:59.153Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T14:34:59.153Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T14:34:59.153Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:34:59.189Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.193Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.339Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.501Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.656Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.814Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T14:34:59.989Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:34:59.990Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T14:34:59.990Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T14:34:59.990Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T14:35:00.009Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T14:35:00.015Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T14:35:00.020Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T14:35:00.025Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T14:35:00.034Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T14:35:00.040Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T14:35:00.044Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T14:35:00.049Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T14:35:00.054Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T14:35:00.054Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T14:35:00.054Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T14:35:00.055Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T14:35:00.057Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T14:35:00.228Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T14:35:00.647Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 2108ms","timestamp":"2025-10-18T14:35:00.647Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 5000","timestamp":"2025-10-18T14:35:00.648Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:5000","timestamp":"2025-10-18T14:35:00.648Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 5000 in 2110ms","timestamp":"2025-10-18T14:35:00.649Z"}
{"level":"info","message":"serving on port 5000","timestamp":"2025-10-18T14:35:00.649Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:01.351Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:03.730Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:06.163Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:08.315Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:10.468Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:12.635Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:14.794Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:17.151Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:19.303Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:21.749Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:23.999Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:26.457Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:28.612Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:30.348Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:30.666Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:30.890Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:30.891Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:31.166Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:31.358Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-18T14:35:31.558Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:33.049Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:35.214Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:37.519Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:39.709Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:41.862Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:44.344Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:46.945Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:49.171Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:51.596Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T14:35:53.799Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T23:11:44.434Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T23:11:45.829Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T23:11:45.830Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T23:11:45.830Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T23:11:46.184Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T23:11:46.185Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T23:11:46.185Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T23:11:46.185Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T23:11:46.185Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:11:46.196Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:11:46.197Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T23:11:46.198Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T23:11:46.200Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T23:11:46.200Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T23:11:46.203Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T23:11:46.204Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T23:11:46.205Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T23:11:46.205Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T23:11:46.205Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T23:11:46.212Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T23:11:46.212Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T23:11:46.213Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T23:11:46.214Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:11:46.300Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:11:46.302Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:11:46.502Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:11:46.502Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-18T23:11:46.648Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-18T23:11:46.648Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-18T23:11:46.648Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-18T23:11:46.648Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-18T23:11:46.649Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:11:46.803Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T23:11:46.803Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:11:46.803Z"}
{"devErr":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-18T23:11:47.063Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T23:11:47.064Z"}
{"error":{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-18T23:11:47.670Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T23:11:47.676Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T23:11:47.676Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T23:11:47.676Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T23:11:47.676Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T23:11:47.677Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T23:11:47.692Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:11:48.081Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T23:11:48.083Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T23:11:48.489Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T23:11:49.103Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T23:11:49.512Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T23:11:49.895Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async <anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/src/node-postgres/session.ts:154:19)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:371:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-18T23:11:50.331Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:11:50.333Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T23:11:50.333Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T23:11:50.334Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T23:11:50.353Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T23:11:50.358Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T23:11:50.362Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T23:11:50.366Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T23:11:50.374Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T23:11:50.379Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T23:11:50.382Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T23:11:50.387Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T23:11:50.391Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T23:11:50.391Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T23:11:50.391Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:11:50.392Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T23:11:50.399Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:11:50.538Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T23:11:50.591Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T23:11:50.999Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 4814ms","timestamp":"2025-10-18T23:11:50.999Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-18T23:11:50.999Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-18T23:11:50.999Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 4815ms","timestamp":"2025-10-18T23:11:51.000Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-18T23:11:51.000Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:11:52.996Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:11:55.238Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:11:57.509Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:11:59.658Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-18T23:12:00.008Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-18T23:12:00.370Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:12:01.927Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:12:04.232Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:12:06.518Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:12:08.769Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:12:11.021Z"}
{"cause":{"code":"28000","length":37,"name":"error","severity":"FATAL"},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NodePgPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-18T23:12:13.274Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T23:13:55.026Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T23:13:55.926Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T23:13:55.927Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T23:13:55.927Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T23:13:56.141Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T23:13:56.142Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T23:13:56.142Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T23:13:56.142Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T23:13:56.142Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:13:56.150Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:13:56.151Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T23:13:56.151Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T23:13:56.153Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T23:13:56.154Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T23:13:56.155Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T23:13:56.156Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T23:13:56.156Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T23:13:56.157Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T23:13:56.157Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T23:13:56.161Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T23:13:56.162Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T23:13:56.163Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T23:13:56.164Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:13:56.252Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:13:56.253Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:13:56.453Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:13:56.454Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:13:56.754Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T23:13:56.754Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:13:56.755Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-18T23:13:56.987Z","username":"admin@thottopilot.com"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T23:13:56.987Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-18T23:13:57.081Z"}
{"level":"info","message":"User a1davida1 already has tier: pro","timestamp":"2025-10-18T23:13:57.174Z"}
{"level":"info","message":"User a1davida1 email already verified","timestamp":"2025-10-18T23:13:57.262Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-18T23:13:57.263Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T23:13:57.264Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T23:13:57.264Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T23:13:57.264Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T23:13:57.265Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T23:13:57.265Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T23:13:57.268Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:13:58.824Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T23:13:58.825Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T23:13:58.826Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T23:13:58.867Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T23:13:58.872Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T23:13:58.877Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T23:13:58.881Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T23:13:58.889Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T23:13:58.894Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T23:13:58.898Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T23:13:58.903Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T23:13:58.909Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T23:13:58.909Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T23:13:58.909Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:13:58.910Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T23:13:58.912Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T23:13:59.072Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T23:13:59.651Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 3509ms","timestamp":"2025-10-18T23:13:59.651Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-18T23:13:59.651Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-18T23:13:59.652Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 3510ms","timestamp":"2025-10-18T23:13:59.652Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-18T23:13:59.653Z"}
{"correlationId":"e81fa604-c516-47b3-b752-331468bb1a02","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-18T23:14:24.492Z","userAgent":"curl/8.5.0"}
{"correlationId":"e81fa604-c516-47b3-b752-331468bb1a02","duration":6,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-18T23:14:24.498Z"}
{"correlationId":"e81fa604-c516-47b3-b752-331468bb1a02","level":"info","message":"GET /api/health 200 in 5ms :: {\"status\":\"ok\"}","requestId":"e81fa604-c516-47b3-b752-331468bb1a02","timestamp":"2025-10-18T23:14:24.499Z"}
{"correlationId":"e81fa604-c516-47b3-b752-331468bb1a02","level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-18T23:15:00.022Z"}
{"correlationId":"e81fa604-c516-47b3-b752-331468bb1a02","level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-18T23:15:00.613Z"}
{"correlationId":"dda309ae-571b-489f-b0e4-3580b79dc34d","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/","query":{},"timestamp":"2025-10-18T23:15:34.423Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:144.0) Gecko/20100101 Firefox/144.0"}
{"correlationId":"dda309ae-571b-489f-b0e4-3580b79dc34d","duration":22,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":200,"timestamp":"2025-10-18T23:15:34.446Z"}
{"correlationId":"e5876f42-8583-49f0-9a8c-c196319f9a5e","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/src/main.tsx","query":{},"timestamp":"2025-10-18T23:15:34.463Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:144.0) Gecko/20100101 Firefox/144.0"}
{"correlationId":"e5876f42-8583-49f0-9a8c-c196319f9a5e","duration":8,"level":"info","message":"Response sent","method":"GET","path":"/src/main.tsx","statusCode":200,"timestamp":"2025-10-18T23:15:34.471Z"}
{"correlationId":"c62ad135-6372-4e9a-bf7c-c715814cce00","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/logo.png","query":{},"timestamp":"2025-10-18T23:15:34.477Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:144.0) Gecko/20100101 Firefox/144.0"}
{"correlationId":"c62ad135-6372-4e9a-bf7c-c715814cce00","duration":5,"level":"info","message":"Response sent","method":"GET","path":"/logo.png","statusCode":200,"timestamp":"2025-10-18T23:15:34.482Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T23:16:17.732Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T23:16:18.581Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T23:16:18.582Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T23:16:18.582Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T23:16:18.787Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T23:16:18.788Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T23:16:18.788Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T23:16:18.788Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T23:16:18.788Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:16:18.796Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:16:18.797Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T23:16:18.797Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T23:16:18.799Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T23:16:18.799Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T23:16:18.801Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T23:16:18.801Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T23:16:18.802Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T23:16:18.802Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T23:16:18.803Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T23:16:18.807Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T23:16:18.807Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T23:16:18.808Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T23:16:18.809Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:16:18.898Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:16:18.898Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:16:19.100Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:16:19.100Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:16:19.401Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T23:16:19.402Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:16:19.402Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-18T23:16:20.170Z","username":"admin@thottopilot.com"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T23:16:20.171Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-18T23:16:20.376Z"}
{"level":"info","message":"User a1davida1 already has tier: pro","timestamp":"2025-10-18T23:16:20.583Z"}
{"level":"info","message":"User a1davida1 email already verified","timestamp":"2025-10-18T23:16:20.782Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-18T23:16:20.782Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T23:16:20.785Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T23:16:20.785Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T23:16:20.785Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T23:16:20.785Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T23:16:20.787Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T23:16:20.790Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:16:23.966Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T23:16:23.967Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T23:16:23.967Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T23:16:23.986Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T23:16:23.991Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T23:16:23.996Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T23:16:24.000Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T23:16:24.010Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T23:16:24.015Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T23:16:24.020Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T23:16:24.025Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T23:16:24.030Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T23:16:24.031Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T23:16:24.031Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:16:24.034Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T23:16:24.041Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T23:16:24.203Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T23:16:25.190Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T23:17:26.009Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T23:17:26.866Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T23:17:26.867Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T23:17:26.867Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T23:17:27.078Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T23:17:27.078Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T23:17:27.079Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T23:17:27.079Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T23:17:27.079Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:17:27.089Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:17:27.089Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T23:17:27.090Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T23:17:27.091Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T23:17:27.092Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T23:17:27.093Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T23:17:27.094Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T23:17:27.094Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T23:17:27.095Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T23:17:27.095Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T23:17:27.099Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T23:17:27.099Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T23:17:27.100Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T23:17:27.101Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:17:27.190Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:17:27.191Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:17:27.391Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:17:27.391Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:17:27.692Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T23:17:27.692Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:17:27.693Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-18T23:17:28.299Z","username":"admin@thottopilot.com"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T23:17:28.300Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-18T23:17:28.502Z"}
{"level":"info","message":"User a1davida1 already has tier: pro","timestamp":"2025-10-18T23:17:28.707Z"}
{"level":"info","message":"User a1davida1 email already verified","timestamp":"2025-10-18T23:17:28.913Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-18T23:17:28.913Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T23:17:28.914Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T23:17:28.915Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T23:17:28.915Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T23:17:28.915Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T23:17:28.916Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T23:17:28.919Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:17:32.597Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T23:17:32.598Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T23:17:32.598Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T23:17:32.618Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T23:17:32.623Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T23:17:32.627Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T23:17:32.630Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T23:17:32.638Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T23:17:32.643Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T23:17:32.647Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T23:17:32.651Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T23:17:32.656Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T23:17:32.656Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T23:17:32.656Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:17:32.657Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T23:17:32.660Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T23:17:32.829Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T23:17:33.522Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 6445ms","timestamp":"2025-10-18T23:17:33.523Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-18T23:17:33.523Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-18T23:17:33.523Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 6446ms","timestamp":"2025-10-18T23:17:33.524Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-18T23:17:33.524Z"}
{"correlationId":"43b37e34-381a-48c3-a5e6-9d0f8f32a125","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-18T23:17:54.490Z","userAgent":"curl/8.5.0"}
{"correlationId":"43b37e34-381a-48c3-a5e6-9d0f8f32a125","duration":7,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-18T23:17:54.497Z"}
{"correlationId":"43b37e34-381a-48c3-a5e6-9d0f8f32a125","level":"info","message":"GET /api/health 200 in 4ms :: {\"status\":\"ok\"}","requestId":"43b37e34-381a-48c3-a5e6-9d0f8f32a125","timestamp":"2025-10-18T23:17:54.498Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T23:20:48.552Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T23:20:49.389Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T23:20:49.389Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T23:20:49.390Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T23:20:49.608Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T23:20:49.609Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T23:20:49.609Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T23:20:49.609Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T23:20:49.609Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:20:49.617Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:20:49.618Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T23:20:49.618Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T23:20:49.620Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T23:20:49.620Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T23:20:49.623Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T23:20:49.623Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T23:20:49.624Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T23:20:49.625Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T23:20:49.625Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T23:20:49.629Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T23:20:49.629Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T23:20:49.630Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T23:20:49.631Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:20:49.719Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:20:49.719Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:20:49.920Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:20:49.921Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:20:50.222Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T23:20:50.222Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:20:50.222Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-18T23:20:50.670Z","username":"admin@thottopilot.com"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T23:20:50.671Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-18T23:20:50.877Z"}
{"level":"info","message":"User a1davida1 already has tier: pro","timestamp":"2025-10-18T23:20:51.080Z"}
{"level":"info","message":"User a1davida1 email already verified","timestamp":"2025-10-18T23:20:51.247Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-18T23:20:51.247Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T23:20:51.250Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T23:20:51.250Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T23:20:51.250Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T23:20:51.251Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T23:20:51.252Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T23:20:51.255Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:20:54.972Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T23:20:54.972Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T23:20:54.973Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T23:20:54.991Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T23:20:54.995Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T23:20:54.999Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T23:20:55.003Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T23:20:55.011Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T23:20:55.016Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T23:20:55.020Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T23:20:55.025Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T23:20:55.030Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T23:20:55.030Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T23:20:55.030Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:20:55.031Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T23:20:55.033Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T23:20:55.186Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T23:20:55.970Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 6361ms","timestamp":"2025-10-18T23:20:55.970Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3006","timestamp":"2025-10-18T23:20:55.970Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3006","timestamp":"2025-10-18T23:20:55.970Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3006 in 6362ms","timestamp":"2025-10-18T23:20:55.971Z"}
{"level":"info","message":"serving on port 3006","timestamp":"2025-10-18T23:20:55.971Z"}
{"correlationId":"884a9569-4e4b-4a32-970d-4ff084fe01c3","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-18T23:24:00.877Z","userAgent":"curl/8.5.0"}
{"correlationId":"884a9569-4e4b-4a32-970d-4ff084fe01c3","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-18T23:24:00.878Z"}
{"correlationId":"884a9569-4e4b-4a32-970d-4ff084fe01c3","level":"info","message":"GET /api/health 200 in 1ms :: {\"status\":\"ok\"}","requestId":"884a9569-4e4b-4a32-970d-4ff084fe01c3","timestamp":"2025-10-18T23:24:00.879Z"}
{"correlationId":"6b75722d-c006-42ee-b12a-e84446deeaec","ip":"127.0.0.1","level":"info","message":"Request received","method":"HEAD","path":"/","query":{},"timestamp":"2025-10-18T23:32:29.072Z","userAgent":"curl/8.5.0"}
{"correlationId":"6b75722d-c006-42ee-b12a-e84446deeaec","duration":8,"level":"info","message":"Response sent","method":"HEAD","path":"/","statusCode":200,"timestamp":"2025-10-18T23:32:29.080Z"}
{"correlationId":"1976c85a-67e0-404e-bf91-f3f7cde6bb5d","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/analytics","query":{"range":"7d"},"timestamp":"2025-10-18T23:32:29.087Z","userAgent":"curl/8.5.0"}
{"correlationId":"1976c85a-67e0-404e-bf91-f3f7cde6bb5d","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":401,"timestamp":"2025-10-18T23:32:29.089Z"}
{"correlationId":"1976c85a-67e0-404e-bf91-f3f7cde6bb5d","level":"info","message":"GET /api/analytics 401 in 2ms :: {\"error\":\"Access token required\"}","requestId":"1976c85a-67e0-404e-bf91-f3f7cde6bb5d","timestamp":"2025-10-18T23:32:29.089Z"}
{"correlationId":"b6cc5513-a712-4378-bc1c-de63f69ecbe5","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/analytics","query":{"range":"7d"},"timestamp":"2025-10-18T23:32:38.090Z","userAgent":"curl/8.5.0"}
{"correlationId":"b6cc5513-a712-4378-bc1c-de63f69ecbe5","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":401,"timestamp":"2025-10-18T23:32:38.092Z"}
{"correlationId":"b6cc5513-a712-4378-bc1c-de63f69ecbe5","level":"info","message":"GET /api/analytics 401 in 1ms :: {\"error\":\"Access token required\"}","requestId":"b6cc5513-a712-4378-bc1c-de63f69ecbe5","timestamp":"2025-10-18T23:32:38.092Z"}
{"correlationId":"25422f6b-2048-4287-a857-36f7e570e022","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-18T23:33:38.509Z","userAgent":"curl/8.5.0"}
{"correlationId":"25422f6b-2048-4287-a857-36f7e570e022","duration":125,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":401,"timestamp":"2025-10-18T23:33:38.635Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-18T23:34:42.722Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T23:34:43.704Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T23:34:43.704Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T23:34:43.705Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T23:34:43.935Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T23:34:43.935Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T23:34:43.936Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T23:34:43.936Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T23:34:43.936Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:34:43.944Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:34:43.945Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T23:34:43.945Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T23:34:43.947Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T23:34:43.947Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T23:34:43.950Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T23:34:43.950Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T23:34:43.951Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T23:34:43.952Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T23:34:43.952Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T23:34:43.956Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T23:34:43.956Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T23:34:43.957Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T23:34:43.958Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:34:44.045Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:34:44.045Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:34:44.246Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:34:44.246Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:34:44.547Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T23:34:44.548Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:34:44.548Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-18T23:34:44.802Z","username":"admin@thottopilot.com"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T23:34:44.802Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-18T23:34:44.888Z"}
{"level":"info","message":"User a1davida1 already has tier: pro","timestamp":"2025-10-18T23:34:44.980Z"}
{"level":"info","message":"User a1davida1 email already verified","timestamp":"2025-10-18T23:34:45.104Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-18T23:34:45.105Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T23:34:45.106Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T23:34:45.106Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T23:34:45.107Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T23:34:45.107Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T23:34:45.107Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T23:34:45.110Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:34:46.736Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T23:34:46.736Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T23:34:46.736Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T23:34:46.755Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T23:34:46.760Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T23:34:46.764Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T23:34:46.767Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T23:34:46.776Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T23:34:46.781Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T23:34:46.785Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T23:34:46.790Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T23:34:46.795Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T23:34:46.795Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T23:34:46.795Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:34:46.796Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T23:34:46.798Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T23:34:47.001Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T23:34:47.567Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 3633ms","timestamp":"2025-10-18T23:34:47.568Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-18T23:34:47.568Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-18T23:34:47.568Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 3634ms","timestamp":"2025-10-18T23:34:47.569Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-18T23:34:47.569Z"}
{"correlationId":"7a7a51de-e031-4be9-8fbf-01b8cbadb095","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-18T23:35:13.606Z","userAgent":"curl/8.5.0"}
{"correlationId":"7a7a51de-e031-4be9-8fbf-01b8cbadb095","duration":375,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":200,"timestamp":"2025-10-18T23:35:13.982Z"}
{"level":"info","message":"Sentry initialized successfully","timestamp":"2025-10-18T23:53:34.019Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-18T23:53:35.157Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-18T23:53:35.157Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-18T23:53:35.157Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-18T23:53:35.412Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-18T23:53:35.413Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-18T23:53:35.413Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-18T23:53:35.413Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-18T23:53:35.413Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:53:35.422Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:53:35.422Z"}
{"error":"Connection is closed.","level":"warn","message":"Failed to connect to Redis cache","timestamp":"2025-10-18T23:53:35.423Z"}
{"level":"info","message":"Using memory store for rate limiting (Redis disabled for beta)","timestamp":"2025-10-18T23:53:35.425Z"}
{"level":"info","message":"Rate limiter using memory store for api","timestamp":"2025-10-18T23:53:35.426Z"}
{"level":"info","message":"Rate limiter using memory store for posts","timestamp":"2025-10-18T23:53:35.428Z"}
{"level":"info","message":"Rate limiter using memory store for captions","timestamp":"2025-10-18T23:53:35.429Z"}
{"level":"info","message":"Rate limiter using memory store for default","timestamp":"2025-10-18T23:53:35.430Z"}
{"endpoints":["api","auth","posting","captions","upload","feedback","passwordReset"],"level":"info","message":"Rate limiting middleware configured","redisAvailable":false,"timestamp":"2025-10-18T23:53:35.430Z"}
{"level":"info","message":"Advanced rate limiting applied","timestamp":"2025-10-18T23:53:35.430Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-18T23:53:35.436Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-18T23:53:35.436Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-18T23:53:35.438Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-18T23:53:35.439Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:53:35.523Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:53:35.524Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:53:35.724Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:53:35.725Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"warn","message":"Redis cache error, falling back to no-cache mode","timestamp":"2025-10-18T23:53:36.025Z"}
{"level":"warn","message":"Redis connection failed after 3 retries, disabling cache","timestamp":"2025-10-18T23:53:36.025Z"}
{"level":"warn","message":"Redis cache connection closed","timestamp":"2025-10-18T23:53:36.026Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-18T23:53:36.084Z","username":"admin@thottopilot.com"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-18T23:53:36.085Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-18T23:53:36.171Z"}
{"level":"info","message":"User a1davida1 already has tier: pro","timestamp":"2025-10-18T23:53:36.260Z"}
{"level":"info","message":"User a1davida1 email already verified","timestamp":"2025-10-18T23:53:36.358Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-18T23:53:36.358Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-18T23:53:36.360Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-18T23:53:36.360Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-18T23:53:36.361Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-18T23:53:36.361Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-18T23:53:36.362Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-18T23:53:36.365Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:53:37.880Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-18T23:53:37.881Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-18T23:53:37.881Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-18T23:53:37.901Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-18T23:53:37.906Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-18T23:53:37.910Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-18T23:53:37.914Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-18T23:53:37.922Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-18T23:53:37.927Z"}
{"level":"info","message":"‚úÖ Started cron job: poll-caption-metrics (15 * * * *)","timestamp":"2025-10-18T23:53:37.932Z"}
{"level":"info","message":"‚úÖ Started cron job: update-optimal-times (0 3 * * 0)","timestamp":"2025-10-18T23:53:37.937Z"}
{"level":"info","message":"‚úÖ Started cron job: daily-health-checks (0 2 * * *)","timestamp":"2025-10-18T23:53:37.941Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-18T23:53:37.941Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-18T23:53:37.942Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-18T23:53:37.944Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-18T23:53:37.949Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-18T23:53:38.117Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-18T23:53:38.620Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 3207ms","timestamp":"2025-10-18T23:53:38.620Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-18T23:53:38.620Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-18T23:53:38.620Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 3208ms","timestamp":"2025-10-18T23:53:38.621Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-18T23:53:38.621Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-18T23:53:52.936Z","userAgent":"curl/8.5.0"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","duration":6,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-18T23:53:52.942Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"GET /api/health 200 in 4ms :: {\"status\":\"ok\"}","requestId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","timestamp":"2025-10-18T23:53:52.944Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-19T00:00:00.017Z"}
{"level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-19T00:00:00.020Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-19T00:15:00.016Z"}
{"level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-19T00:15:00.019Z"}
{"level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-19T00:15:00.634Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-19T00:15:00.704Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-19T01:00:00.019Z"}
{"level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-19T01:00:00.019Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-19T01:15:00.017Z"}
{"level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-19T01:15:00.017Z"}
{"level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-19T01:15:01.396Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-19T01:15:01.396Z"}
{"level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-19T02:00:00.014Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-19T02:00:00.015Z"}
{"level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-19T02:15:00.016Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-19T02:15:00.017Z"}
{"level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-19T02:15:01.415Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-19T02:15:01.617Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-19T03:00:00.016Z"}
{"level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-19T03:00:00.020Z"}
{"level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-19T03:15:00.019Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-19T03:15:00.020Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-19T03:15:01.467Z"}
{"level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-19T03:15:01.469Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-19T04:00:00.016Z"}
{"level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-19T04:00:00.017Z"}
{"level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-19T04:15:00.013Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"‚è∞ Starting caption metrics polling...","timestamp":"2025-10-19T04:15:00.013Z"}
{"level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-19T04:15:00.223Z"}
{"correlationId":"dbaea42c-2cf7-4a54-ab3f-719902b77864","level":"info","message":"üìä Caption metrics polling complete: 0 updated, 0 errors","timestamp":"2025-10-19T04:15:01.091Z"}
