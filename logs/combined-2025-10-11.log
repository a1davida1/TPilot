{"date":"Sat Oct 11 2025 05:51:17 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: caption request failed\nError: caption request failed\n    at /home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:99:13\n    at retryWithBackoff (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:27:14)\n    at captionImage (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:89:15)\n    at Module.nsfwCaptionFallback (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:120:19)","os":{"loadavg":[2,1.4,1.17],"uptime":257198.68},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/node_modules/tinypool/dist/entry/process.js"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":257004,"external":3988025,"heapTotal":171114496,"heapUsed":126851448,"rss":262594560},"pid":1790987,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"Error: caption request failed\n    at /home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:99:13\n    at retryWithBackoff (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:27:14)\n    at captionImage (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:89:15)\n    at Module.nsfwCaptionFallback (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:120:19)","timestamp":"2025-10-11T10:51:17.376Z","trace":[{"column":13,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":null,"line":99,"method":null,"native":false},{"column":14,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"retryWithBackoff","line":27,"method":null,"native":false},{"column":15,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"captionImage","line":89,"method":null,"native":false},{"column":19,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"Module.nsfwCaptionFallback","line":120,"method":"nsfwCaptionFallback","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:40:41.596Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:42:38.088Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:43:11.519Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:44:34.469Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:45:39.885Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:45:40.742Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:45:40.742Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:45:40.742Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:45:41.004Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:45:41.004Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:45:41.004Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:45:41.004Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:45:41.005Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:45:41.020Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:45:41.032Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:45:41.032Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:45:41.033Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:45:41.034Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:45:41.065Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:45:41.066Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:45:41.066Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:45:41.066Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:45:41.066Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.068Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:45:41.070Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:45:41.070Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:45:41.072Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:45:41.073Z"}
{"level":"error","message":"üöÄ Using Redis BullMQ queue backend","timestamp":"2025-10-11T11:45:41.073Z"}
{"level":"error","message":"üöÄ Initializing Redis BullMQ Queue backend","timestamp":"2025-10-11T11:45:41.074Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.120Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.220Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.371Z"}
{"error":{},"level":"error","message":"‚ùå Failed to initialize queue system","timestamp":"2025-10-11T11:45:41.377Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:45:47.916Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:45:48.834Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:45:48.835Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:45:48.835Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:45:49.067Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:45:49.067Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:45:49.067Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:45:49.068Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:45:49.068Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:45:49.080Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:45:49.084Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:45:49.084Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:45:49.086Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:45:49.087Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:45:49.117Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:45:49.117Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:45:49.118Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:45:49.118Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:45:49.118Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.120Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:45:49.121Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:45:49.121Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:45:49.123Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:45:49.125Z"}
{"level":"error","message":"üöÄ Using Redis BullMQ queue backend","timestamp":"2025-10-11T11:45:49.125Z"}
{"level":"error","message":"üöÄ Initializing Redis BullMQ Queue backend","timestamp":"2025-10-11T11:45:49.125Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.172Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.273Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.423Z"}
{"error":{},"level":"error","message":"‚ùå Failed to initialize queue system","timestamp":"2025-10-11T11:45:49.428Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:48:00.504Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:48:01.425Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:48:01.425Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:48:01.426Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:48:01.654Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:48:01.655Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:48:01.655Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:48:01.655Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:48:01.655Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:48:01.667Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:48:01.671Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:48:01.672Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:48:01.673Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:48:01.674Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:48:01.705Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:48:01.705Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:48:01.705Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:48:01.706Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:48:01.706Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:01.708Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:48:01.709Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:48:01.709Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:48:01.711Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:48:01.712Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:48:01.713Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:48:01.713Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:48:01.714Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:01.717Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:48:01.725Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.728Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.730Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.732Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.733Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.736Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.738Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:48:01.739Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:48:01.739Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:48:01.739Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:48:01.756Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:48:01.758Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:48:01.760Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:48:01.762Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:48:01.766Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:48:01.769Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:48:01.769Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:48:01.769Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:48:01.770Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:01.770Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:48:01.777Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:48:01.779Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:01.871Z"}
{"code":"ERR_MODULE_NOT_FOUND","level":"error","message":"Failed to initialise application: Cannot find package 'bcryptjs' imported from /home/dave/CascadeProjects/TPilot/server/routes/user-profile.ts","stack":"Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'bcryptjs' imported from /home/dave/CascadeProjects/TPilot/server/routes/user-profile.ts\n    at packageResolve (node:internal/modules/esm/resolve:873:9)\n    at moduleResolve (node:internal/modules/esm/resolve:946:18)\n    at defaultResolve (node:internal/modules/esm/resolve:1188:11)\n    at nextResolve (node:internal/modules/esm/hooks:864:28)\n    at resolveBase (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:3744)\n    at resolveDirectory (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:4243)\n    at resolveTsPaths (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:4984)\n    at async resolve (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:5355)\n    at async nextResolve (node:internal/modules/esm/hooks:864:22)\n    at async Hooks.resolve (node:internal/modules/esm/hooks:306:24)","timestamp":"2025-10-11T11:48:01.924Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:48:28.467Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:48:29.370Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:48:29.371Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:48:29.371Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:48:29.595Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:48:29.595Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:48:29.596Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:48:29.596Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:48:29.596Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:48:29.610Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:48:29.614Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:48:29.614Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:48:29.616Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:48:29.616Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:48:29.649Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:48:29.649Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:48:29.649Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:48:29.649Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:48:29.649Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.652Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:48:29.653Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:48:29.653Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:48:29.655Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:48:29.657Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:48:29.657Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:48:29.657Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:48:29.658Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:29.662Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:48:29.663Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.667Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.669Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.670Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.672Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.674Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.676Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:48:29.676Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:48:29.676Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:48:29.677Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:48:29.697Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:48:29.699Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:48:29.702Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:48:29.703Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:48:29.708Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:48:29.710Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:48:29.710Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:48:29.710Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:48:29.711Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.711Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:48:29.714Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:48:29.716Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.813Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T11:48:29.883Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.964Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:30.166Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T11:48:30.266Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 672ms","timestamp":"2025-10-11T11:48:30.267Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T11:48:30.267Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T11:48:30.267Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 673ms","timestamp":"2025-10-11T11:48:30.268Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T11:48:30.268Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:30.504Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:30.805Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:31.155Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:31.557Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:31.663Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:32.008Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:32.509Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:33.060Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:33.662Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:33.664Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:34.312Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:35.014Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:35.666Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:35.766Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:36.567Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:37.418Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:37.669Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:38.318Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:39.270Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:39.674Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:40.274Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:41.325Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:41.681Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:42.426Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:43.576Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:43.683Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:44.778Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:45.687Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:46.030Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:47.331Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:47.690Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:48.682Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:49.691Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:50.083Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:51.534Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:51.693Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:53.036Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:53.696Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:54.588Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:55.698Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:56.190Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:57.700Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:57.842Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:59.542Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.678Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.680Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.682Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.683Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.684Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.686Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:59.702Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:49:00.006Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:49:00.008Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:01.293Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:01.704Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:03.095Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:03.706Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:04.946Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:05.709Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:06.847Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:07.711Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:08.799Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:09.713Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:10.801Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:11.716Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:12.803Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:13.717Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:14.805Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:15.720Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:16.807Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:17.721Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:18.809Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:19.724Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:20.810Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:21.726Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:22.812Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:23.729Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:24.813Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:25.731Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:26.814Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:27.733Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:28.815Z"}
{"date":"Sat Oct 11 2025 06:49:29 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.26,1.59,1.23],"uptime":260691.52},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":431102,"external":6500767,"heapTotal":114962432,"heapUsed":110537120,"rss":255389696},"pid":1809108,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:49:29.618Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:49:37.139Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:49:38.010Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:49:38.011Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:49:38.011Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:49:38.224Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:49:38.224Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:49:38.224Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:49:38.225Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:49:38.225Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:49:38.240Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:49:38.244Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:49:38.244Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:49:38.245Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:49:38.246Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:49:38.281Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:49:38.281Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:49:38.282Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:49:38.282Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:49:38.282Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.284Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:49:38.286Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:49:38.286Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:49:38.288Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:49:38.290Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:49:38.290Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:49:38.290Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:49:38.292Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:38.294Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:49:38.296Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.299Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.301Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.303Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.304Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.307Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.309Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:49:38.309Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:49:38.309Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:49:38.310Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:49:38.325Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:49:38.328Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:49:38.330Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:49:38.331Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:49:38.335Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:49:38.338Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:49:38.338Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:49:38.338Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:49:38.339Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.339Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:49:38.342Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:49:38.344Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.441Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T11:49:38.482Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.593Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.793Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T11:49:38.841Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 617ms","timestamp":"2025-10-11T11:49:38.841Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T11:49:38.841Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T11:49:38.841Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 618ms","timestamp":"2025-10-11T11:49:38.842Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T11:49:38.842Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:39.065Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:39.367Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:39.718Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:40.119Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:40.296Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:40.569Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:41.071Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:41.623Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:42.224Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:42.299Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:42.874Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:43.576Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:44.302Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:44.327Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:45.129Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:45.980Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:46.304Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:46.881Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:47.833Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:48.305Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:48.833Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:49.884Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:50.308Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:50.985Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:52.136Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:52.310Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:53.338Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:54.313Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:54.589Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:55.891Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:56.315Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:57.242Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:58.318Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:58.644Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:50:00.010Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:50:00.014Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"status\" = $1 and \"scheduled_posts\".\"updated_at\" <= $2)\nparams: processing,2025-10-11T11:40:00.011Z","level":"error","message":"‚ùå Failed to check stuck jobs","timestamp":"2025-10-11T11:50:00.014Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:00.095Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:00.321Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:01.597Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:02.328Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:03.147Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:04.331Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:04.748Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:06.332Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:06.400Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:08.102Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.311Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.313Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.314Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.316Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.317Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.320Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:08.334Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/health","query":{},"timestamp":"2025-10-11T11:50:09.123Z","userAgent":"curl/8.5.0"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","duration":14,"level":"info","message":"Response sent","method":"GET","path":"/health","statusCode":200,"timestamp":"2025-10-11T11:50:09.137Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:09.853Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:10.336Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:11.655Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:12.338Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:13.507Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:14.341Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:15.409Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:16.342Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:17.361Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:18.345Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:19.363Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:20.348Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:21.364Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:22.351Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:23.366Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:24.353Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:25.367Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:26.356Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:27.368Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:28.358Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:29.369Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:30.360Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:31.371Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T11:50:32.160Z","userAgent":"curl/8.5.0"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","errors":{"email":["Invalid email"]},"formErrors":[],"ip":"127.0.0.1","level":"warn","message":"Input validation failed","method":"POST","path":"/api/auth/login","source":"body","timestamp":"2025-10-11T11:50:32.173Z","userAgent":"curl/8.5.0"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","duration":15,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":400,"timestamp":"2025-10-11T11:50:32.175Z"}
{"cause":{},"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:32.361Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:33.372Z"}
{"cause":{},"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:34.363Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:35.374Z"}
{"cause":{},"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:36.370Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:37.375Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","date":"Sat Oct 11 2025 06:50:38 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.25,1.49,1.22],"uptime":260760.15},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":448583,"external":6520296,"heapTotal":118108160,"heapUsed":111974008,"rss":253116416},"pid":1809506,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:50:38.245Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:51:44.292Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:51:45.160Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:51:45.160Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:51:45.160Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:51:45.380Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:51:45.380Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:51:45.380Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:51:45.380Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:51:45.381Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:51:45.392Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:51:45.396Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:51:45.396Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:51:45.397Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:51:45.398Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:51:45.429Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:51:45.429Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:51:45.429Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:51:45.429Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:51:45.429Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.431Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:51:45.433Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:51:45.433Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:51:45.434Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:51:45.436Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:51:45.436Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:51:45.436Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:51:45.438Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:45.441Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:51:45.442Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.446Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.447Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.449Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.450Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.452Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.454Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:51:45.454Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:51:45.454Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:51:45.455Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:51:45.471Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:51:45.473Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:51:45.475Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:51:45.477Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:51:45.481Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:51:45.483Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:51:45.484Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:51:45.484Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:51:45.484Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.485Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:51:45.488Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:51:45.490Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.586Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T11:51:45.624Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.737Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.938Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T11:51:45.975Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 595ms","timestamp":"2025-10-11T11:51:45.975Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T11:51:45.975Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T11:51:45.975Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 596ms","timestamp":"2025-10-11T11:51:45.976Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T11:51:45.976Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:46.198Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:46.500Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:46.851Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:47.252Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:47.444Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:47.704Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:48.205Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:48.755Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:49.356Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:49.445Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:50.007Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:50.708Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:51.447Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:51.459Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:52.260Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:53.112Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:53.449Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:54.013Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:54.965Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:55.451Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:55.967Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:57.017Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:57.453Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:58.118Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:59.268Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:59.453Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:52:00.008Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:52:00.010Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:00.469Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:01.457Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:01.721Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:03.022Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:03.459Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:04.374Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:05.461Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:05.775Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:07.227Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:07.464Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:08.728Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:09.468Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:10.280Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:11.471Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:11.881Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:13.473Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:13.532Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:15.232Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.456Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.458Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.459Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.461Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.462Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.464Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:15.476Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:16.983Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:17.477Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:18.785Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:19.480Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:20.637Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:21.484Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:22.540Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:23.487Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:24.493Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:25.488Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:26.494Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:27.490Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:28.497Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:29.492Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:30.499Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:31.494Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:32.501Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:33.497Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:34.503Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:35.499Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:36.506Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:37.502Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:38.509Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:39.504Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:40.511Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:41.507Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:42.512Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:43.508Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:44.514Z"}
{"date":"Sat Oct 11 2025 06:52:45 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.52,1.59,1.29],"uptime":260887.3},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":458881,"external":6528546,"heapTotal":115486720,"heapUsed":110775040,"rss":256860160},"pid":1810590,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:52:45.398Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:52:54.375Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:52:55.209Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:52:55.209Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:52:55.210Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:52:55.424Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:52:55.425Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:52:55.425Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:52:55.425Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:52:55.425Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:52:55.442Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:52:55.446Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:52:55.447Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:52:55.448Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:52:55.449Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:52:55.487Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:52:55.487Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:52:55.487Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:52:55.488Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:52:55.488Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.490Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:52:55.492Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:52:55.493Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:52:55.495Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:52:55.497Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:52:55.497Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:52:55.498Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:52:55.499Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:55.502Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:52:55.504Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.508Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.510Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.512Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.514Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.515Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.517Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:52:55.518Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:52:55.518Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:52:55.518Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:52:55.534Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:52:55.537Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:52:55.539Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:52:55.541Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:52:55.545Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:52:55.548Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:52:55.548Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:52:55.548Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:52:55.549Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.549Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:52:55.552Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:52:55.554Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.650Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T11:52:55.698Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.801Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.002Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T11:52:56.048Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 624ms","timestamp":"2025-10-11T11:52:56.049Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T11:52:56.049Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T11:52:56.049Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 625ms","timestamp":"2025-10-11T11:52:56.050Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T11:52:56.050Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.269Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.571Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.925Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:57.328Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:57.504Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:57.778Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:58.281Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:58.832Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:59.435Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:59.507Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:53:00.006Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:53:00.008Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:00.087Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:00.790Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:01.510Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:01.540Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:02.342Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:03.193Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:03.512Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:04.094Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:05.045Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:05.514Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:06.045Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T11:53:06.269Z","userAgent":"curl/8.5.0"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","errors":{"email":["Invalid email"]},"formErrors":[],"ip":"127.0.0.1","level":"warn","message":"Input validation failed","method":"POST","path":"/api/auth/login","source":"body","timestamp":"2025-10-11T11:53:06.277Z","userAgent":"curl/8.5.0"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","duration":9,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":400,"timestamp":"2025-10-11T11:53:06.278Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:07.096Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:07.516Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:08.199Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:09.352Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:09.518Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:10.554Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:11.531Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:11.806Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:13.108Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:13.540Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:14.459Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:15.545Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:15.859Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:17.310Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T11:53:17.340Z","userAgent":"curl/8.5.0"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","duration":4,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":401,"timestamp":"2025-10-11T11:53:17.344Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:17.547Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:18.810Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:19.549Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:20.361Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:21.557Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:21.966Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:23.564Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:23.617Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:25.318Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.519Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.520Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.522Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.524Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.525Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.527Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:25.566Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:27.068Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:27.567Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:28.869Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:29.570Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:30.720Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:31.572Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:32.621Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:33.576Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:34.571Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:35.580Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:36.574Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:37.583Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:38.576Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:39.586Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:40.577Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:41.592Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:42.579Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:43.593Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:44.580Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:45.595Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:46.582Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:47.598Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:48.583Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:49.599Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:50.584Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:51.601Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:52.585Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:53.604Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:54.586Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","date":"Sat Oct 11 2025 06:53:55 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[2.11,1.79,1.39],"uptime":260957.35},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":455702,"external":6527415,"heapTotal":114438144,"heapUsed":111039160,"rss":251592704},"pid":1810950,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:53:55.450Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:55:58.820Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:55:59.768Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:55:59.768Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:55:59.768Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:56:00.014Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:56:00.014Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:56:00.015Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:56:00.015Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:56:00.015Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:56:00.028Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:56:00.033Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:56:00.033Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:56:00.034Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:56:00.035Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:56:00.067Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:56:00.068Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:56:00.068Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:56:00.068Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:56:00.068Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.071Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:56:00.072Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:56:00.072Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:56:00.075Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:56:00.077Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:56:00.077Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:56:00.077Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:56:00.079Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:00.083Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:56:00.085Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.089Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.090Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.092Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.093Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.096Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.098Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:56:00.098Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:56:00.098Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:56:00.099Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:56:00.115Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:56:00.118Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:56:00.120Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:56:00.123Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:56:00.127Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:56:00.129Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:56:00.129Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:56:00.129Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:56:00.130Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.131Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:56:00.134Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:56:00.137Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.232Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T11:56:00.277Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.383Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.600Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T11:56:00.660Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 646ms","timestamp":"2025-10-11T11:56:00.660Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T11:56:00.660Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T11:56:00.660Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 647ms","timestamp":"2025-10-11T11:56:00.661Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T11:56:00.662Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.910Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:01.211Z"}
{"correlationId":"84b48ebc-6264-498e-b613-0723e2ce6977","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T11:56:01.252Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"84b48ebc-6264-498e-b613-0723e2ce6977","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":401,"timestamp":"2025-10-11T11:56:01.256Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/metrics","query":{},"timestamp":"2025-10-11T11:56:01.318Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":{"cause":{},"params":[],"query":"select count(*) from \"users\""},"level":"error","message":"Failed to load metrics summary","timestamp":"2025-10-11T11:56:01.324Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","duration":8,"level":"info","message":"Response sent","method":"GET","path":"/api/metrics","statusCode":500,"timestamp":"2025-10-11T11:56:01.325Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:01.562Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:01.964Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:02.086Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:02.414Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:02.916Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:03.468Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:04.069Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:04.087Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:04.720Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:05.422Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:06.089Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:06.173Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:06.975Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:07.826Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:08.091Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:08.727Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:09.679Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:10.093Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:10.680Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:11.731Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:12.095Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:12.832Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:13.984Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:14.097Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:15.187Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:16.100Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:16.441Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:17.746Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:18.106Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:19.097Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:20.108Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:20.499Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:21.951Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:22.110Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/health","query":{},"timestamp":"2025-10-11T11:56:22.625Z","userAgent":"curl/8.5.0"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","duration":11,"level":"info","message":"Response sent","method":"GET","path":"/health","statusCode":200,"timestamp":"2025-10-11T11:56:22.637Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:23.453Z"}
{"cause":{},"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:24.113Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:25.004Z"}
{"cause":{},"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:26.115Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:26.605Z"}
{"cause":{},"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:28.118Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:28.256Z"}
{"correlationId":"a0160acb-23b8-439a-b2a6-2351e166b4f3","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/health","query":{},"timestamp":"2025-10-11T11:56:29.068Z","userAgent":"curl/8.5.0"}
{"correlationId":"a0160acb-23b8-439a-b2a6-2351e166b4f3","duration":6,"level":"info","message":"Response sent","method":"GET","path":"/health","statusCode":200,"timestamp":"2025-10-11T11:56:29.074Z"}
{"correlationId":"e21e8599-390f-4fd1-93a1-0b060a9a4512","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T11:56:29.451Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"e21e8599-390f-4fd1-93a1-0b060a9a4512","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T11:56:29.452Z"}
{"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T11:56:29.457Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","duration":8,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T11:56:29.465Z"}
{"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:29.956Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.101Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.102Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.103Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.105Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.106Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.108Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:30.121Z"}
{"correlationId":"fd93122f-e939-4281-b469-33b6fc304654","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T11:56:30.957Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"fd93122f-e939-4281-b469-33b6fc304654","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T11:56:30.958Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T11:56:30.963Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T11:56:30.964Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:31.707Z"}
{"cause":{},"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:32.122Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:33.509Z"}
{"cause":{},"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:34.125Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:35.361Z"}
{"cause":{},"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:36.126Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:37.263Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-11T11:56:37.277Z","userAgent":"curl/8.5.0"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-11T11:56:37.278Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:38.128Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:39.215Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:40.130Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:41.216Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:42.134Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:43.216Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:44.136Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:45.218Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:46.141Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:47.219Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:48.144Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:49.220Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:50.146Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:51.221Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:52.148Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:53.224Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:54.150Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:55.225Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:56.154Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:57.227Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:58.160Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:59.229Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:57:00.007Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:57:00.009Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","date":"Sat Oct 11 2025 06:57:00 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.86,1.7,1.41],"uptime":261141.94},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":445412,"external":6517125,"heapTotal":115748864,"heapUsed":112342920,"rss":254132224},"pid":1811997,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:57:00.034Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T12:38:12.255Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T12:38:13.245Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T12:38:13.245Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T12:38:13.245Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T12:38:13.469Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T12:38:13.470Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T12:38:13.470Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T12:38:13.470Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T12:38:13.470Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T12:38:13.485Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T12:38:13.490Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T12:38:13.490Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T12:38:13.492Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T12:38:13.493Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T12:38:13.531Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T12:38:13.531Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T12:38:13.531Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T12:38:13.532Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T12:38:13.532Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:13.534Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T12:38:13.536Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T12:38:13.537Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T12:38:13.538Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T12:38:13.540Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T12:38:13.540Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T12:38:13.540Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T12:38:13.542Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:13.546Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T12:38:13.547Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.551Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.553Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.554Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.556Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.558Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.559Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:38:13.560Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T12:38:13.560Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T12:38:13.560Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T12:38:13.579Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T12:38:13.582Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T12:38:13.584Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T12:38:13.586Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T12:38:13.590Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T12:38:13.592Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T12:38:13.593Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T12:38:13.593Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:38:13.594Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:13.594Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T12:38:13.597Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T12:38:13.599Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:13.695Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T12:38:13.756Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:13.846Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:14.069Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T12:38:14.139Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 669ms","timestamp":"2025-10-11T12:38:14.139Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T12:38:14.139Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T12:38:14.140Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 670ms","timestamp":"2025-10-11T12:38:14.140Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T12:38:14.140Z"}
{"correlationId":"d8b330a8-016e-4856-8481-1b6862cc1b19","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T12:38:14.392Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"d8b330a8-016e-4856-8481-1b6862cc1b19","duration":4,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":401,"timestamp":"2025-10-11T12:38:14.397Z"}
{"correlationId":"d8b330a8-016e-4856-8481-1b6862cc1b19","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:14.401Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/metrics","query":{},"timestamp":"2025-10-11T12:38:14.421Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":{"cause":{},"params":[],"query":"select count(*) from \"users\""},"level":"error","message":"Failed to load metrics summary","timestamp":"2025-10-11T12:38:14.430Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","duration":11,"level":"info","message":"Response sent","method":"GET","path":"/api/metrics","statusCode":500,"timestamp":"2025-10-11T12:38:14.432Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:14.702Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:15.052Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:15.453Z"}
{"cause":{},"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:15.547Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:15.904Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:16.405Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:16.956Z"}
{"cause":{},"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:17.549Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:17.557Z"}
{"correlationId":"bab4622b-ec0f-4308-9624-ba50990c7161","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T12:38:17.743Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"bab4622b-ec0f-4308-9624-ba50990c7161","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T12:38:17.745Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T12:38:17.750Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","duration":6,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T12:38:17.757Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:18.208Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:18.908Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:19.552Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:19.660Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:20.460Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:21.311Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:21.553Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:22.212Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:23.163Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:23.555Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:24.164Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:25.215Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:25.558Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:26.315Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:27.466Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:27.559Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:28.667Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:29.562Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:29.918Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T12:38:30.848Z","userAgent":"curl/8.5.0"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","duration":6,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":401,"timestamp":"2025-10-11T12:38:30.854Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:31.219Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:31.564Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:32.570Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:33.566Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:33.971Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:35.422Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:35.568Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:36.923Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:37.570Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:38.474Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:39.572Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:40.075Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:41.574Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:41.727Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:43.427Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.561Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.563Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.564Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.567Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.568Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.570Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:43.576Z"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/signup","query":{},"timestamp":"2025-10-11T12:38:44.926Z","userAgent":"curl/8.5.0"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","errors":{"email":["Invalid email format"],"password":["Must contain uppercase"]},"formErrors":[],"ip":"127.0.0.1","level":"warn","message":"Input validation failed","method":"POST","path":"/api/auth/signup","source":"body","timestamp":"2025-10-11T12:38:44.928Z","userAgent":"curl/8.5.0"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","duration":3,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/signup","statusCode":400,"timestamp":"2025-10-11T12:38:44.929Z"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:45.178Z"}
{"cause":{},"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:45.578Z"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:46.978Z"}
{"cause":{},"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:47.581Z"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:48.829Z"}
{"cause":{},"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:49.584Z"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:50.730Z"}
{"cause":{},"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:51.589Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/signup","query":{},"timestamp":"2025-10-11T12:38:52.186Z","userAgent":"curl/8.5.0"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"‚ö†Ô∏è Auth failure: signup - Failed query: insert into \"users\" (\"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\") values (default, $1, $2, $3, default, default, default, default, default, $4, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default) returning \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\"\nparams: admin,$2b$10$qlkN210ZNsEdSGnUeeN9..d0zmCSFuYRU5OpQTUzlBj8UXkDOSz.y,admin@example.com,free","timestamp":"2025-10-11T12:38:52.235Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","duration":50,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/signup","statusCode":500,"timestamp":"2025-10-11T12:38:52.236Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:52.682Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:53.591Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:54.683Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:55.593Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:56.683Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:57.595Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:58.684Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:59.597Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T12:39:00.006Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T12:39:00.008Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:00.685Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:01.599Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:02.686Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:03.602Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:04.686Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:05.605Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:06.687Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:07.607Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:08.687Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:09.609Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:10.688Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:11.612Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:12.689Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","date":"Sat Oct 11 2025 07:39:13 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[3.22,1.64,1.2],"uptime":263675.4},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":477419,"external":6549132,"heapTotal":115224576,"heapUsed":112126304,"rss":255012864},"pid":1815872,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T12:39:13.492Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T12:41:01.051Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T12:41:02.045Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T12:41:02.045Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T12:41:02.046Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T12:41:02.260Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T12:41:02.260Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T12:41:02.260Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T12:41:02.261Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T12:41:02.261Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T12:41:02.279Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T12:41:02.284Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T12:41:02.285Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T12:41:02.286Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T12:41:02.287Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:02.296Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-11T12:41:02.312Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T12:41:02.312Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-11T12:41:02.314Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-11T12:41:02.315Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-11T12:41:02.316Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-11T12:41:02.316Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T12:41:02.318Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T12:41:02.318Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T12:41:02.318Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T12:41:02.319Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T12:41:02.323Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:41:02.338Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T12:41:02.338Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T12:41:02.339Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T12:41:02.355Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T12:41:02.357Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T12:41:02.360Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T12:41:02.361Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T12:41:02.366Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T12:41:02.368Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T12:41:02.368Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T12:41:02.368Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:41:02.369Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:02.370Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T12:41:02.373Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T12:41:02.376Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:02.471Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T12:41:02.530Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:02.622Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:02.834Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T12:41:02.891Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 631ms","timestamp":"2025-10-11T12:41:02.891Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T12:41:02.891Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T12:41:02.891Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 633ms","timestamp":"2025-10-11T12:41:02.893Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T12:41:02.893Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:03.129Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:03.430Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:03.782Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:04.183Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:04.635Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:05.138Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:05.690Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:06.292Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:06.942Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:07.643Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:08.394Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:09.196Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:10.047Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:10.948Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:11.900Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:12.901Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T12:41:13.389Z","userAgent":"curl/8.5.0"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","duration":60,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":200,"timestamp":"2025-10-11T12:41:13.448Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:13.953Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:15.056Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:16.208Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:17.409Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:18.660Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:19.961Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:21.312Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:22.714Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:24.165Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:25.667Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:27.219Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:28.820Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:30.471Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:32.172Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:33.922Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:35.723Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:37.575Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:39.476Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:41.427Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:43.428Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:45.429Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:47.430Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:49.431Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:51.433Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:53.436Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:55.439Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:57.440Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:59.442Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:42:01.445Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","date":"Sat Oct 11 2025 07:42:02 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[2.25,1.84,1.35],"uptime":263844.19},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":457294,"external":6533758,"heapTotal":115486720,"heapUsed":110540632,"rss":249106432},"pid":1817702,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T12:42:02.291Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
