{"date":"Sat Oct 11 2025 05:51:17 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: caption request failed\nError: caption request failed\n    at /home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:99:13\n    at retryWithBackoff (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:27:14)\n    at captionImage (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:89:15)\n    at Module.nsfwCaptionFallback (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:120:19)","os":{"loadavg":[2,1.4,1.17],"uptime":257198.68},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/node_modules/tinypool/dist/entry/process.js"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":257004,"external":3988025,"heapTotal":171114496,"heapUsed":126851448,"rss":262594560},"pid":1790987,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"Error: caption request failed\n    at /home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:99:13\n    at retryWithBackoff (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:27:14)\n    at captionImage (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:89:15)\n    at Module.nsfwCaptionFallback (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:120:19)","timestamp":"2025-10-11T10:51:17.376Z","trace":[{"column":13,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":null,"line":99,"method":null,"native":false},{"column":14,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"retryWithBackoff","line":27,"method":null,"native":false},{"column":15,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"captionImage","line":89,"method":null,"native":false},{"column":19,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"Module.nsfwCaptionFallback","line":120,"method":"nsfwCaptionFallback","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:40:41.596Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:42:38.088Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:43:11.519Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:44:34.469Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:45:39.885Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:45:40.742Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:45:40.742Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:45:40.742Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:45:41.004Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:45:41.004Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:45:41.004Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:45:41.004Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:45:41.005Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:45:41.020Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:45:41.032Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:45:41.032Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:45:41.033Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:45:41.034Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:45:41.065Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:45:41.066Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:45:41.066Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:45:41.066Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:45:41.066Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.068Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:45:41.070Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:45:41.070Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:45:41.072Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:45:41.073Z"}
{"level":"error","message":"üöÄ Using Redis BullMQ queue backend","timestamp":"2025-10-11T11:45:41.073Z"}
{"level":"error","message":"üöÄ Initializing Redis BullMQ Queue backend","timestamp":"2025-10-11T11:45:41.074Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.120Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.220Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:41.371Z"}
{"error":{},"level":"error","message":"‚ùå Failed to initialize queue system","timestamp":"2025-10-11T11:45:41.377Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:45:47.916Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:45:48.834Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:45:48.835Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:45:48.835Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:45:49.067Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:45:49.067Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:45:49.067Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:45:49.068Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:45:49.068Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:45:49.080Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:45:49.084Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:45:49.084Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:45:49.086Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:45:49.087Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:45:49.117Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:45:49.117Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:45:49.118Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:45:49.118Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:45:49.118Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.120Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:45:49.121Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:45:49.121Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:45:49.123Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:45:49.125Z"}
{"level":"error","message":"üöÄ Using Redis BullMQ queue backend","timestamp":"2025-10-11T11:45:49.125Z"}
{"level":"error","message":"üöÄ Initializing Redis BullMQ Queue backend","timestamp":"2025-10-11T11:45:49.125Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.172Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.273Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:45:49.423Z"}
{"error":{},"level":"error","message":"‚ùå Failed to initialize queue system","timestamp":"2025-10-11T11:45:49.428Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:48:00.504Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:48:01.425Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:48:01.425Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:48:01.426Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:48:01.654Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:48:01.655Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:48:01.655Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:48:01.655Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:48:01.655Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:48:01.667Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:48:01.671Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:48:01.672Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:48:01.673Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:48:01.674Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:48:01.705Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:48:01.705Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:48:01.705Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:48:01.706Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:48:01.706Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:01.708Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:48:01.709Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:48:01.709Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:48:01.711Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:48:01.712Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:48:01.713Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:48:01.713Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:48:01.714Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:01.717Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:48:01.725Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.728Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.730Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.732Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.733Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.736Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:01.738Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:48:01.739Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:48:01.739Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:48:01.739Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:48:01.756Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:48:01.758Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:48:01.760Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:48:01.762Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:48:01.766Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:48:01.769Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:48:01.769Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:48:01.769Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:48:01.770Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:01.770Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:48:01.777Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:48:01.779Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:01.871Z"}
{"code":"ERR_MODULE_NOT_FOUND","level":"error","message":"Failed to initialise application: Cannot find package 'bcryptjs' imported from /home/dave/CascadeProjects/TPilot/server/routes/user-profile.ts","stack":"Error [ERR_MODULE_NOT_FOUND]: Cannot find package 'bcryptjs' imported from /home/dave/CascadeProjects/TPilot/server/routes/user-profile.ts\n    at packageResolve (node:internal/modules/esm/resolve:873:9)\n    at moduleResolve (node:internal/modules/esm/resolve:946:18)\n    at defaultResolve (node:internal/modules/esm/resolve:1188:11)\n    at nextResolve (node:internal/modules/esm/hooks:864:28)\n    at resolveBase (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:3744)\n    at resolveDirectory (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:4243)\n    at resolveTsPaths (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:4984)\n    at async resolve (file:///home/dave/CascadeProjects/TPilot/node_modules/tsx/dist/esm/index.mjs?1760183280020:2:5355)\n    at async nextResolve (node:internal/modules/esm/hooks:864:22)\n    at async Hooks.resolve (node:internal/modules/esm/hooks:306:24)","timestamp":"2025-10-11T11:48:01.924Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:48:28.467Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:48:29.370Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:48:29.371Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:48:29.371Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:48:29.595Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:48:29.595Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:48:29.596Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:48:29.596Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:48:29.596Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:48:29.610Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:48:29.614Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:48:29.614Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:48:29.616Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:48:29.616Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:48:29.649Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:48:29.649Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:48:29.649Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:48:29.649Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:48:29.649Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.652Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:48:29.653Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:48:29.653Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:48:29.655Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:48:29.657Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:48:29.657Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:48:29.657Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:48:29.658Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:29.662Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:48:29.663Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.667Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.669Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.670Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.672Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.674Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:48:29.676Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:48:29.676Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:48:29.676Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:48:29.677Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:48:29.697Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:48:29.699Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:48:29.702Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:48:29.703Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:48:29.708Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:48:29.710Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:48:29.710Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:48:29.710Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:48:29.711Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.711Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:48:29.714Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:48:29.716Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.813Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T11:48:29.883Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:29.964Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:30.166Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T11:48:30.266Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 672ms","timestamp":"2025-10-11T11:48:30.267Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T11:48:30.267Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T11:48:30.267Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 673ms","timestamp":"2025-10-11T11:48:30.268Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T11:48:30.268Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:30.504Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:30.805Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:31.155Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:31.557Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:31.663Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:32.008Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:32.509Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:33.060Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:33.662Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:33.664Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:34.312Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:35.014Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:35.666Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:35.766Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:36.567Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:37.418Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:37.669Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:38.318Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:39.270Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:39.674Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:40.274Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:41.325Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:41.681Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:42.426Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:43.576Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:43.683Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:44.778Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:45.687Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:46.030Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:47.331Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:47.690Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:48.682Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:49.691Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:50.083Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:51.534Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:51.693Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:53.036Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:53.696Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:54.588Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:55.698Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:56.190Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:57.700Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:57.842Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:48:59.542Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.678Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.680Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.682Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.683Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.684Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:48:59.686Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:48:59.702Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:49:00.006Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:49:00.008Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:01.293Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:01.704Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:03.095Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:03.706Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:04.946Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:05.709Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:06.847Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:07.711Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:08.799Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:09.713Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:10.801Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:11.716Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:12.803Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:13.717Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:14.805Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:15.720Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:16.807Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:17.721Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:18.809Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:19.724Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:20.810Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:21.726Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:22.812Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:23.729Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:24.813Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:25.731Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:26.814Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:27.733Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:28.815Z"}
{"date":"Sat Oct 11 2025 06:49:29 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.26,1.59,1.23],"uptime":260691.52},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":431102,"external":6500767,"heapTotal":114962432,"heapUsed":110537120,"rss":255389696},"pid":1809108,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:49:29.618Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:49:37.139Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:49:38.010Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:49:38.011Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:49:38.011Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:49:38.224Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:49:38.224Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:49:38.224Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:49:38.225Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:49:38.225Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:49:38.240Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:49:38.244Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:49:38.244Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:49:38.245Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:49:38.246Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:49:38.281Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:49:38.281Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:49:38.282Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:49:38.282Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:49:38.282Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.284Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:49:38.286Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:49:38.286Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:49:38.288Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:49:38.290Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:49:38.290Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:49:38.290Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:49:38.292Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:38.294Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:49:38.296Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.299Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.301Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.303Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.304Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.307Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:49:38.309Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:49:38.309Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:49:38.309Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:49:38.310Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:49:38.325Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:49:38.328Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:49:38.330Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:49:38.331Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:49:38.335Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:49:38.338Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:49:38.338Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:49:38.338Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:49:38.339Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.339Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:49:38.342Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:49:38.344Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.441Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T11:49:38.482Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.593Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:38.793Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T11:49:38.841Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 617ms","timestamp":"2025-10-11T11:49:38.841Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T11:49:38.841Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T11:49:38.841Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 618ms","timestamp":"2025-10-11T11:49:38.842Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T11:49:38.842Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:39.065Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:39.367Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:39.718Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:40.119Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:40.296Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:40.569Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:41.071Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:41.623Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:42.224Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:42.299Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:42.874Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:43.576Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:44.302Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:44.327Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:45.129Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:45.980Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:46.304Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:46.881Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:47.833Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:48.305Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:48.833Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:49.884Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:50.308Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:50.985Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:52.136Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:52.310Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:53.338Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:54.313Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:54.589Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:55.891Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:56.315Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:57.242Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:49:58.318Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:49:58.644Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:50:00.010Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:50:00.014Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"status\" = $1 and \"scheduled_posts\".\"updated_at\" <= $2)\nparams: processing,2025-10-11T11:40:00.011Z","level":"error","message":"‚ùå Failed to check stuck jobs","timestamp":"2025-10-11T11:50:00.014Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:00.095Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:00.321Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:01.597Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:02.328Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:03.147Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:04.331Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:04.748Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:06.332Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:06.400Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:08.102Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.311Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.313Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.314Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.316Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.317Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:50:08.320Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:08.334Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/health","query":{},"timestamp":"2025-10-11T11:50:09.123Z","userAgent":"curl/8.5.0"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","duration":14,"level":"info","message":"Response sent","method":"GET","path":"/health","statusCode":200,"timestamp":"2025-10-11T11:50:09.137Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:09.853Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:10.336Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:11.655Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:12.338Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:13.507Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:14.341Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:15.409Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:16.342Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:17.361Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:18.345Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:19.363Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:20.348Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:21.364Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:22.351Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:23.366Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:24.353Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:25.367Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:26.356Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:27.368Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:28.358Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:29.369Z"}
{"cause":{},"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:30.360Z"}
{"correlationId":"33ef2ebb-0704-4264-aa6d-c0727ec2cc91","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:31.371Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T11:50:32.160Z","userAgent":"curl/8.5.0"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","errors":{"email":["Invalid email"]},"formErrors":[],"ip":"127.0.0.1","level":"warn","message":"Input validation failed","method":"POST","path":"/api/auth/login","source":"body","timestamp":"2025-10-11T11:50:32.173Z","userAgent":"curl/8.5.0"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","duration":15,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":400,"timestamp":"2025-10-11T11:50:32.175Z"}
{"cause":{},"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:32.361Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:33.372Z"}
{"cause":{},"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:34.363Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:35.374Z"}
{"cause":{},"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:50:36.370Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:50:37.375Z"}
{"correlationId":"371d423c-904f-4802-84a8-793cbefa9334","date":"Sat Oct 11 2025 06:50:38 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.25,1.49,1.22],"uptime":260760.15},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":448583,"external":6520296,"heapTotal":118108160,"heapUsed":111974008,"rss":253116416},"pid":1809506,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:50:38.245Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:51:44.292Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:51:45.160Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:51:45.160Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:51:45.160Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:51:45.380Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:51:45.380Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:51:45.380Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:51:45.380Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:51:45.381Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:51:45.392Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:51:45.396Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:51:45.396Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:51:45.397Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:51:45.398Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:51:45.429Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:51:45.429Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:51:45.429Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:51:45.429Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:51:45.429Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.431Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:51:45.433Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:51:45.433Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:51:45.434Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:51:45.436Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:51:45.436Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:51:45.436Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:51:45.438Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:45.441Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:51:45.442Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.446Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.447Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.449Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.450Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.452Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:51:45.454Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:51:45.454Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:51:45.454Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:51:45.455Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:51:45.471Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:51:45.473Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:51:45.475Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:51:45.477Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:51:45.481Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:51:45.483Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:51:45.484Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:51:45.484Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:51:45.484Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.485Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:51:45.488Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:51:45.490Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.586Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T11:51:45.624Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.737Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:45.938Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T11:51:45.975Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 595ms","timestamp":"2025-10-11T11:51:45.975Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T11:51:45.975Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T11:51:45.975Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 596ms","timestamp":"2025-10-11T11:51:45.976Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T11:51:45.976Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:46.198Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:46.500Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:46.851Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:47.252Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:47.444Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:47.704Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:48.205Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:48.755Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:49.356Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:49.445Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:50.007Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:50.708Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:51.447Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:51.459Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:52.260Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:53.112Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:53.449Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:54.013Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:54.965Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:55.451Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:55.967Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:57.017Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:57.453Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:58.118Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:51:59.268Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:51:59.453Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:52:00.008Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:52:00.010Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:00.469Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:01.457Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:01.721Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:03.022Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:03.459Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:04.374Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:05.461Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:05.775Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:07.227Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:07.464Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:08.728Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:09.468Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:10.280Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:11.471Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:11.881Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:13.473Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:13.532Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:15.232Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.456Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.458Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.459Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.461Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.462Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:52:15.464Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:15.476Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:16.983Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:17.477Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:18.785Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:19.480Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:20.637Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:21.484Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:22.540Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:23.487Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:24.493Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:25.488Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:26.494Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:27.490Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:28.497Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:29.492Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:30.499Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:31.494Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:32.501Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:33.497Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:34.503Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:35.499Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:36.506Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:37.502Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:38.509Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:39.504Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:40.511Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:41.507Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:42.512Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:43.508Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:44.514Z"}
{"date":"Sat Oct 11 2025 06:52:45 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.52,1.59,1.29],"uptime":260887.3},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":458881,"external":6528546,"heapTotal":115486720,"heapUsed":110775040,"rss":256860160},"pid":1810590,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:52:45.398Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:52:54.375Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:52:55.209Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:52:55.209Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:52:55.210Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:52:55.424Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:52:55.425Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:52:55.425Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:52:55.425Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:52:55.425Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:52:55.442Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:52:55.446Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:52:55.447Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:52:55.448Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:52:55.449Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:52:55.487Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:52:55.487Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:52:55.487Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:52:55.488Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:52:55.488Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.490Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:52:55.492Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:52:55.493Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:52:55.495Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:52:55.497Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:52:55.497Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:52:55.498Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:52:55.499Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:55.502Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:52:55.504Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.508Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.510Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.512Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.514Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.515Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:52:55.517Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:52:55.518Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:52:55.518Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:52:55.518Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:52:55.534Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:52:55.537Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:52:55.539Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:52:55.541Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:52:55.545Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:52:55.548Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:52:55.548Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:52:55.548Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:52:55.549Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.549Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:52:55.552Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:52:55.554Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.650Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T11:52:55.698Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:55.801Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.002Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T11:52:56.048Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 624ms","timestamp":"2025-10-11T11:52:56.049Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T11:52:56.049Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T11:52:56.049Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 625ms","timestamp":"2025-10-11T11:52:56.050Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T11:52:56.050Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.269Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.571Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:56.925Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:57.328Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:57.504Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:57.778Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:58.281Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:58.832Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:52:59.435Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:52:59.507Z"}
{"error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:53:00.006Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:53:00.008Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:00.087Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:00.790Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:01.510Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:01.540Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:02.342Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:03.193Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:03.512Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:04.094Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:05.045Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:05.514Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:06.045Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T11:53:06.269Z","userAgent":"curl/8.5.0"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","errors":{"email":["Invalid email"]},"formErrors":[],"ip":"127.0.0.1","level":"warn","message":"Input validation failed","method":"POST","path":"/api/auth/login","source":"body","timestamp":"2025-10-11T11:53:06.277Z","userAgent":"curl/8.5.0"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","duration":9,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":400,"timestamp":"2025-10-11T11:53:06.278Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:07.096Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:07.516Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:08.199Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:09.352Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:09.518Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:10.554Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:11.531Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:11.806Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:13.108Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:13.540Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:14.459Z"}
{"cause":{},"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:15.545Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:15.859Z"}
{"correlationId":"f24630ec-dd21-4d4a-bf2b-cfbf6030e581","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:17.310Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T11:53:17.340Z","userAgent":"curl/8.5.0"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","duration":4,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":401,"timestamp":"2025-10-11T11:53:17.344Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:17.547Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:18.810Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:19.549Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:20.361Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:21.557Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:21.966Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:23.564Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:23.617Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:25.318Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.519Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.520Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.522Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.524Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.525Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:53:25.527Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:25.566Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:27.068Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:27.567Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:28.869Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:29.570Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:30.720Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:31.572Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:32.621Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:33.576Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:34.571Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:35.580Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:36.574Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:37.583Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:38.576Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:39.586Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:40.577Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:41.592Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:42.579Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:43.593Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:44.580Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:45.595Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:46.582Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:47.598Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:48.583Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:49.599Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:50.584Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:51.601Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:52.585Z"}
{"cause":{},"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:53:53.604Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:53:54.586Z"}
{"correlationId":"97b1f645-a698-46a2-b255-30e8042a10a6","date":"Sat Oct 11 2025 06:53:55 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[2.11,1.79,1.39],"uptime":260957.35},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":455702,"external":6527415,"heapTotal":114438144,"heapUsed":111039160,"rss":251592704},"pid":1810950,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:53:55.450Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T11:55:58.820Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T11:55:59.768Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T11:55:59.768Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T11:55:59.768Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T11:56:00.014Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T11:56:00.014Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T11:56:00.015Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T11:56:00.015Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T11:56:00.015Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T11:56:00.028Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T11:56:00.033Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T11:56:00.033Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T11:56:00.034Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T11:56:00.035Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T11:56:00.067Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T11:56:00.068Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T11:56:00.068Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T11:56:00.068Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T11:56:00.068Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.071Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T11:56:00.072Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T11:56:00.072Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T11:56:00.075Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T11:56:00.077Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T11:56:00.077Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T11:56:00.077Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T11:56:00.079Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:00.083Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T11:56:00.085Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.089Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.090Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.092Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.093Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.096Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T11:56:00.098Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:56:00.098Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T11:56:00.098Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T11:56:00.099Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T11:56:00.115Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T11:56:00.118Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T11:56:00.120Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T11:56:00.123Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T11:56:00.127Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T11:56:00.129Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T11:56:00.129Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T11:56:00.129Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T11:56:00.130Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.131Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T11:56:00.134Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T11:56:00.137Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.232Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T11:56:00.277Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.383Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.600Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T11:56:00.660Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 646ms","timestamp":"2025-10-11T11:56:00.660Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T11:56:00.660Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T11:56:00.660Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 647ms","timestamp":"2025-10-11T11:56:00.661Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T11:56:00.662Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:00.910Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:01.211Z"}
{"correlationId":"84b48ebc-6264-498e-b613-0723e2ce6977","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T11:56:01.252Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"84b48ebc-6264-498e-b613-0723e2ce6977","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":401,"timestamp":"2025-10-11T11:56:01.256Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/metrics","query":{},"timestamp":"2025-10-11T11:56:01.318Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":{"cause":{},"params":[],"query":"select count(*) from \"users\""},"level":"error","message":"Failed to load metrics summary","timestamp":"2025-10-11T11:56:01.324Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","duration":8,"level":"info","message":"Response sent","method":"GET","path":"/api/metrics","statusCode":500,"timestamp":"2025-10-11T11:56:01.325Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:01.562Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:01.964Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:02.086Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:02.414Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:02.916Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:03.468Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:04.069Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:04.087Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:04.720Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:05.422Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:06.089Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:06.173Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:06.975Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:07.826Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:08.091Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:08.727Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:09.679Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:10.093Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:10.680Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:11.731Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:12.095Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:12.832Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:13.984Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:14.097Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:15.187Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:16.100Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:16.441Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:17.746Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:18.106Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:19.097Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:20.108Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:20.499Z"}
{"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:21.951Z"}
{"cause":{},"correlationId":"be23bd95-2b41-4847-abc9-987217258fc7","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:22.110Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/health","query":{},"timestamp":"2025-10-11T11:56:22.625Z","userAgent":"curl/8.5.0"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","duration":11,"level":"info","message":"Response sent","method":"GET","path":"/health","statusCode":200,"timestamp":"2025-10-11T11:56:22.637Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:23.453Z"}
{"cause":{},"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:24.113Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:25.004Z"}
{"cause":{},"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:26.115Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:26.605Z"}
{"cause":{},"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:28.118Z"}
{"correlationId":"9cc27ef2-c750-4354-bdfd-071a261bacd0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:28.256Z"}
{"correlationId":"a0160acb-23b8-439a-b2a6-2351e166b4f3","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/health","query":{},"timestamp":"2025-10-11T11:56:29.068Z","userAgent":"curl/8.5.0"}
{"correlationId":"a0160acb-23b8-439a-b2a6-2351e166b4f3","duration":6,"level":"info","message":"Response sent","method":"GET","path":"/health","statusCode":200,"timestamp":"2025-10-11T11:56:29.074Z"}
{"correlationId":"e21e8599-390f-4fd1-93a1-0b060a9a4512","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T11:56:29.451Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"e21e8599-390f-4fd1-93a1-0b060a9a4512","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T11:56:29.452Z"}
{"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T11:56:29.457Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","duration":8,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T11:56:29.465Z"}
{"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:29.956Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.101Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.102Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.103Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.105Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.106Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T11:56:30.108Z"}
{"cause":{},"correlationId":"f428ce44-9445-4284-971d-f3b8a33a7d1a","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:30.121Z"}
{"correlationId":"fd93122f-e939-4281-b469-33b6fc304654","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T11:56:30.957Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"fd93122f-e939-4281-b469-33b6fc304654","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T11:56:30.958Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T11:56:30.963Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T11:56:30.964Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:31.707Z"}
{"cause":{},"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:32.122Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:33.509Z"}
{"cause":{},"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:34.125Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:35.361Z"}
{"cause":{},"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:36.126Z"}
{"correlationId":"f3883c3f-71e5-4fa9-9821-c7655ca9fd47","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:37.263Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-11T11:56:37.277Z","userAgent":"curl/8.5.0"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-11T11:56:37.278Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:38.128Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:39.215Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:40.130Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:41.216Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:42.134Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:43.216Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:44.136Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:45.218Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:46.141Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:47.219Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:48.144Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:49.220Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:50.146Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:51.221Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:52.148Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:53.224Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:54.150Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:55.225Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:56.154Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:57.227Z"}
{"cause":{},"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T11:56:58.160Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T11:56:59.229Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T11:57:00.007Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T11:57:00.009Z"}
{"correlationId":"e2a95487-2aba-4784-b4c5-c15e759e341e","date":"Sat Oct 11 2025 06:57:00 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[1.86,1.7,1.41],"uptime":261141.94},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":445412,"external":6517125,"heapTotal":115748864,"heapUsed":112342920,"rss":254132224},"pid":1811997,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T11:57:00.034Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T12:38:12.255Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T12:38:13.245Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T12:38:13.245Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T12:38:13.245Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T12:38:13.469Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T12:38:13.470Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T12:38:13.470Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T12:38:13.470Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T12:38:13.470Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T12:38:13.485Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T12:38:13.490Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T12:38:13.490Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T12:38:13.492Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T12:38:13.493Z"}
{"level":"warn","message":"Creating default admin account for development","timestamp":"2025-10-11T12:38:13.531Z"}
{"level":"warn","message":"‚ö†Ô∏è DEFAULT ADMIN CREDENTIALS:","timestamp":"2025-10-11T12:38:13.531Z"}
{"level":"warn","message":"   Email: admin@localhost","timestamp":"2025-10-11T12:38:13.531Z"}
{"level":"warn","message":"   Password: admin123456","timestamp":"2025-10-11T12:38:13.532Z"}
{"level":"warn","message":"   CHANGE THESE IN PRODUCTION!","timestamp":"2025-10-11T12:38:13.532Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:13.534Z"}
{"devErr":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to create development admin account","timestamp":"2025-10-11T12:38:13.536Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T12:38:13.537Z"}
{"error":{"cause":{},"params":["admin@localhost","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"‚ùå Failed to apply production fixes","timestamp":"2025-10-11T12:38:13.538Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T12:38:13.540Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T12:38:13.540Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T12:38:13.540Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T12:38:13.542Z"}
{"cause":{},"level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:13.546Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T12:38:13.547Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.551Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.553Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.554Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.556Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.558Z"}
{"cause":{},"level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async QueueMonitor.startMonitoring (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:50:5)\n    at async initializeWorkers (/home/dave/CascadeProjects/TPilot/server/lib/workers/index.ts:33:3)\n    at async startQueue (/home/dave/CascadeProjects/TPilot/server/bootstrap/queue.ts:16:5)\n    at async createApp (/home/dave/CascadeProjects/TPilot/server/app.ts:359:7)\n    at async bootstrap (/home/dave/CascadeProjects/TPilot/server/index.ts:49:24)","timestamp":"2025-10-11T12:38:13.559Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:38:13.560Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T12:38:13.560Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T12:38:13.560Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T12:38:13.579Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T12:38:13.582Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T12:38:13.584Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T12:38:13.586Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T12:38:13.590Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T12:38:13.592Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T12:38:13.593Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T12:38:13.593Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:38:13.594Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:13.594Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T12:38:13.597Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T12:38:13.599Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:13.695Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T12:38:13.756Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:13.846Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:14.069Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T12:38:14.139Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 669ms","timestamp":"2025-10-11T12:38:14.139Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T12:38:14.139Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T12:38:14.140Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 670ms","timestamp":"2025-10-11T12:38:14.140Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T12:38:14.140Z"}
{"correlationId":"d8b330a8-016e-4856-8481-1b6862cc1b19","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T12:38:14.392Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"d8b330a8-016e-4856-8481-1b6862cc1b19","duration":4,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":401,"timestamp":"2025-10-11T12:38:14.397Z"}
{"correlationId":"d8b330a8-016e-4856-8481-1b6862cc1b19","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:14.401Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/metrics","query":{},"timestamp":"2025-10-11T12:38:14.421Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":{"cause":{},"params":[],"query":"select count(*) from \"users\""},"level":"error","message":"Failed to load metrics summary","timestamp":"2025-10-11T12:38:14.430Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","duration":11,"level":"info","message":"Response sent","method":"GET","path":"/api/metrics","statusCode":500,"timestamp":"2025-10-11T12:38:14.432Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:14.702Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:15.052Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:15.453Z"}
{"cause":{},"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:15.547Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:15.904Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:16.405Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:16.956Z"}
{"cause":{},"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:17.549Z"}
{"correlationId":"93e219cd-73cf-4480-988a-e71f0df2d7a0","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:17.557Z"}
{"correlationId":"bab4622b-ec0f-4308-9624-ba50990c7161","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T12:38:17.743Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"bab4622b-ec0f-4308-9624-ba50990c7161","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T12:38:17.745Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T12:38:17.750Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","duration":6,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T12:38:17.757Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:18.208Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:18.908Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:19.552Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:19.660Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:20.460Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:21.311Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:21.553Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:22.212Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:23.163Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:23.555Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:24.164Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:25.215Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:25.558Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:26.315Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:27.466Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:27.559Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:28.667Z"}
{"cause":{},"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:29.562Z"}
{"correlationId":"6408ee3a-a4f6-45ff-afd3-bc2bffc68163","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:29.918Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T12:38:30.848Z","userAgent":"curl/8.5.0"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","duration":6,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":401,"timestamp":"2025-10-11T12:38:30.854Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:31.219Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:31.564Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:32.570Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:33.566Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:33.971Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:35.422Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:35.568Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:36.923Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:37.570Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:38.474Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:39.572Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:40.075Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:41.574Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:41.727Z"}
{"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:43.427Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending","params":["post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.561Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue batch-post-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending","params":["batch-post-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: batch-post-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.563Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue metrics-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending","params":["metrics-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: metrics-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.564Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue ai-promo-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending","params":["ai-promo-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: ai-promo-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.567Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue dunning-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending","params":["dunning-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: dunning-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.568Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Failed to collect metrics for queue community-sync-queue: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending","params":["community-sync-queue","pending"],"query":"select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)","stack":"Error: Failed query: select count(*) from \"queue_jobs\" where (\"queue_jobs\".\"queue_name\" = $1 and \"queue_jobs\".\"status\" = $2)\nparams: community-sync-queue,pending\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:152:18)\n    at async PgQueue.getPendingCount (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:110:22)\n    at async Promise.all (index 0)\n    at async QueueMonitor.collectMetrics (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:85:52)\n    at async Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/lib/queue-monitor.ts:55:9)","timestamp":"2025-10-11T12:38:43.570Z"}
{"cause":{},"correlationId":"919597a2-aba9-4aec-8ac1-f40ad8d82dcc","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:43.576Z"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/signup","query":{},"timestamp":"2025-10-11T12:38:44.926Z","userAgent":"curl/8.5.0"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","errors":{"email":["Invalid email format"],"password":["Must contain uppercase"]},"formErrors":[],"ip":"127.0.0.1","level":"warn","message":"Input validation failed","method":"POST","path":"/api/auth/signup","source":"body","timestamp":"2025-10-11T12:38:44.928Z","userAgent":"curl/8.5.0"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","duration":3,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/signup","statusCode":400,"timestamp":"2025-10-11T12:38:44.929Z"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:45.178Z"}
{"cause":{},"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:45.578Z"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:46.978Z"}
{"cause":{},"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:47.581Z"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:48.829Z"}
{"cause":{},"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:49.584Z"}
{"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:50.730Z"}
{"cause":{},"correlationId":"f253ee96-ee4c-4734-ba6e-ecf66ef441f6","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:51.589Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/signup","query":{},"timestamp":"2025-10-11T12:38:52.186Z","userAgent":"curl/8.5.0"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"‚ö†Ô∏è Auth failure: signup - Failed query: insert into \"users\" (\"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\") values (default, $1, $2, $3, default, default, default, default, default, $4, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default, default) returning \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"stripe_customer_id\", \"stripe_subscription_id\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\"\nparams: admin,$2b$10$qlkN210ZNsEdSGnUeeN9..d0zmCSFuYRU5OpQTUzlBj8UXkDOSz.y,admin@example.com,free","timestamp":"2025-10-11T12:38:52.235Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","duration":50,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/signup","statusCode":500,"timestamp":"2025-10-11T12:38:52.236Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:52.682Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:53.591Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:54.683Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:55.593Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:56.683Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:57.595Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:38:58.684Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:38:59.597Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"Failed query: select \"id\", \"user_id\", \"title\", \"content\", \"image_url\", \"caption\", \"subreddit\", \"scheduled_for\", \"timezone\", \"status\", \"nsfw\", \"spoiler\", \"flair_id\", \"flair_text\", \"reddit_post_id\", \"reddit_post_url\", \"error_message\", \"executed_at\", \"cancelled_at\", \"media_urls\", \"send_replies\", \"created_at\", \"updated_at\" from \"scheduled_posts\" where (\"scheduled_posts\".\"scheduled_for\" <= $1 and \"scheduled_posts\".\"status\" = $2) limit $3\nparams: 2025-10-11T12:39:00.006Z,pending,10","level":"error","message":"‚ùå Failed to process scheduled posts","timestamp":"2025-10-11T12:39:00.008Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:00.685Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:01.599Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:02.686Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:03.602Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:04.686Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:05.605Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:06.687Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:07.607Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:08.687Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:09.609Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:10.688Z"}
{"cause":{},"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","level":"error","message":"Error in queue polling: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed","params":["pending","delayed"],"query":"update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())","stack":"Error: Failed query: update \"queue_jobs\" set \"status\" = $1 where (\"queue_jobs\".\"status\" = $2 and delay_until <= now())\nparams: pending,delayed\n    at NeonPreparedQuery.queryWithCache (/home/dave/CascadeProjects/TPilot/node_modules/src/pg-core/session.ts:73:11)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async NeonPreparedQuery.execute (/home/dave/CascadeProjects/TPilot/node_modules/src/neon-serverless/session.ts:147:11)\n    at async PgQueue.processDelayedJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:152:5)\n    at async PgQueue.pollForJobs (/home/dave/CascadeProjects/TPilot/server/lib/queue-pg.ts:135:7)","timestamp":"2025-10-11T12:39:11.612Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:39:12.689Z"}
{"correlationId":"a4321298-972a-445f-b8d8-3b4b4fb90add","date":"Sat Oct 11 2025 07:39:13 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[3.22,1.64,1.2],"uptime":263675.4},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":477419,"external":6549132,"heapTotal":115224576,"heapUsed":112126304,"rss":255012864},"pid":1815872,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T12:39:13.492Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T12:41:01.051Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T12:41:02.045Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T12:41:02.045Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T12:41:02.046Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T12:41:02.260Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T12:41:02.260Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T12:41:02.260Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T12:41:02.261Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T12:41:02.261Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T12:41:02.279Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T12:41:02.284Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T12:41:02.285Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T12:41:02.286Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T12:41:02.287Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:02.296Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-11T12:41:02.312Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T12:41:02.312Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-11T12:41:02.314Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-11T12:41:02.315Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-11T12:41:02.316Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-11T12:41:02.316Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T12:41:02.318Z"}
{"level":"error","message":"üîß Using PostgreSQL queue backend (Redis not available)","timestamp":"2025-10-11T12:41:02.318Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T12:41:02.318Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T12:41:02.319Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T12:41:02.323Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:41:02.338Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T12:41:02.338Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T12:41:02.339Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T12:41:02.355Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T12:41:02.357Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T12:41:02.360Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T12:41:02.361Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T12:41:02.366Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T12:41:02.368Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T12:41:02.368Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T12:41:02.368Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:41:02.369Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:02.370Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T12:41:02.373Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T12:41:02.376Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:02.471Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T12:41:02.530Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:02.622Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:02.834Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T12:41:02.891Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 631ms","timestamp":"2025-10-11T12:41:02.891Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T12:41:02.891Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T12:41:02.891Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 633ms","timestamp":"2025-10-11T12:41:02.893Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T12:41:02.893Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:03.129Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:03.430Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:03.782Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:04.183Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:04.635Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:05.138Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:05.690Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:06.292Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:06.942Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:07.643Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:08.394Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:09.196Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:10.047Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:10.948Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:11.900Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:12.901Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T12:41:13.389Z","userAgent":"curl/8.5.0"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","duration":60,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":200,"timestamp":"2025-10-11T12:41:13.448Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:13.953Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:15.056Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:16.208Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:17.409Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:18.660Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:19.961Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:21.312Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:22.714Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:24.165Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:25.667Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:27.219Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:28.820Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:30.471Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:32.172Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:33.922Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:35.723Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:37.575Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:39.476Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:41.427Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:43.428Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:45.429Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:47.430Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:49.431Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:51.433Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:53.436Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:55.439Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:57.440Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:41:59.442Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:42:01.445Z"}
{"correlationId":"c028b8ec-12a8-4052-a9be-5dbf8947caee","date":"Sat Oct 11 2025 07:42:02 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[2.25,1.84,1.35],"uptime":263844.19},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":457294,"external":6533758,"heapTotal":115486720,"heapUsed":110540632,"rss":249106432},"pid":1817702,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T12:42:02.291Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T12:46:15.131Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T12:46:16.092Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T12:46:16.092Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T12:46:16.093Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T12:46:16.338Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T12:46:16.339Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T12:46:16.339Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T12:46:16.339Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T12:46:16.339Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T12:46:16.353Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T12:46:16.357Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T12:46:16.358Z"}
{"level":"info","message":"Session store configured with Redis backend","timestamp":"2025-10-11T12:46:16.359Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T12:46:16.360Z"}
{"error":"connect ECONNREFUSED 127.0.0.1:6379","level":"error","message":"Redis session store error","timestamp":"2025-10-11T12:46:16.365Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-11T12:46:16.377Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T12:46:16.378Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-11T12:46:16.380Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-11T12:46:16.381Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-11T12:46:16.382Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T12:48:55.193Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T12:48:56.211Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T12:48:56.212Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T12:48:56.212Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T12:48:56.440Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T12:48:56.440Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T12:48:56.441Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T12:48:56.441Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T12:48:56.441Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T12:48:56.458Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T12:48:56.464Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T12:48:56.464Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-11T12:48:56.466Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T12:48:56.467Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-11T12:48:56.490Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T12:48:56.491Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-11T12:48:56.493Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-11T12:48:56.494Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-11T12:48:56.496Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-11T12:48:56.496Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T12:48:56.498Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-11T12:48:56.498Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T12:48:56.498Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T12:48:56.499Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T12:48:56.504Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:48:56.518Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T12:48:56.518Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T12:48:56.518Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T12:48:56.535Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T12:48:56.538Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T12:48:56.540Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T12:48:56.542Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T12:48:56.546Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T12:48:56.549Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T12:48:56.549Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T12:48:56.549Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:48:56.550Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T12:48:56.552Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T12:48:56.555Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T12:48:56.717Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T12:48:57.136Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 696ms","timestamp":"2025-10-11T12:48:57.136Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T12:48:57.136Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T12:48:57.136Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 698ms","timestamp":"2025-10-11T12:48:57.138Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T12:48:57.138Z"}
{"correlationId":"6dcd9932-13b5-43fe-9c26-567f505ed7b7","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T12:48:57.388Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"6dcd9932-13b5-43fe-9c26-567f505ed7b7","duration":4,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":401,"timestamp":"2025-10-11T12:48:57.392Z"}
{"correlationId":"34dc3811-10f5-4d86-a047-569f0d7b8d62","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/metrics","query":{},"timestamp":"2025-10-11T12:48:57.438Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"34dc3811-10f5-4d86-a047-569f0d7b8d62","duration":14,"level":"info","message":"Response sent","method":"GET","path":"/api/metrics","statusCode":200,"timestamp":"2025-10-11T12:48:57.452Z"}
{"correlationId":"00f166d5-c3b8-4863-9867-8d0994369e95","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T12:49:17.809Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"00f166d5-c3b8-4863-9867-8d0994369e95","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T12:49:17.810Z"}
{"correlationId":"c6b79eff-e767-41af-9fd0-c9e1d8340acc","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T12:49:17.815Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"c6b79eff-e767-41af-9fd0-c9e1d8340acc","duration":8,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T12:49:17.823Z"}
{"correlationId":"d904085f-a7d0-4c81-94ac-af370efb3e37","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-11T12:49:19.901Z","userAgent":"curl/8.5.0"}
{"correlationId":"d904085f-a7d0-4c81-94ac-af370efb3e37","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-11T12:49:19.903Z"}
{"correlationId":"f5ccfe7a-2e6f-4a94-a348-83f850077ecb","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T12:49:25.373Z","userAgent":"curl/8.5.0"}
{"correlationId":"f5ccfe7a-2e6f-4a94-a348-83f850077ecb","duration":56,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":200,"timestamp":"2025-10-11T12:49:25.428Z"}
{"correlationId":"24c9428e-f252-41e8-8dc1-9ad4d0a03429","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T12:49:27.317Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"24c9428e-f252-41e8-8dc1-9ad4d0a03429","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T12:49:27.318Z"}
{"correlationId":"ce55ecbc-b081-4e42-89c8-8289468924f6","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T12:49:27.323Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"ce55ecbc-b081-4e42-89c8-8289468924f6","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T12:49:27.324Z"}
{"correlationId":"2e54859c-f68a-4239-b54a-03ccdff5cf76","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T12:49:40.061Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"2e54859c-f68a-4239-b54a-03ccdff5cf76","duration":49,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":200,"timestamp":"2025-10-11T12:49:40.111Z"}
{"correlationId":"2e7ad6af-a546-4e2d-812f-aa880a66a96c","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T12:49:40.127Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"2e7ad6af-a546-4e2d-812f-aa880a66a96c","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T12:49:40.128Z"}
{"correlationId":"407973c7-65df-45dd-9cbf-d94c6050b8a5","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T12:49:40.194Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"407973c7-65df-45dd-9cbf-d94c6050b8a5","duration":2,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T12:49:40.195Z"}
{"correlationId":"ea50174b-aeda-43de-b302-cacccc071236","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T12:49:40.340Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"ea50174b-aeda-43de-b302-cacccc071236","duration":9,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":200,"timestamp":"2025-10-11T12:49:40.349Z"}
{"correlationId":"b87a05a7-1f24-4454-adf2-7adfcc5369b1","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/stats","query":{},"timestamp":"2025-10-11T12:49:40.584Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"7f736e0f-7cc4-4601-b779-05b4c4a819e5","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/activity","query":{},"timestamp":"2025-10-11T12:49:40.589Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"3b2ccdce-2fa6-42d2-8643-75234b667e68","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/my-code","query":{},"timestamp":"2025-10-11T12:49:40.601Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"3b2ccdce-2fa6-42d2-8643-75234b667e68","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-11T12:49:40.603Z"}
{"correlationId":"3b2ccdce-2fa6-42d2-8643-75234b667e68","date":"Sat Oct 11 2025 07:49:56 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: require is not defined\nReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","os":{"loadavg":[2.31,2.11,1.63],"uptime":264318.37},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":470421,"external":6546885,"heapTotal":116273152,"heapUsed":112368616,"rss":262270976},"pid":1820243,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"ReferenceError: require is not defined\n    at collectHealthMetrics (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:134:28)\n    at Timeout._onTimeout (/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts:157:27)\n    at listOnTimeout (node:internal/timers:581:17)\n    at process.processTimers (node:internal/timers:519:7)","timestamp":"2025-10-11T12:49:56.465Z","trace":[{"column":28,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"collectHealthMetrics","line":134,"method":null,"native":false},{"column":27,"file":"/home/dave/CascadeProjects/TPilot/server/middleware/observability.ts","function":"Timeout._onTimeout","line":157,"method":"_onTimeout","native":false},{"column":17,"file":"node:internal/timers","function":"listOnTimeout","line":581,"method":null,"native":false},{"column":7,"file":"node:internal/timers","function":"process.processTimers","line":519,"method":"processTimers","native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T12:55:22.314Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T12:55:23.267Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T12:55:23.268Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T12:55:23.268Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T12:55:23.500Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T12:55:23.501Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T12:55:23.501Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T12:55:23.501Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T12:55:23.501Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T12:55:23.518Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T12:55:23.530Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T12:55:23.530Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-11T12:55:23.532Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T12:55:23.533Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-11T12:55:23.552Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T12:55:23.552Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-11T12:55:23.555Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-11T12:55:23.556Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-11T12:55:23.557Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-11T12:55:23.557Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T12:55:23.559Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-11T12:55:23.559Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-11T12:55:23.559Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T12:55:23.559Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T12:55:23.560Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T12:55:23.565Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:55:23.577Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T12:55:23.578Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T12:55:23.578Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T12:55:23.594Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T12:55:23.596Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T12:55:23.598Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T12:55:23.600Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T12:55:23.604Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T12:55:23.607Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T12:55:23.607Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T12:55:23.607Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:55:23.607Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T12:55:23.610Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T12:55:23.612Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T12:55:23.766Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T12:55:24.152Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 652ms","timestamp":"2025-10-11T12:55:24.153Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T12:55:24.153Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T12:55:24.153Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 653ms","timestamp":"2025-10-11T12:55:24.154Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T12:55:24.154Z"}
{"correlationId":"3ac2b899-f163-4fbc-a691-aa017c4ff8c6","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T12:55:24.425Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"3ac2b899-f163-4fbc-a691-aa017c4ff8c6","duration":8,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":200,"timestamp":"2025-10-11T12:55:24.432Z"}
{"correlationId":"967e73be-574f-4d52-9934-ea4d540b355d","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/stats","query":{},"timestamp":"2025-10-11T12:55:24.784Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"7e2346e9-d47f-4c2c-89a5-838682483e76","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/activity","query":{},"timestamp":"2025-10-11T12:55:24.789Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"9082ed28-dfe6-4831-af84-20866ba70b10","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/my-code","query":{},"timestamp":"2025-10-11T12:55:24.804Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"9082ed28-dfe6-4831-af84-20866ba70b10","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-11T12:55:24.806Z"}
{"correlationId":"525e9602-ac28-400e-9f02-bc8ce8f2ae3a","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T12:55:31.156Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"525e9602-ac28-400e-9f02-bc8ce8f2ae3a","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T12:55:31.158Z"}
{"correlationId":"22ced01a-c017-4d0f-bd62-188c6e38b198","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T12:55:31.162Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"22ced01a-c017-4d0f-bd62-188c6e38b198","duration":6,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T12:55:31.169Z"}
{"correlationId":"22ced01a-c017-4d0f-bd62-188c6e38b198","date":"Sat Oct 11 2025 07:55:34 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: Reached the max retries per request limit (which is 20). Refer to \"maxRetriesPerRequest\" option for details.\nMaxRetriesPerRequestError: Reached the max retries per request limit (which is 20). Refer to \"maxRetriesPerRequest\" option for details.\n    at Socket.<anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/ioredis/built/redis/event_handler.js:182:37)\n    at Object.onceWrapper (node:events:639:26)\n    at Socket.emit (node:events:524:28)\n    at TCP.<anonymous> (node:net:343:12)","os":{"loadavg":[2.12,2.21,1.83],"uptime":264656.06},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":585640,"external":6663544,"heapTotal":166162432,"heapUsed":132057992,"rss":415952896},"pid":1824335,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"MaxRetriesPerRequestError: Reached the max retries per request limit (which is 20). Refer to \"maxRetriesPerRequest\" option for details.\n    at Socket.<anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/ioredis/built/redis/event_handler.js:182:37)\n    at Object.onceWrapper (node:events:639:26)\n    at Socket.emit (node:events:524:28)\n    at TCP.<anonymous> (node:net:343:12)","timestamp":"2025-10-11T12:55:34.151Z","trace":[{"column":37,"file":"/home/dave/CascadeProjects/TPilot/node_modules/ioredis/built/redis/event_handler.js","function":null,"line":182,"method":null,"native":false},{"column":26,"file":"node:events","function":"Object.onceWrapper","line":639,"method":"onceWrapper","native":false},{"column":28,"file":"node:events","function":"Socket.emit","line":524,"method":"emit","native":false},{"column":12,"file":"node:net","function":null,"line":343,"method":null,"native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T12:56:31.549Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T12:56:32.581Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T12:56:32.581Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T12:56:32.581Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T12:56:32.831Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T12:56:32.832Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T12:56:32.832Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T12:56:32.832Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T12:56:32.832Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T12:56:32.848Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T12:56:32.853Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T12:56:32.853Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-11T12:56:32.855Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T12:56:32.856Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-11T12:56:32.877Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T12:56:32.877Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-11T12:56:32.879Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-11T12:56:32.881Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-11T12:56:32.882Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-11T12:56:32.883Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T12:56:32.884Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-11T12:56:32.884Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-11T12:56:32.885Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T12:56:32.885Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T12:56:32.886Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T12:56:32.889Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:56:32.906Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T12:56:32.906Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T12:56:32.906Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T12:56:32.935Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T12:56:32.938Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T12:56:32.942Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T12:56:32.945Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T12:56:32.951Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T12:56:32.955Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T12:56:32.955Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T12:56:32.955Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T12:56:32.956Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T12:56:32.958Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T12:56:32.960Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T12:56:33.108Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T12:56:33.515Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 683ms","timestamp":"2025-10-11T12:56:33.515Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T12:56:33.515Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T12:56:33.515Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 685ms","timestamp":"2025-10-11T12:56:33.517Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T12:56:33.517Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T13:00:19.731Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T13:00:20.639Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T13:00:20.639Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T13:00:20.639Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T13:00:20.880Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T13:00:20.880Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T13:00:20.880Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T13:00:20.881Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T13:00:20.881Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T13:00:20.894Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T13:00:20.899Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T13:00:20.899Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-11T13:00:20.901Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T13:00:20.902Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-11T13:00:20.929Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T13:00:20.930Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-11T13:00:20.933Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-11T13:00:20.935Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-11T13:00:20.937Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-11T13:00:20.938Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T13:00:20.940Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-11T13:00:20.940Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-11T13:00:20.941Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T13:00:20.941Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T13:00:20.942Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T13:00:20.950Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T13:00:20.969Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T13:00:20.969Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T13:00:20.969Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T13:00:21.003Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T13:00:21.005Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T13:00:21.007Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T13:00:21.009Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T13:00:21.014Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T13:00:21.016Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T13:00:21.017Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T13:00:21.017Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T13:00:21.017Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T13:00:21.020Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T13:00:21.022Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T13:00:21.171Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T13:00:21.546Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 666ms","timestamp":"2025-10-11T13:00:21.546Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T13:00:21.546Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T13:00:21.546Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 667ms","timestamp":"2025-10-11T13:00:21.547Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T13:00:21.547Z"}
{"correlationId":"ec428179-d6e9-4bea-aa97-4021abfbdd95","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-11T13:00:32.199Z","userAgent":"curl/8.5.0"}
{"correlationId":"ec428179-d6e9-4bea-aa97-4021abfbdd95","duration":6,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-11T13:00:32.205Z"}
{"correlationId":"2ab87b19-00d6-494c-865f-ee63b8dc9332","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T13:00:46.204Z","userAgent":"curl/8.5.0"}
{"correlationId":"2ab87b19-00d6-494c-865f-ee63b8dc9332","duration":62,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":200,"timestamp":"2025-10-11T13:00:46.266Z"}
{"correlationId":"02799c82-9c96-40e5-954a-1e21b4b12b53","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/analytics","query":{},"timestamp":"2025-10-11T13:05:11.528Z","userAgent":"curl/8.5.0"}
{"correlationId":"02799c82-9c96-40e5-954a-1e21b4b12b53","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":401,"timestamp":"2025-10-11T13:05:11.531Z"}
{"correlationId":"575bfa84-9b24-44fe-b1f1-ebc644c656e4","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T13:05:30.226Z","userAgent":"curl/8.5.0"}
{"correlationId":"575bfa84-9b24-44fe-b1f1-ebc644c656e4","duration":49,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":200,"timestamp":"2025-10-11T13:05:30.275Z"}
{"correlationId":"24aa06a0-3f79-4ae3-95e6-bcb0da8ad582","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/analytics","query":{},"timestamp":"2025-10-11T13:05:30.285Z","userAgent":"curl/8.5.0"}
{"correlationId":"24aa06a0-3f79-4ae3-95e6-bcb0da8ad582","date":"Sat Oct 11 2025 08:05:58 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: Reached the max retries per request limit (which is 20). Refer to \"maxRetriesPerRequest\" option for details.\nMaxRetriesPerRequestError: Reached the max retries per request limit (which is 20). Refer to \"maxRetriesPerRequest\" option for details.\n    at Socket.<anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/ioredis/built/redis/event_handler.js:182:37)\n    at Object.onceWrapper (node:events:639:26)\n    at Socket.emit (node:events:524:28)\n    at TCP.<anonymous> (node:net:343:12)","os":{"loadavg":[1.45,2.12,2.12],"uptime":265280.21},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/server/index.ts"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":452630,"external":6529126,"heapTotal":116011008,"heapUsed":112592856,"rss":252444672},"pid":1826486,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"MaxRetriesPerRequestError: Reached the max retries per request limit (which is 20). Refer to \"maxRetriesPerRequest\" option for details.\n    at Socket.<anonymous> (/home/dave/CascadeProjects/TPilot/node_modules/ioredis/built/redis/event_handler.js:182:37)\n    at Object.onceWrapper (node:events:639:26)\n    at Socket.emit (node:events:524:28)\n    at TCP.<anonymous> (node:net:343:12)","timestamp":"2025-10-11T13:05:58.306Z","trace":[{"column":37,"file":"/home/dave/CascadeProjects/TPilot/node_modules/ioredis/built/redis/event_handler.js","function":null,"line":182,"method":null,"native":false},{"column":26,"file":"node:events","function":"Object.onceWrapper","line":639,"method":"onceWrapper","native":false},{"column":28,"file":"node:events","function":"Socket.emit","line":524,"method":"emit","native":false},{"column":12,"file":"node:net","function":null,"line":343,"method":null,"native":false}]}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T13:09:28.262Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T13:09:29.252Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T13:09:29.252Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T13:09:29.252Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T13:09:29.486Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T13:09:29.486Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T13:09:29.487Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T13:09:29.487Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T13:09:29.487Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T13:09:29.500Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T13:09:29.509Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T13:09:29.510Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-11T13:09:29.511Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T13:09:29.512Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-11T13:09:29.533Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T13:09:29.533Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-11T13:09:29.535Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-11T13:09:29.536Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-11T13:09:29.538Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-11T13:09:29.538Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T13:09:29.540Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-11T13:09:29.540Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-11T13:09:29.541Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T13:09:29.541Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T13:09:29.542Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T13:09:29.545Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T13:09:29.559Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T13:09:29.559Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T13:09:29.559Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T13:09:29.577Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T13:09:29.580Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T13:09:29.582Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T13:09:29.584Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T13:09:29.588Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T13:09:29.591Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T13:09:29.591Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T13:09:29.591Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T13:09:29.591Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T13:09:29.594Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T13:09:29.596Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T13:09:29.742Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T13:09:30.127Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 641ms","timestamp":"2025-10-11T13:09:30.127Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T13:09:30.127Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T13:09:30.128Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 642ms","timestamp":"2025-10-11T13:09:30.128Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T13:09:30.129Z"}
{"correlationId":"a8b0de39-47a8-4542-ad50-c81efa9acf8b","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T13:09:30.378Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T13:12:02.700Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T13:12:03.644Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T13:12:03.644Z"}
{"level":"info","message":"[OpenRouter] Default model: opengvlab/internvl3-78b","timestamp":"2025-10-11T13:12:03.645Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T13:12:03.891Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T13:12:03.892Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T13:12:03.892Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T13:12:03.892Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T13:12:03.892Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T13:12:03.905Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T13:12:03.912Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T13:12:03.912Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-11T13:12:03.914Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T13:12:03.915Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-11T13:12:03.947Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T13:12:03.948Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-11T13:12:03.951Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-11T13:12:03.952Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-11T13:12:03.954Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-11T13:12:03.955Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T13:12:03.957Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-11T13:12:03.958Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-11T13:12:03.958Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T13:12:03.958Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T13:12:03.959Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T13:12:03.963Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T13:12:03.979Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T13:12:03.979Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T13:12:03.979Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T13:12:04.006Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T13:12:04.010Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T13:12:04.014Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T13:12:04.017Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T13:12:04.024Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T13:12:04.028Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T13:12:04.028Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T13:12:04.028Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T13:12:04.029Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T13:12:04.032Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T13:12:04.035Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T13:12:04.188Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T13:12:04.577Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 685ms","timestamp":"2025-10-11T13:12:04.577Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-11T13:12:04.577Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-11T13:12:04.577Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 686ms","timestamp":"2025-10-11T13:12:04.578Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-11T13:12:04.578Z"}
{"correlationId":"97adf41a-e422-4410-8ca8-28dff5a2f35f","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-11T13:12:17.272Z","userAgent":"curl/8.5.0"}
{"correlationId":"97adf41a-e422-4410-8ca8-28dff5a2f35f","duration":5,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-11T13:12:17.278Z"}
{"correlationId":"677665b5-cb2f-47ca-898d-d241aad548a2","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-11T13:12:32.682Z","userAgent":"curl/8.5.0"}
{"correlationId":"677665b5-cb2f-47ca-898d-d241aad548a2","duration":58,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":200,"timestamp":"2025-10-11T13:12:32.741Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-11T13:14:34.959Z"}
{"correlationId":"9c1efbb7-ca01-4ec5-978e-294f4013a229","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T13:14:35.495Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"9c1efbb7-ca01-4ec5-978e-294f4013a229","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T13:14:35.497Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-11T13:14:35.961Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-11T13:14:35.962Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-2-fast","timestamp":"2025-10-11T13:14:35.962Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-11T13:14:36.207Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-11T13:14:36.207Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-11T13:14:36.208Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-11T13:14:36.208Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-11T13:14:36.208Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-11T13:14:36.216Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-11T13:14:36.222Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-11T13:14:36.222Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-11T13:14:36.224Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-11T13:14:36.225Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-11T13:14:36.245Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-11T13:14:36.245Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-11T13:14:36.247Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-11T13:14:36.248Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-11T13:14:36.250Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-11T13:14:36.250Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-11T13:14:36.252Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-11T13:14:36.252Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-11T13:14:36.252Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-11T13:14:36.252Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-11T13:14:36.253Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-11T13:14:36.256Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T13:14:36.269Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-11T13:14:36.269Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-11T13:14:36.269Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-11T13:14:36.285Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-11T13:14:36.287Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-11T13:14:36.289Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-11T13:14:36.291Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-11T13:14:36.295Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-11T13:14:36.297Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-11T13:14:36.297Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-11T13:14:36.298Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-11T13:14:36.298Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-11T13:14:36.301Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-11T13:14:36.303Z"}
{"correlationId":"b4a7e059-8298-4719-99de-059438f4c78a","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T13:14:36.311Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"f18f467a-bd1b-43d6-bf69-84be7e2c3940","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/metrics","query":{},"timestamp":"2025-10-11T13:14:36.314Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"0d09a38c-6dff-453f-bb6f-7732aeb7ee7e","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:14:36.318Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"0d09a38c-6dff-453f-bb6f-7732aeb7ee7e","duration":2,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:14:36.320Z"}
{"correlationId":"b4a7e059-8298-4719-99de-059438f4c78a","duration":11,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":200,"timestamp":"2025-10-11T13:14:36.322Z"}
{"correlationId":"f18f467a-bd1b-43d6-bf69-84be7e2c3940","duration":16,"level":"info","message":"Response sent","method":"GET","path":"/api/metrics","statusCode":200,"timestamp":"2025-10-11T13:14:36.331Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-11T13:14:36.454Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-11T13:14:36.829Z"}
{"correlationId":"8d994051-6b40-44a3-a593-fb611571fe32","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T13:14:36.914Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"8d994051-6b40-44a3-a593-fb611571fe32","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T13:14:36.915Z"}
{"correlationId":"bec3e918-9e6e-4d24-8035-aa8baeed428c","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:14:36.919Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"bec3e918-9e6e-4d24-8035-aa8baeed428c","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:14:36.920Z"}
{"correlationId":"30f15027-d2c2-43b3-b42f-2aa73524135a","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T13:14:36.949Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"30f15027-d2c2-43b3-b42f-2aa73524135a","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":304,"timestamp":"2025-10-11T13:14:36.952Z"}
{"correlationId":"857369e3-ca30-4619-9acc-de84bd29ca3d","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/stats","query":{},"timestamp":"2025-10-11T13:14:37.276Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"fd11914c-dcdb-4ec1-afea-f9111db7e5af","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/activity","query":{},"timestamp":"2025-10-11T13:14:37.281Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"fd11914c-dcdb-4ec1-afea-f9111db7e5af","isAdmin":true,"level":"info","mediaCount":0,"message":"Dashboard activity retrieved for user 1","timestamp":"2025-10-11T13:14:37.292Z","userId":1}
{"correlationId":"fd11914c-dcdb-4ec1-afea-f9111db7e5af","duration":12,"level":"info","message":"Response sent","method":"GET","path":"/activity","statusCode":200,"timestamp":"2025-10-11T13:14:37.293Z"}
{"correlationId":"fd11914c-dcdb-4ec1-afea-f9111db7e5af","isAdmin":true,"level":"info","message":"Dashboard stats retrieved for user 1","stats":{"engagementRate":0,"estimatedTaxSavings":0,"postsToday":0,"takedownsFound":0},"timestamp":"2025-10-11T13:14:37.295Z","userId":1}
{"correlationId":"857369e3-ca30-4619-9acc-de84bd29ca3d","duration":20,"level":"info","message":"Response sent","method":"GET","path":"/stats","statusCode":200,"timestamp":"2025-10-11T13:14:37.296Z"}
{"correlationId":"a796e60d-1726-4bc7-be74-8c3746bb1452","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/my-code","query":{},"timestamp":"2025-10-11T13:14:37.298Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"a796e60d-1726-4bc7-be74-8c3746bb1452","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-11T13:14:37.301Z"}
{"correlationId":"f5b0826a-b9c4-4331-aa1e-d87c473f3a8c","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/stats","query":{},"timestamp":"2025-10-11T13:14:37.958Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"2d65cb78-70f3-4480-ba6e-85cc8e6091a0","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/activity","query":{},"timestamp":"2025-10-11T13:14:37.962Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"7314fbfa-1fbe-408f-bd8d-808aa8ff7dd5","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/my-code","query":{},"timestamp":"2025-10-11T13:14:37.966Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"7314fbfa-1fbe-408f-bd8d-808aa8ff7dd5","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-11T13:14:37.967Z"}
{"correlationId":"7314fbfa-1fbe-408f-bd8d-808aa8ff7dd5","isAdmin":true,"level":"info","mediaCount":0,"message":"Dashboard activity retrieved for user 1","timestamp":"2025-10-11T13:14:37.969Z","userId":1}
{"correlationId":"2d65cb78-70f3-4480-ba6e-85cc8e6091a0","duration":8,"level":"info","message":"Response sent","method":"GET","path":"/activity","statusCode":304,"timestamp":"2025-10-11T13:14:37.970Z"}
{"correlationId":"7314fbfa-1fbe-408f-bd8d-808aa8ff7dd5","isAdmin":true,"level":"info","message":"Dashboard stats retrieved for user 1","stats":{"engagementRate":0,"estimatedTaxSavings":0,"postsToday":0,"takedownsFound":0},"timestamp":"2025-10-11T13:14:37.971Z","userId":1}
{"correlationId":"f5b0826a-b9c4-4331-aa1e-d87c473f3a8c","duration":13,"level":"info","message":"Response sent","method":"GET","path":"/stats","statusCode":304,"timestamp":"2025-10-11T13:14:37.971Z"}
{"correlationId":"60c4318a-c365-4b43-9526-fe59f6cff8aa","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:15:06.576Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"60c4318a-c365-4b43-9526-fe59f6cff8aa","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:15:06.577Z"}
{"correlationId":"d701c3e4-54db-45f9-b672-169832cc1d88","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T13:15:07.042Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"d701c3e4-54db-45f9-b672-169832cc1d88","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T13:15:07.043Z"}
{"correlationId":"bb39b201-5a25-41f2-b6da-ad90047ab370","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:15:07.047Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"bb39b201-5a25-41f2-b6da-ad90047ab370","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:15:07.048Z"}
{"correlationId":"494b42a1-ac65-4a2e-acf5-435f85f7670d","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:17:13.764Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"494b42a1-ac65-4a2e-acf5-435f85f7670d","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:17:13.765Z"}
{"correlationId":"c6410b51-c3af-447c-8380-7a747ff950ae","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:17:13.958Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"c6410b51-c3af-447c-8380-7a747ff950ae","duration":2,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:17:13.960Z"}
{"correlationId":"69e68c66-0eab-4831-8603-7e742f6071b2","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-11T13:17:14.472Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"69e68c66-0eab-4831-8603-7e742f6071b2","duration":4,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":304,"timestamp":"2025-10-11T13:17:14.477Z"}
{"correlationId":"20993bf5-659c-44fc-9e5e-9a661f735631","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/stats","query":{},"timestamp":"2025-10-11T13:17:14.712Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"3d7d02c0-fd0a-43bc-8811-cba1ea30db4f","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/users","query":{},"timestamp":"2025-10-11T13:17:14.715Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"d85fed7f-6a28-4c24-bece-95e0ea228ddb","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/providers","query":{},"timestamp":"2025-10-11T13:17:14.718Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"d85fed7f-6a28-4c24-bece-95e0ea228ddb","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/providers","statusCode":200,"timestamp":"2025-10-11T13:17:14.719Z"}
{"correlationId":"4c914d6b-0604-4472-8f50-e531ad5e17e1","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/system-health","query":{},"timestamp":"2025-10-11T13:17:14.722Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"4c914d6b-0604-4472-8f50-e531ad5e17e1","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/admin/system-health","statusCode":200,"timestamp":"2025-10-11T13:17:14.724Z"}
{"correlationId":"415f4d64-15a5-4b19-806f-2158b5d3d035","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/analytics","query":{},"timestamp":"2025-10-11T13:17:14.725Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"426645fe-d74c-4401-a125-e297bcd288af","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/completeness","query":{},"timestamp":"2025-10-11T13:17:14.729Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"426645fe-d74c-4401-a125-e297bcd288af","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/admin/completeness","statusCode":200,"timestamp":"2025-10-11T13:17:14.731Z"}
{"correlationId":"20993bf5-659c-44fc-9e5e-9a661f735631","duration":21,"level":"info","message":"Response sent","method":"GET","path":"/api/admin/stats","statusCode":200,"timestamp":"2025-10-11T13:17:14.732Z"}
{"correlationId":"3d7d02c0-fd0a-43bc-8811-cba1ea30db4f","duration":25,"level":"info","message":"Response sent","method":"GET","path":"/api/admin/users","statusCode":200,"timestamp":"2025-10-11T13:17:14.739Z"}
{"correlationId":"415f4d64-15a5-4b19-806f-2158b5d3d035","duration":17,"level":"info","message":"Response sent","method":"GET","path":"/api/admin/analytics","statusCode":200,"timestamp":"2025-10-11T13:17:14.742Z"}
{"correlationId":"83f9b046-8818-4d1b-bfd1-b71fd8e711cf","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-11T13:17:33.501Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"83f9b046-8818-4d1b-bfd1-b71fd8e711cf","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-11T13:17:33.502Z"}
{"correlationId":"6c5ca392-f44c-492d-b897-498e43f04fb7","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:17:33.506Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"6c5ca392-f44c-492d-b897-498e43f04fb7","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:17:33.507Z"}
{"correlationId":"de920953-e126-4ed8-99fe-e1abca051613","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/communities","query":{},"timestamp":"2025-10-11T13:17:37.892Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"de920953-e126-4ed8-99fe-e1abca051613","duration":86,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":200,"timestamp":"2025-10-11T13:17:37.978Z"}
{"correlationId":"dfff1a46-68f5-46fd-907b-200be68d0111","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:17:44.459Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"dfff1a46-68f5-46fd-907b-200be68d0111","duration":2,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:17:44.460Z"}
{"correlationId":"a7717fc3-f3ad-4f99-8cd3-f72993903d65","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/compliance/dashboard","query":{},"timestamp":"2025-10-11T13:17:55.945Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"a7717fc3-f3ad-4f99-8cd3-f72993903d65","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-11T13:17:55.946Z"}
{"correlationId":"e773e7bd-d0d0-4fdf-bbfc-49e129a1deed","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/compliance/dashboard","query":{},"timestamp":"2025-10-11T13:17:59.431Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"e773e7bd-d0d0-4fdf-bbfc-49e129a1deed","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-11T13:17:59.432Z"}
{"correlationId":"85a72bef-98e6-4005-b37a-27fe4bbcdd26","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:18:01.401Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"85a72bef-98e6-4005-b37a-27fe4bbcdd26","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:18:01.402Z"}
{"correlationId":"222b34c6-6aca-409a-a259-a79b50a706ff","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:18:14.502Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"222b34c6-6aca-409a-a259-a79b50a706ff","duration":2,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:18:14.504Z"}
{"correlationId":"b6c2736f-13ce-4eec-a23a-0e5cbaf23280","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/reddit/accounts","query":{},"timestamp":"2025-10-11T13:18:15.588Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"ca121086-b960-4695-baf5-e4f8d9d55e85","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/reddit/communities","query":{},"timestamp":"2025-10-11T13:18:15.591Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"54dbd6d9-965d-4208-80bb-5ae02e5ed176","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/media","query":{},"timestamp":"2025-10-11T13:18:15.593Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"b6c2736f-13ce-4eec-a23a-0e5cbaf23280","duration":8,"level":"info","message":"Response sent","method":"GET","path":"/api/reddit/accounts","statusCode":200,"timestamp":"2025-10-11T13:18:15.597Z"}
{"correlationId":"54dbd6d9-965d-4208-80bb-5ae02e5ed176","duration":17,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":200,"timestamp":"2025-10-11T13:18:15.610Z"}
{"correlationId":"ca121086-b960-4695-baf5-e4f8d9d55e85","duration":29,"level":"info","message":"Response sent","method":"GET","path":"/api/reddit/communities","statusCode":200,"timestamp":"2025-10-11T13:18:15.620Z"}
{"correlationId":"80d417b3-314f-43dc-95b3-ad5ec8a37c92","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/reddit/connect","query":{"intent":"posting","queue":"reddit-posting"},"timestamp":"2025-10-11T13:18:19.572Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"80d417b3-314f-43dc-95b3-ad5ec8a37c92","intent":"posting","level":"info","message":"Reddit OAuth initiated","queue":"reddit-posting","requestIP":"127.0.0.1","statePreview":"posting:...","timestamp":"2025-10-11T13:18:19.574Z","userId":1}
{"correlationId":"80d417b3-314f-43dc-95b3-ad5ec8a37c92","level":"error","message":"Reddit OAuth redirect URI (auth):","timestamp":"2025-10-11T13:18:19.575Z"}
{"correlationId":"80d417b3-314f-43dc-95b3-ad5ec8a37c92","duration":4,"level":"info","message":"Response sent","method":"GET","path":"/api/reddit/connect","statusCode":200,"timestamp":"2025-10-11T13:18:19.575Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-11T13:18:19.902Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","duration":3,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-11T13:18:19.905Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-11T14:00:00.016Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-11T15:00:00.016Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-11T16:00:00.017Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-11T17:00:00.011Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-11T18:00:00.014Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-11T19:00:00.016Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-11T20:00:00.017Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-11T21:00:00.020Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-11T22:00:00.019Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-11T23:00:00.046Z"}
{"correlationId":"29fc2c66-191b-41b9-b387-944360ea9da6","level":"info","message":"üìä Updating analytics metrics","timestamp":"2025-10-12T00:00:00.011Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-12T00:11:00.774Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-12T00:11:01.660Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-12T00:11:01.660Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-12T00:11:01.660Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-12T00:11:01.891Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-12T00:11:01.892Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-12T00:11:01.892Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-12T00:11:01.892Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-12T00:11:01.892Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-12T00:11:01.904Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-12T00:11:01.908Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-12T00:11:01.908Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-12T00:11:01.910Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-12T00:11:01.911Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-12T00:11:01.934Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-12T00:11:01.935Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-12T00:11:01.937Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-12T00:11:01.938Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-12T00:11:01.939Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-12T00:11:01.939Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-12T00:11:01.941Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-12T00:11:01.941Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-12T00:11:01.942Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-12T00:11:01.942Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-12T00:11:01.943Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-12T00:11:01.946Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-12T00:11:01.959Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-12T00:11:01.959Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-12T00:11:01.959Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-12T00:11:01.976Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-12T00:11:01.978Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-12T00:11:01.981Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-12T00:11:01.982Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-12T00:11:01.987Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-12T00:11:01.990Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-12T00:11:01.990Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-12T00:11:01.990Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-12T00:11:01.991Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-12T00:11:01.993Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-12T00:11:01.995Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-12T00:11:02.147Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-12T00:11:02.515Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-12T00:11:13.218Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-12T00:11:14.235Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-12T00:11:14.236Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-12T00:11:14.236Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-12T00:11:14.498Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-12T00:11:14.498Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-12T00:11:14.499Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-12T00:11:14.499Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-12T00:11:14.499Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-12T00:11:14.509Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-12T00:11:14.515Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-12T00:11:14.515Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-12T00:11:14.517Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-12T00:11:14.518Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-12T00:11:14.548Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-12T00:11:14.548Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-12T00:11:14.551Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-12T00:11:14.552Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-12T00:11:14.554Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-12T00:11:14.554Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-12T00:11:14.557Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-12T00:11:14.557Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-12T00:11:14.557Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-12T00:11:14.558Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-12T00:11:14.559Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-12T00:11:14.563Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-12T00:11:14.578Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-12T00:11:14.578Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-12T00:11:14.578Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-12T00:11:14.596Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-12T00:11:14.599Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-12T00:11:14.601Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-12T00:11:14.603Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-12T00:11:14.608Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-12T00:11:14.610Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-12T00:11:14.610Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-12T00:11:14.611Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-12T00:11:14.611Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-12T00:11:14.614Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-12T00:11:14.616Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-12T00:11:14.766Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-12T00:11:15.178Z"}
{"correlationId":"a503c26c-d4e7-4c8f-be92-3ee5211fcda8","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-12T00:11:15.444Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"a503c26c-d4e7-4c8f-be92-3ee5211fcda8","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":401,"timestamp":"2025-10-12T00:11:15.445Z"}
{"correlationId":"3786b560-b15f-492e-b5f5-c47f7c1224d5","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/metrics","query":{},"timestamp":"2025-10-12T00:11:15.470Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"3786b560-b15f-492e-b5f5-c47f7c1224d5","duration":9,"level":"info","message":"Response sent","method":"GET","path":"/api/metrics","statusCode":200,"timestamp":"2025-10-12T00:11:15.479Z"}
{"correlationId":"738faa75-36c2-466d-96fc-01abd9f93cbe","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-12T00:11:24.482Z","userAgent":"curl/8.5.0"}
{"correlationId":"738faa75-36c2-466d-96fc-01abd9f93cbe","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-12T00:11:24.483Z"}
{"correlationId":"97dd5db2-d899-4a34-b491-b146ab992007","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-12T00:11:37.356Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"97dd5db2-d899-4a34-b491-b146ab992007","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-12T00:11:37.358Z"}
{"correlationId":"0f74ce0a-f920-4aac-a4bb-369d07e4f469","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:11:37.365Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"0f74ce0a-f920-4aac-a4bb-369d07e4f469","duration":3,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:11:37.368Z"}
{"correlationId":"59e8db93-3b1b-41f3-8302-6c730eaa52fa","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-12T00:11:55.837Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"59e8db93-3b1b-41f3-8302-6c730eaa52fa","duration":50,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":200,"timestamp":"2025-10-12T00:11:55.886Z"}
{"correlationId":"e1173a73-0996-4d72-aa60-a6d53abdc102","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:11:55.891Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"e1173a73-0996-4d72-aa60-a6d53abdc102","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:11:55.893Z"}
{"correlationId":"26602a00-ed77-499b-b14f-7b95fe75b0e2","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:11:55.951Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"26602a00-ed77-499b-b14f-7b95fe75b0e2","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:11:55.953Z"}
{"correlationId":"2b94ade2-4490-48fb-8207-16ac0ad156ac","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-12T00:11:56.072Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"2b94ade2-4490-48fb-8207-16ac0ad156ac","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":200,"timestamp":"2025-10-12T00:11:56.075Z"}
{"correlationId":"f36aade7-7b6b-4505-ba8a-7af38f05a2ad","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/stats","query":{},"timestamp":"2025-10-12T00:11:56.325Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"96b00f5e-5231-42e4-92df-9bc045631f2d","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/activity","query":{},"timestamp":"2025-10-12T00:11:56.328Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"384659ae-9431-4248-a99a-de27146ed936","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/my-code","query":{},"timestamp":"2025-10-12T00:11:56.330Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"384659ae-9431-4248-a99a-de27146ed936","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-12T00:11:56.331Z"}
{"correlationId":"384659ae-9431-4248-a99a-de27146ed936","isAdmin":true,"level":"info","message":"Dashboard stats retrieved for user 1","stats":{"engagementRate":0,"estimatedTaxSavings":0,"postsToday":0,"takedownsFound":0},"timestamp":"2025-10-12T00:11:56.335Z","userId":1}
{"correlationId":"f36aade7-7b6b-4505-ba8a-7af38f05a2ad","duration":10,"level":"info","message":"Response sent","method":"GET","path":"/stats","statusCode":200,"timestamp":"2025-10-12T00:11:56.335Z"}
{"correlationId":"384659ae-9431-4248-a99a-de27146ed936","isAdmin":true,"level":"info","mediaCount":0,"message":"Dashboard activity retrieved for user 1","timestamp":"2025-10-12T00:11:56.340Z","userId":1}
{"correlationId":"96b00f5e-5231-42e4-92df-9bc045631f2d","duration":13,"level":"info","message":"Response sent","method":"GET","path":"/activity","statusCode":200,"timestamp":"2025-10-12T00:11:56.341Z"}
{"correlationId":"37997db8-0e44-48c7-a31d-08fd0e19262b","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-12T00:12:07.217Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"37997db8-0e44-48c7-a31d-08fd0e19262b","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-12T00:12:07.218Z"}
{"correlationId":"c36cb222-cea0-45d6-867c-603a56bceb89","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:12:07.222Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"c36cb222-cea0-45d6-867c-603a56bceb89","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:12:07.223Z"}
{"correlationId":"2bebf73f-c0b8-4ae8-b74b-c3eddcc65d41","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/reddit/accounts","query":{},"timestamp":"2025-10-12T00:12:07.305Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"9215329f-1aba-4ca7-adbc-5267024b81fb","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/reddit/communities","query":{},"timestamp":"2025-10-12T00:12:07.308Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"f22af5db-2181-49bd-94c1-285a210e34e6","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/media","query":{},"timestamp":"2025-10-12T00:12:07.311Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"2bebf73f-c0b8-4ae8-b74b-c3eddcc65d41","duration":9,"level":"info","message":"Response sent","method":"GET","path":"/api/reddit/accounts","statusCode":200,"timestamp":"2025-10-12T00:12:07.314Z"}
{"correlationId":"f22af5db-2181-49bd-94c1-285a210e34e6","duration":10,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":200,"timestamp":"2025-10-12T00:12:07.321Z"}
{"correlationId":"9215329f-1aba-4ca7-adbc-5267024b81fb","duration":43,"level":"info","message":"Response sent","method":"GET","path":"/api/reddit/communities","statusCode":200,"timestamp":"2025-10-12T00:12:07.351Z"}
{"correlationId":"774c46e2-97c7-4f76-b7f0-d65f2f49ea29","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/reddit/connect","query":{"intent":"posting","queue":"reddit-posting"},"timestamp":"2025-10-12T00:12:08.734Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"774c46e2-97c7-4f76-b7f0-d65f2f49ea29","intent":"posting","level":"info","message":"Reddit OAuth initiated","queue":"reddit-posting","requestIP":"127.0.0.1","statePreview":"posting:...","timestamp":"2025-10-12T00:12:08.737Z","userId":1}
{"correlationId":"774c46e2-97c7-4f76-b7f0-d65f2f49ea29","level":"error","message":"Reddit OAuth redirect URI (auth):","timestamp":"2025-10-12T00:12:08.737Z"}
{"correlationId":"774c46e2-97c7-4f76-b7f0-d65f2f49ea29","duration":4,"level":"info","message":"Response sent","method":"GET","path":"/api/reddit/connect","statusCode":200,"timestamp":"2025-10-12T00:12:08.737Z"}
{"correlationId":"a71acab7-2940-43c8-97f1-2dd938568498","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:12:09.055Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"a71acab7-2940-43c8-97f1-2dd938568498","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:12:09.056Z"}
{"correlationId":"212d70e3-48e9-4d92-938f-95d4dc26054f","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:12:26.061Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"212d70e3-48e9-4d92-938f-95d4dc26054f","duration":2,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:12:26.063Z"}
{"correlationId":"a41c48e8-a3bd-4fc3-834d-30dd3b866b8a","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/analytics","query":{"range":"7d","tier":"admin"},"timestamp":"2025-10-12T00:12:30.417Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"a41c48e8-a3bd-4fc3-834d-30dd3b866b8a","duration":12,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":200,"timestamp":"2025-10-12T00:12:30.428Z"}
{"correlationId":"536c5400-e06b-4d74-8b2b-cda0d21af0e9","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:12:35.156Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"536c5400-e06b-4d74-8b2b-cda0d21af0e9","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:12:35.157Z"}
{"correlationId":"b2a5a168-de7c-4a9c-bc9a-7853abcbdd4f","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:12:37.204Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"b2a5a168-de7c-4a9c-bc9a-7853abcbdd4f","duration":7,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:12:37.210Z"}
{"correlationId":"2b468ff6-2101-4a71-a1b1-79250640bffe","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:12:37.293Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"2b468ff6-2101-4a71-a1b1-79250640bffe","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:12:37.294Z"}
{"correlationId":"71618ac0-0ee6-47ca-94f7-413d4e252dfb","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-12T00:12:37.413Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"71618ac0-0ee6-47ca-94f7-413d4e252dfb","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":304,"timestamp":"2025-10-12T00:12:37.415Z"}
{"correlationId":"966dd4df-4e35-49ce-92b2-338bd04885ac","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/stats","query":{},"timestamp":"2025-10-12T00:12:37.630Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"d0a861be-85a1-4e41-925c-bf07e01bc6cd","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/activity","query":{},"timestamp":"2025-10-12T00:12:37.632Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"0c138dbd-1b41-4117-9194-88d42a11470e","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/my-code","query":{},"timestamp":"2025-10-12T00:12:37.634Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"0c138dbd-1b41-4117-9194-88d42a11470e","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-12T00:12:37.635Z"}
{"correlationId":"0c138dbd-1b41-4117-9194-88d42a11470e","isAdmin":true,"level":"info","mediaCount":0,"message":"Dashboard activity retrieved for user 1","timestamp":"2025-10-12T00:12:37.639Z","userId":1}
{"correlationId":"d0a861be-85a1-4e41-925c-bf07e01bc6cd","duration":7,"level":"info","message":"Response sent","method":"GET","path":"/activity","statusCode":304,"timestamp":"2025-10-12T00:12:37.639Z"}
{"correlationId":"0c138dbd-1b41-4117-9194-88d42a11470e","isAdmin":true,"level":"info","message":"Dashboard stats retrieved for user 1","stats":{"engagementRate":0,"estimatedTaxSavings":0,"postsToday":0,"takedownsFound":0},"timestamp":"2025-10-12T00:12:37.640Z","userId":1}
{"correlationId":"966dd4df-4e35-49ce-92b2-338bd04885ac","duration":11,"level":"info","message":"Response sent","method":"GET","path":"/stats","statusCode":304,"timestamp":"2025-10-12T00:12:37.641Z"}
{"correlationId":"f8aeab5e-aa1e-4ee8-af0c-f5d141fb3929","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-12T00:12:41.688Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"f8aeab5e-aa1e-4ee8-af0c-f5d141fb3929","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-12T00:12:41.689Z"}
{"correlationId":"4463798f-7bd3-415d-8118-1218332ebed0","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:12:41.732Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"4463798f-7bd3-415d-8118-1218332ebed0","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:12:41.733Z"}
{"correlationId":"c9739976-d045-4a81-b463-2474380ec6c7","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/code","query":{},"timestamp":"2025-10-12T00:12:41.743Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"aecee27d-9468-466d-9973-a5fc4c5caa01","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/summary","query":{},"timestamp":"2025-10-12T00:12:41.745Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"aecee27d-9468-466d-9973-a5fc4c5caa01","level":"info","message":"Fetching referral code","timestamp":"2025-10-12T00:12:41.746Z","userId":1}
{"correlationId":"aecee27d-9468-466d-9973-a5fc4c5caa01","level":"info","message":"Fetching referral summary","timestamp":"2025-10-12T00:12:41.747Z","userId":1}
{"codeLength":8,"correlationId":"aecee27d-9468-466d-9973-a5fc4c5caa01","level":"info","message":"Referral code retrieved successfully","timestamp":"2025-10-12T00:12:41.753Z","userId":1}
{"correlationId":"c9739976-d045-4a81-b463-2474380ec6c7","duration":11,"level":"info","message":"Response sent","method":"GET","path":"/code","statusCode":200,"timestamp":"2025-10-12T00:12:41.754Z"}
{"correlationId":"aecee27d-9468-466d-9973-a5fc4c5caa01","level":"info","message":"Referral summary retrieved successfully","timestamp":"2025-10-12T00:12:41.755Z","totalCommission":0,"totalReferrals":0,"userId":1}
{"correlationId":"aecee27d-9468-466d-9973-a5fc4c5caa01","duration":11,"level":"info","message":"Response sent","method":"GET","path":"/summary","statusCode":200,"timestamp":"2025-10-12T00:12:41.756Z"}
{"correlationId":"0b37dd84-5af2-4d77-bf98-03c168f1497c","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:13:07.401Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"0b37dd84-5af2-4d77-bf98-03c168f1497c","duration":2,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:13:07.403Z"}
{"correlationId":"72c93062-6708-4e2f-b42c-7381730a7444","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:13:19.002Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"72c93062-6708-4e2f-b42c-7381730a7444","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:13:19.004Z"}
{"correlationId":"2969d62e-7e32-40d6-aa76-9dd7839fcf38","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/stats","query":{},"timestamp":"2025-10-12T00:13:19.193Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"1dd912cc-bb29-4873-90f5-63f51d626713","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/users","query":{},"timestamp":"2025-10-12T00:13:19.196Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"021be845-ce6e-4daf-b283-3f97accc71fe","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/providers","query":{},"timestamp":"2025-10-12T00:13:19.198Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"021be845-ce6e-4daf-b283-3f97accc71fe","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/providers","statusCode":200,"timestamp":"2025-10-12T00:13:19.200Z"}
{"correlationId":"f0c77602-0168-4397-b10a-63fe57e7f56b","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/system-health","query":{},"timestamp":"2025-10-12T00:13:19.202Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"f0c77602-0168-4397-b10a-63fe57e7f56b","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/admin/system-health","statusCode":200,"timestamp":"2025-10-12T00:13:19.204Z"}
{"correlationId":"2969d62e-7e32-40d6-aa76-9dd7839fcf38","duration":12,"level":"info","message":"Response sent","method":"GET","path":"/api/admin/stats","statusCode":200,"timestamp":"2025-10-12T00:13:19.206Z"}
{"correlationId":"5de72372-2788-4d66-8ecc-5cf1f825512b","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/analytics","query":{},"timestamp":"2025-10-12T00:13:19.207Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"02c8c6ee-0e38-481e-b144-c7f682c3ad29","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/admin/completeness","query":{},"timestamp":"2025-10-12T00:13:19.209Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"02c8c6ee-0e38-481e-b144-c7f682c3ad29","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/admin/completeness","statusCode":200,"timestamp":"2025-10-12T00:13:19.211Z"}
{"correlationId":"5de72372-2788-4d66-8ecc-5cf1f825512b","duration":7,"level":"info","message":"Response sent","method":"GET","path":"/api/admin/analytics","statusCode":200,"timestamp":"2025-10-12T00:13:19.213Z"}
{"correlationId":"1dd912cc-bb29-4873-90f5-63f51d626713","duration":21,"level":"info","message":"Response sent","method":"GET","path":"/api/admin/users","statusCode":200,"timestamp":"2025-10-12T00:13:19.217Z"}
{"correlationId":"ffa228de-a0b3-4fa5-bc91-8473553faee2","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:13:27.631Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"ffa228de-a0b3-4fa5-bc91-8473553faee2","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:13:27.632Z"}
{"correlationId":"c548f105-97d4-4aee-8766-02ecca5b4c8c","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/my-code","query":{},"timestamp":"2025-10-12T00:13:29.161Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"c548f105-97d4-4aee-8766-02ecca5b4c8c","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-12T00:13:29.162Z"}
{"correlationId":"d32b89d3-7ce1-438c-8139-d85a83c91189","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:13:37.403Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"d32b89d3-7ce1-438c-8139-d85a83c91189","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:13:37.404Z"}
{"correlationId":"317cbad4-5eaf-4302-8a57-18ae8e81fe99","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:13:41.304Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"317cbad4-5eaf-4302-8a57-18ae8e81fe99","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:13:41.305Z"}
{"correlationId":"19cbec60-146c-4fc7-a96e-72a5d8f37deb","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:13:41.514Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"19cbec60-146c-4fc7-a96e-72a5d8f37deb","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:13:41.515Z"}
{"correlationId":"9301d103-4e99-4347-9657-6ff6c426f206","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-12T00:13:42.073Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"9301d103-4e99-4347-9657-6ff6c426f206","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":200,"timestamp":"2025-10-12T00:13:42.076Z"}
{"correlationId":"e2380ad4-9c4f-4346-b189-18058f799620","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:13:42.307Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"e2380ad4-9c4f-4346-b189-18058f799620","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:13:42.308Z"}
{"correlationId":"351ace19-fa25-4b4e-bca7-3a1d07fdaaba","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-12T00:13:50.429Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"351ace19-fa25-4b4e-bca7-3a1d07fdaaba","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-12T00:13:50.431Z"}
{"correlationId":"51bf3cfd-14aa-4d4b-bca1-90b0dc34c2c1","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:13:50.448Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"51bf3cfd-14aa-4d4b-bca1-90b0dc34c2c1","duration":3,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:13:50.451Z"}
{"correlationId":"0d35adaf-2967-4457-91f7-04a0ca5b2591","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/uploads/imgur","query":{},"timestamp":"2025-10-12T00:14:08.111Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"0d35adaf-2967-4457-91f7-04a0ca5b2591","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/uploads/imgur","statusCode":403,"timestamp":"2025-10-12T00:14:08.112Z"}
{"correlationId":"4d493461-53cd-438a-ba47-174e6817308c","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:14:12.066Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"4d493461-53cd-438a-ba47-174e6817308c","duration":3,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:14:12.069Z"}
{"correlationId":"61dc1931-25e0-44d9-8a35-01866de8c969","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:14:42.362Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"61dc1931-25e0-44d9-8a35-01866de8c969","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:14:42.363Z"}
{"correlationId":"83773233-f021-4eab-87b7-72fabcaf365f","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:15:42.367Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"83773233-f021-4eab-87b7-72fabcaf365f","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:15:42.368Z"}
{"correlationId":"d916c9b1-e153-48c7-84ae-e3695ca924f2","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/auth/login","query":{},"timestamp":"2025-10-12T00:15:55.087Z","userAgent":"curl/8.5.0"}
{"correlationId":"d916c9b1-e153-48c7-84ae-e3695ca924f2","duration":48,"level":"info","message":"Response sent","method":"POST","path":"/api/auth/login","statusCode":200,"timestamp":"2025-10-12T00:15:55.135Z"}
{"correlationId":"e03dd7c4-26b6-432b-9ee8-3f2a6cde3c80","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/generate/caption","query":{},"timestamp":"2025-10-12T00:15:55.144Z","userAgent":"curl/8.5.0"}
{"correlationId":"e03dd7c4-26b6-432b-9ee8-3f2a6cde3c80","duration":2,"level":"info","message":"Response sent","method":"POST","path":"/","statusCode":404,"timestamp":"2025-10-12T00:15:55.145Z"}
{"correlationId":"13696f64-5130-472c-8a74-e2e3153ee073","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:16:42.373Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"13696f64-5130-472c-8a74-e2e3153ee073","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:16:42.374Z"}
{"correlationId":"d35eb8e9-2447-4951-88d1-87db08ab7d8b","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:17:42.385Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"d35eb8e9-2447-4951-88d1-87db08ab7d8b","duration":5,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:17:42.390Z"}
{"correlationId":"106177a3-d153-4220-8811-d6a5b28209aa","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:18:42.405Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"106177a3-d153-4220-8811-d6a5b28209aa","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:18:42.408Z"}
{"correlationId":"761aecd6-f50c-4c32-9877-b9e84297aee0","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:19:42.423Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"761aecd6-f50c-4c32-9877-b9e84297aee0","duration":5,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:19:42.428Z"}
{"correlationId":"9a74d8fc-7aaf-4878-85d9-83cdfef4407f","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:20:42.440Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"9a74d8fc-7aaf-4878-85d9-83cdfef4407f","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:20:42.442Z"}
{"correlationId":"652a53d3-a7c0-471a-8147-7ce5df3b40f6","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-12T00:21:28.595Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"652a53d3-a7c0-471a-8147-7ce5df3b40f6","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":401,"timestamp":"2025-10-12T00:21:28.596Z"}
{"correlationId":"a2c0f262-4b98-4e20-98ed-b51f5f75acf0","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/metrics","query":{},"timestamp":"2025-10-12T00:21:28.805Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"a2c0f262-4b98-4e20-98ed-b51f5f75acf0","duration":8,"level":"info","message":"Response sent","method":"GET","path":"/api/metrics","statusCode":200,"timestamp":"2025-10-12T00:21:28.813Z"}
{"correlationId":"4bd6f61e-b7c3-4233-a14f-b3b36685aea9","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-12T00:21:34.352Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"4bd6f61e-b7c3-4233-a14f-b3b36685aea9","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":200,"timestamp":"2025-10-12T00:21:34.355Z"}
{"correlationId":"eb393239-9455-463a-9aa3-c611d46f6247","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:21:34.563Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"eb393239-9455-463a-9aa3-c611d46f6247","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:21:34.564Z"}
{"correlationId":"280d0251-0ba7-44cd-9351-754d7c827dd5","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-12T00:21:38.987Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"280d0251-0ba7-44cd-9351-754d7c827dd5","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-12T00:21:38.988Z"}
{"correlationId":"5da1d66a-0713-4aa4-b82a-00dd0a7dab19","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:21:38.998Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"5da1d66a-0713-4aa4-b82a-00dd0a7dab19","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:21:38.999Z"}
{"correlationId":"0a9a4676-8bb8-46ca-a85e-57293704e2e2","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/uploads/imgur","query":{},"timestamp":"2025-10-12T00:21:42.530Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"0a9a4676-8bb8-46ca-a85e-57293704e2e2","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/uploads/imgur","statusCode":403,"timestamp":"2025-10-12T00:21:42.531Z"}
{"correlationId":"94005807-1229-4d72-9657-3cf246c6a046","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/uploads/imgur","query":{},"timestamp":"2025-10-12T00:21:59.319Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"94005807-1229-4d72-9657-3cf246c6a046","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/uploads/imgur","statusCode":403,"timestamp":"2025-10-12T00:21:59.320Z"}
{"correlationId":"ccec46ef-cf5f-47a2-af9d-ce6caa25bcb4","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:22:04.555Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"ccec46ef-cf5f-47a2-af9d-ce6caa25bcb4","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:22:04.556Z"}
{"correlationId":"2466df3e-b7a8-463a-b15c-e24b9ba939de","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:22:34.404Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"2466df3e-b7a8-463a-b15c-e24b9ba939de","duration":4,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:22:34.408Z"}
{"correlationId":"e6308df0-1e0c-40ac-8f5c-6364b0aec111","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:22:34.621Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"e6308df0-1e0c-40ac-8f5c-6364b0aec111","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:22:34.622Z"}
{"correlationId":"7f669c59-ed3a-47c1-9d06-443e83b32da3","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/uploads/imgur/stats","query":{},"timestamp":"2025-10-12T00:23:34.630Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"7f669c59-ed3a-47c1-9d06-443e83b32da3","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/imgur/stats","statusCode":200,"timestamp":"2025-10-12T00:23:34.631Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-12T00:23:40.210Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-12T00:23:41.283Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-12T00:23:41.284Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-12T00:23:41.284Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-12T00:23:41.540Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-12T00:23:41.541Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-12T00:23:41.541Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-12T00:23:41.541Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-12T00:23:41.541Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-12T00:23:41.549Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-12T00:23:41.553Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-12T00:23:41.554Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-12T00:23:41.555Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-12T00:23:41.556Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-12T00:23:41.584Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-12T00:23:41.584Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-12T00:23:41.588Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-12T00:23:41.591Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-12T00:23:41.593Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-12T00:23:41.594Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-12T00:23:41.597Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-12T00:23:41.597Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-12T00:23:41.597Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-12T00:23:41.597Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-12T00:23:41.599Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-12T00:23:41.604Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-12T00:23:41.624Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-12T00:23:41.624Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-12T00:23:41.624Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-12T00:23:41.654Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-12T00:23:41.657Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-12T00:23:41.660Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-12T00:23:41.662Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-12T00:23:41.667Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-12T00:23:41.670Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-12T00:23:41.670Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-12T00:23:41.670Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-12T00:23:41.671Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-12T00:23:41.674Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-12T00:23:41.677Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-12T00:23:41.856Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-12T00:23:42.250Z"}
{"correlationId":"dab12d73-83c1-4b6f-9add-f9b4e6124c7c","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-12T00:23:42.558Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"dab12d73-83c1-4b6f-9add-f9b4e6124c7c","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":200,"timestamp":"2025-10-12T00:23:42.560Z"}
{"correlationId":"f7d8bf45-bf10-48ac-ae2d-83121b064563","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/stats","query":{},"timestamp":"2025-10-12T00:23:42.805Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"70c26925-3dc7-4f6a-a55d-b967a889c265","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/activity","query":{},"timestamp":"2025-10-12T00:23:42.810Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"6e19e070-bdba-428f-99cc-a591170c6247","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/my-code","query":{},"timestamp":"2025-10-12T00:23:42.815Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"6e19e070-bdba-428f-99cc-a591170c6247","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-12T00:23:42.817Z"}
{"correlationId":"6e19e070-bdba-428f-99cc-a591170c6247","isAdmin":true,"level":"info","message":"Dashboard stats retrieved for user 1","stats":{"engagementRate":0,"estimatedTaxSavings":0,"postsToday":0,"takedownsFound":0},"timestamp":"2025-10-12T00:23:42.821Z","userId":1}
{"correlationId":"f7d8bf45-bf10-48ac-ae2d-83121b064563","duration":17,"level":"info","message":"Response sent","method":"GET","path":"/stats","statusCode":200,"timestamp":"2025-10-12T00:23:42.822Z"}
{"correlationId":"6e19e070-bdba-428f-99cc-a591170c6247","isAdmin":true,"level":"info","mediaCount":0,"message":"Dashboard activity retrieved for user 1","timestamp":"2025-10-12T00:23:42.827Z","userId":1}
{"correlationId":"70c26925-3dc7-4f6a-a55d-b967a889c265","duration":18,"level":"info","message":"Response sent","method":"GET","path":"/activity","statusCode":200,"timestamp":"2025-10-12T00:23:42.828Z"}
{"correlationId":"0a565398-e02e-4eb4-b97d-0cee62476d66","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-12T00:24:12.541Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"0a565398-e02e-4eb4-b97d-0cee62476d66","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-12T00:24:12.542Z"}
{"correlationId":"7544457d-f297-43e7-b999-0aca66ad5455","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:24:12.546Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"7544457d-f297-43e7-b999-0aca66ad5455","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:24:12.547Z"}
{"correlationId":"534aa098-2769-4e8a-8cc5-b6cc11b9d179","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/uploads/imgur","query":{},"timestamp":"2025-10-12T00:24:13.042Z","userAgent":"curl/8.5.0"}
{"correlationId":"534aa098-2769-4e8a-8cc5-b6cc11b9d179","duration":2,"level":"info","message":"Response sent","method":"POST","path":"/api/uploads/imgur","statusCode":403,"timestamp":"2025-10-12T00:24:13.044Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-12T00:24:46.769Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-12T00:24:47.792Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-12T00:24:47.792Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-12T00:24:47.793Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-12T00:24:48.032Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-12T00:24:48.032Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-12T00:24:48.032Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-12T00:24:48.032Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-12T00:24:48.033Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-12T00:24:48.040Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-12T00:24:48.044Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-12T00:24:48.045Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-12T00:24:48.046Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-12T00:24:48.047Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-12T00:24:48.067Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-12T00:24:48.068Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-12T00:24:48.070Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-12T00:24:48.071Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-12T00:24:48.072Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-12T00:24:48.073Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-12T00:24:48.075Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-12T00:24:48.075Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-12T00:24:48.075Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-12T00:24:48.075Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-12T00:24:48.076Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-12T00:24:48.080Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-12T00:24:48.094Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-12T00:24:48.095Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-12T00:24:48.095Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-12T00:24:48.111Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-12T00:24:48.113Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-12T00:24:48.116Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-12T00:24:48.118Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-12T00:24:48.122Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-12T00:24:48.125Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-12T00:24:48.125Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-12T00:24:48.125Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-12T00:24:48.126Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-12T00:24:48.129Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-12T00:24:48.131Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-12T00:24:48.286Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-12T00:24:48.670Z"}
{"correlationId":"6a75ffac-d814-4c00-838a-016770e9370d","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-12T00:24:48.829Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"6a75ffac-d814-4c00-838a-016770e9370d","duration":3,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":200,"timestamp":"2025-10-12T00:24:48.831Z"}
{"correlationId":"830dbf42-e029-4ee1-bf67-8fd2cf3b59fc","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/stats","query":{},"timestamp":"2025-10-12T00:24:49.117Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"d6a6c67f-07c6-4b61-87df-35202ceaf733","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/activity","query":{},"timestamp":"2025-10-12T00:24:49.120Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"aa74b1a2-0c2c-47ea-bade-1ba54f12f6ce","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/my-code","query":{},"timestamp":"2025-10-12T00:24:49.124Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"aa74b1a2-0c2c-47ea-bade-1ba54f12f6ce","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-12T00:24:49.126Z"}
{"correlationId":"aa74b1a2-0c2c-47ea-bade-1ba54f12f6ce","isAdmin":true,"level":"info","message":"Dashboard stats retrieved for user 1","stats":{"engagementRate":0,"estimatedTaxSavings":0,"postsToday":0,"takedownsFound":0},"timestamp":"2025-10-12T00:24:49.128Z","userId":1}
{"correlationId":"830dbf42-e029-4ee1-bf67-8fd2cf3b59fc","duration":12,"level":"info","message":"Response sent","method":"GET","path":"/stats","statusCode":200,"timestamp":"2025-10-12T00:24:49.129Z"}
{"correlationId":"aa74b1a2-0c2c-47ea-bade-1ba54f12f6ce","isAdmin":true,"level":"info","mediaCount":0,"message":"Dashboard activity retrieved for user 1","timestamp":"2025-10-12T00:24:49.134Z","userId":1}
{"correlationId":"d6a6c67f-07c6-4b61-87df-35202ceaf733","duration":14,"level":"info","message":"Response sent","method":"GET","path":"/activity","statusCode":200,"timestamp":"2025-10-12T00:24:49.134Z"}
{"correlationId":"07582dc5-f3b5-4cc7-9bf7-2a1a89fb8181","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/uploads/imgur","query":{},"timestamp":"2025-10-12T00:25:00.347Z","userAgent":"curl/8.5.0"}
{"correlationId":"07582dc5-f3b5-4cc7-9bf7-2a1a89fb8181","duration":1,"level":"info","message":"Response sent","method":"POST","path":"/api/uploads/imgur","statusCode":403,"timestamp":"2025-10-12T00:25:00.348Z"}
{"level":"info","message":"Sentry DSN not configured, skipping Sentry initialization","timestamp":"2025-10-12T00:25:14.804Z"}
{"level":"info","message":"[Gemini] Text model: gemini-2.5-flash","timestamp":"2025-10-12T00:25:15.857Z"}
{"level":"info","message":"[Gemini] Vision model: gemini-2.5-flash","timestamp":"2025-10-12T00:25:15.857Z"}
{"level":"info","message":"[OpenRouter] Default model: x-ai/grok-4-fast","timestamp":"2025-10-12T00:25:15.858Z"}
{"level":"info","message":"[HEALTH] Script executed directly, starting bootstrap...","timestamp":"2025-10-12T00:25:16.087Z"}
{"level":"info","message":"[HEALTH] Starting application bootstrap...","timestamp":"2025-10-12T00:25:16.088Z"}
{"level":"info","message":"[HEALTH] Environment: development","timestamp":"2025-10-12T00:25:16.088Z"}
{"level":"info","message":"[HEALTH] Platform: linux","timestamp":"2025-10-12T00:25:16.088Z"}
{"level":"info","message":"[HEALTH] Architecture: x64","timestamp":"2025-10-12T00:25:16.088Z"}
{"error":{"code":"ERR_MODULE_NOT_FOUND"},"level":"warn","message":"Could not apply advanced rate limiting","timestamp":"2025-10-12T00:25:16.098Z"}
{"level":"info","message":"Observability middleware configured","timestamp":"2025-10-12T00:25:16.103Z"}
{"level":"info","message":"Observability middleware applied","timestamp":"2025-10-12T00:25:16.103Z"}
{"level":"info","message":"Session store configured with PostgreSQL backend","timestamp":"2025-10-12T00:25:16.105Z"}
{"apiPrefix":"/api","level":"info","loginRoute":"/api/auth/login","message":"Setting up auth routes","signupRoute":"/api/auth/signup","timestamp":"2025-10-12T00:25:16.106Z"}
{"email":"admin@thottopilot.com","level":"info","message":"Admin account configured successfully","timestamp":"2025-10-12T00:25:16.133Z"}
{"level":"info","message":"üîß Applying production database fixes...","timestamp":"2025-10-12T00:25:16.133Z"}
{"level":"info","message":"‚úÖ Admin account verified: admin@thottopilot.com","timestamp":"2025-10-12T00:25:16.135Z"}
{"level":"warn","message":"User a1davida1 not found, skipping tier upgrade","timestamp":"2025-10-12T00:25:16.136Z"}
{"level":"warn","message":"User a1davida1 not found, skipping email verification","timestamp":"2025-10-12T00:25:16.138Z"}
{"level":"info","message":"‚úÖ Production database fixes completed","timestamp":"2025-10-12T00:25:16.138Z"}
{"level":"info","message":"Initializing queue system...","timestamp":"2025-10-12T00:25:16.140Z"}
{"level":"info","message":"Queue backend selection: USE_PG_QUEUE=true, REDIS_URL=true","timestamp":"2025-10-12T00:25:16.141Z"}
{"level":"info","message":"üîß Using PostgreSQL queue backend","timestamp":"2025-10-12T00:25:16.141Z"}
{"level":"error","message":"üîß Initializing PostgreSQL Queue backend","timestamp":"2025-10-12T00:25:16.141Z"}
{"level":"info","message":"Queue system initialized","timestamp":"2025-10-12T00:25:16.142Z"}
{"level":"error","message":"üîç Starting queue monitoring...","timestamp":"2025-10-12T00:25:16.146Z"}
{"level":"error","message":"‚úÖ Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-12T00:25:16.159Z"}
{"level":"info","message":"Background workers initialized","timestamp":"2025-10-12T00:25:16.159Z"}
{"level":"info","message":"üöÄ Starting cron job manager...","timestamp":"2025-10-12T00:25:16.160Z"}
{"level":"info","message":"‚úÖ Started cron job: process-scheduled-posts (* * * * *)","timestamp":"2025-10-12T00:25:16.178Z"}
{"level":"info","message":"‚úÖ Started cron job: cleanup-old-posts (0 3 * * *)","timestamp":"2025-10-12T00:25:16.180Z"}
{"level":"info","message":"‚úÖ Started cron job: update-analytics (0 * * * *)","timestamp":"2025-10-12T00:25:16.182Z"}
{"level":"info","message":"‚úÖ Started cron job: check-stuck-jobs (*/5 * * * *)","timestamp":"2025-10-12T00:25:16.185Z"}
{"level":"info","message":"‚úÖ Started cron job: sync-reddit-communities (0 2 * * 1)","timestamp":"2025-10-12T00:25:16.190Z"}
{"level":"info","message":"‚úÖ Started cron job: database-backup (0 4 * * *)","timestamp":"2025-10-12T00:25:16.193Z"}
{"level":"info","message":"‚úÖ Cron job manager started successfully","timestamp":"2025-10-12T00:25:16.193Z"}
{"level":"info","message":"Cron manager started","timestamp":"2025-10-12T00:25:16.193Z"}
{"level":"info","message":"Queue monitoring started (interval: 30000ms)","timestamp":"2025-10-12T00:25:16.193Z"}
{"level":"info","message":"Worker auto-scaling started (interval: 60000ms)","timestamp":"2025-10-12T00:25:16.196Z"}
{"level":"warn","message":"Environment configuration issue detected: SENTRY_DSN: Invalid url","timestamp":"2025-10-12T00:25:16.198Z"}
{"level":"info","message":"Serving client from: /home/dave/CascadeProjects/TPilot/client","timestamp":"2025-10-12T00:25:16.365Z"}
{"level":"info","message":"Vite development server configured","timestamp":"2025-10-12T00:25:16.757Z"}
{"level":"info","message":"[HEALTH] Express app created successfully in 669ms","timestamp":"2025-10-12T00:25:16.757Z"}
{"level":"info","message":"[HEALTH] Target port from environment: 3005","timestamp":"2025-10-12T00:25:16.757Z"}
{"level":"info","message":"[HEALTH] Starting server on 0.0.0.0:3005","timestamp":"2025-10-12T00:25:16.757Z"}
{"level":"info","message":"[HEALTH] ‚úÖ Server started successfully on port 3005 in 670ms","timestamp":"2025-10-12T00:25:16.758Z"}
{"level":"info","message":"serving on port 3005","timestamp":"2025-10-12T00:25:16.759Z"}
{"correlationId":"9fa821ae-a3e4-40c4-bda5-03309d952d4f","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/auth/user","query":{},"timestamp":"2025-10-12T00:25:17.055Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"9fa821ae-a3e4-40c4-bda5-03309d952d4f","duration":8,"level":"info","message":"Response sent","method":"GET","path":"/api/auth/user","statusCode":304,"timestamp":"2025-10-12T00:25:17.063Z"}
{"correlationId":"3a8f1054-1d7a-4996-9131-20c493aa0d7c","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/stats","query":{},"timestamp":"2025-10-12T00:25:17.314Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"9f419d19-5e05-43f1-9918-671d085c0196","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/dashboard/activity","query":{},"timestamp":"2025-10-12T00:25:17.321Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"e5406e1f-af30-4245-8638-f01b515752d2","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/referral/my-code","query":{},"timestamp":"2025-10-12T00:25:17.329Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"e5406e1f-af30-4245-8638-f01b515752d2","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/","statusCode":404,"timestamp":"2025-10-12T00:25:17.331Z"}
{"correlationId":"e5406e1f-af30-4245-8638-f01b515752d2","isAdmin":true,"level":"info","mediaCount":0,"message":"Dashboard activity retrieved for user 1","timestamp":"2025-10-12T00:25:17.333Z","userId":1}
{"correlationId":"9f419d19-5e05-43f1-9918-671d085c0196","duration":13,"level":"info","message":"Response sent","method":"GET","path":"/activity","statusCode":304,"timestamp":"2025-10-12T00:25:17.334Z"}
{"correlationId":"e5406e1f-af30-4245-8638-f01b515752d2","isAdmin":true,"level":"info","message":"Dashboard stats retrieved for user 1","stats":{"engagementRate":0,"estimatedTaxSavings":0,"postsToday":0,"takedownsFound":0},"timestamp":"2025-10-12T00:25:17.336Z","userId":1}
{"correlationId":"3a8f1054-1d7a-4996-9131-20c493aa0d7c","duration":23,"level":"info","message":"Response sent","method":"GET","path":"/stats","statusCode":304,"timestamp":"2025-10-12T00:25:17.336Z"}
{"correlationId":"d30a5718-7df3-4a2b-8a74-839a1c063a43","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/csrf-token","query":{},"timestamp":"2025-10-12T00:25:25.178Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"d30a5718-7df3-4a2b-8a74-839a1c063a43","duration":1,"level":"info","message":"Response sent","method":"GET","path":"/api/csrf-token","statusCode":200,"timestamp":"2025-10-12T00:25:25.179Z"}
{"correlationId":"f5b005da-8cdf-48c7-97bf-a0ee5ad255c3","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/analytics/events","query":{},"timestamp":"2025-10-12T00:25:25.183Z","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:143.0) Gecko/20100101 Firefox/143.0"}
{"correlationId":"f5b005da-8cdf-48c7-97bf-a0ee5ad255c3","duration":7,"level":"info","message":"Response sent","method":"POST","path":"/api/analytics/events","statusCode":403,"timestamp":"2025-10-12T00:25:25.190Z"}
{"correlationId":"e4d466d0-b66c-4f35-989a-332d9667e18c","ip":"127.0.0.1","level":"info","message":"Request received","method":"GET","path":"/api/health","query":{},"timestamp":"2025-10-12T00:25:29.128Z","userAgent":"curl/8.5.0"}
{"correlationId":"e4d466d0-b66c-4f35-989a-332d9667e18c","duration":2,"level":"info","message":"Response sent","method":"GET","path":"/api/health","statusCode":200,"timestamp":"2025-10-12T00:25:29.130Z"}
{"correlationId":"7ecbafdd-4c63-425c-a12f-c77cb1b4ce90","ip":"127.0.0.1","level":"info","message":"Request received","method":"POST","path":"/api/uploads/imgur","query":{},"timestamp":"2025-10-12T00:25:38.879Z","userAgent":"curl/8.5.0"}
{"correlationId":"7ecbafdd-4c63-425c-a12f-c77cb1b4ce90","duration":2,"level":"info","message":"Response sent","method":"POST","path":"/imgur","statusCode":400,"timestamp":"2025-10-12T00:25:38.880Z"}
