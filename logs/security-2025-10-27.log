{"date":"Mon Oct 27 2025 01:26:50 GMT-0500 (Central Daylight Time)","error":{},"level":"error","message":"unhandledRejection: caption request failed\nError: caption request failed\n    at /home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:99:13\n    at retryWithBackoff (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:27:14)\n    at captionImage (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:89:15)\n    at Module.nsfwCaptionFallback (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:120:19)","os":{"loadavg":[1.25,0.91,0.49],"uptime":506.31},"process":{"argv":["/usr/bin/node","/home/dave/CascadeProjects/TPilot/node_modules/tinypool/dist/entry/process.js"],"cwd":"/home/dave/CascadeProjects/TPilot","execPath":"/usr/bin/node","gid":1000,"memoryUsage":{"arrayBuffers":666032,"external":4370324,"heapTotal":165232640,"heapUsed":137936368,"rss":256237568},"pid":5898,"uid":1000,"version":"v20.19.5"},"rejection":true,"stack":"Error: caption request failed\n    at /home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:99:13\n    at retryWithBackoff (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:27:14)\n    at captionImage (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:89:15)\n    at Module.nsfwCaptionFallback (/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts:120:19)","timestamp":"2025-10-27T06:26:50.474Z","trace":[{"column":13,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":null,"line":99,"method":null,"native":false},{"column":14,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"retryWithBackoff","line":27,"method":null,"native":false},{"column":15,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"captionImage","line":89,"method":null,"native":false},{"column":19,"file":"/home/dave/CascadeProjects/TPilot/server/caption/nsfwFallback.ts","function":"Module.nsfwCaptionFallback","line":120,"method":"nsfwCaptionFallback","native":false}]}
{"level":"warn","message":"⚠️ Turnstile not configured - bypassing verification in development","timestamp":"2025-10-27T07:28:51.905Z"}
{"err":{"cause":{"code":"28P01","file":"auth.c","length":100,"line":"331","name":"error","routine":"auth_failed","severity":"FATAL"},"params":["admin@example.com","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"reddit_karma\", \"reddit_account_created\", \"reddit_is_verified\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"Failed to ensure admin account exists","timestamp":"2025-10-27T07:28:52.169Z"}
{"level":"error","message":"⚠️ Set ADMIN_PASSWORD or ADMIN_PASSWORD_HASH in production!","timestamp":"2025-10-27T07:28:52.170Z"}
{"error":{"cause":{"code":"28P01","file":"auth.c","length":100,"line":"331","name":"error","routine":"auth_failed","severity":"FATAL"},"params":["admin@example.com","admin",1],"query":"select \"id\", \"username\", \"password\", \"email\", \"role\", \"is_admin\", \"email_verified\", \"first_name\", \"last_name\", \"tier\", \"must_change_password\", \"subscription_status\", \"trial_ends_at\", \"provider\", \"provider_id\", \"avatar\", \"bio\", \"referral_code_id\", \"referred_by\", \"reddit_username\", \"reddit_access_token\", \"reddit_refresh_token\", \"reddit_id\", \"reddit_karma\", \"reddit_account_created\", \"reddit_is_verified\", \"stripe_customer_id\", \"stripe_subscription_id\", \"catbox_userhash\", \"banned_at\", \"suspended_until\", \"ban_reason\", \"suspension_reason\", \"created_at\", \"updated_at\", \"last_login\", \"password_reset_at\", \"deleted_at\", \"is_deleted\", \"avatar_url\", \"website\", \"timezone\", \"language\", \"two_factor_enabled\", \"last_login_at\", \"password_hash\", \"last_password_change\", \"posts_count\", \"captions_generated\" from \"users\" where (\"users\".\"email\" = $1 or \"users\".\"username\" = $2) limit $3"},"level":"error","message":"❌ Failed to apply production fixes","timestamp":"2025-10-27T07:28:52.175Z"}
