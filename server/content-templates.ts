// Pre-generated content templates for free/base tier users
// Organized by category and style for variety

export interface ContentTemplate {
  id: string;
  category: 'teasing' | 'promotional' | 'engagement' | 'lifestyle' | 'announcement';
  style: 'playful' | 'confident' | 'mysterious' | 'casual' | 'direct';
  title: string;
  content: string;
  tags: string[];
  photoInstructions?: string;
}

export const preGeneratedTemplates: ContentTemplate[] = [
  // Teasing Content
  {
    id: 'tease_001',
    category: 'teasing',
    style: 'playful',
    title: "Guess what I'm wearing underneath? 😏",
    content: "Had the most interesting day today... Started with coffee in my favorite oversized sweater (and maybe nothing else 👀). Been thinking about sharing what happened next. Should I? The full story is waiting for those who know where to find me 💋",
    tags: ['tease', 'playful', 'suggestive'],
    photoInstructions: "Oversized sweater, natural lighting, implied nudity"
  },
  {
    id: 'tease_002',
    category: 'teasing',
    style: 'confident',
    title: "Your favorite girl next door has a secret...",
    content: "They say good girls don't do what I do, but here we are 💅 Just finished a photoshoot that would make your jaw drop. These pics are definitely not for everyone... but maybe they're for you? Link in comments if you're brave enough 🔥",
    tags: ['confident', 'teasing', 'exclusive'],
    photoInstructions: "Confident pose, dramatic lighting, partial reveal"
  },
  {
    id: 'tease_003',
    category: 'teasing',
    style: 'mysterious',
    title: "Something special happened in the shower this morning...",
    content: "Steam, water droplets, and a camera... That's all I'm saying here 🚿 The rest of the story? Well, that's reserved for my special fans. Trust me, you haven't seen anything like this before 💦",
    tags: ['shower', 'mysterious', 'exclusive'],
    photoInstructions: "Steamy bathroom, water droplets, silhouette shots"
  },

  // Promotional Content
  {
    id: 'promo_001',
    category: 'promotional',
    style: 'direct',
    title: "New content drop! 🎉 Your weekend just got better",
    content: "Just uploaded 50+ new pics and 3 exclusive videos! This week's theme was 'Office After Hours' and let's just say... HR would not approve 😈 Limited time discount for the next 24 hours. Don't miss out!",
    tags: ['newcontent', 'promotion', 'discount'],
    photoInstructions: "Professional outfit with sultry twist, office setting"
  },
  {
    id: 'promo_002',
    category: 'promotional',
    style: 'casual',
    title: "Hey loves! Special surprise for my Reddit fam 💕",
    content: "You guys have been amazing, so I'm doing something special! First 10 people to subscribe get 40% off + a custom pic of their choice. Been working on some content that's... well, let's say it's my boldest yet 🙈",
    tags: ['discount', 'reddit', 'special'],
    photoInstructions: "Friendly, approachable pose with flirty element"
  },
  {
    id: 'promo_003',
    category: 'promotional',
    style: 'playful',
    title: "Oops, did I just lower my prices? 🤭",
    content: "Someone told me I was being too naughty with my content... So naturally, I made it naughtier AND more affordable 😇 Flash sale happening right now! Come see what trouble I've been getting into lately...",
    tags: ['sale', 'playful', 'naughty'],
    photoInstructions: "Playful expression, colorful setting, fun poses"
  },

  // Engagement Content
  {
    id: 'engage_001',
    category: 'engagement',
    style: 'casual',
    title: "What's your biggest fantasy? I might just make it happen...",
    content: "Feeling creative today and want to hear from you! 💭 Drop your wildest ideas in the comments - I'm picking my favorites for next week's content. The most creative suggestion gets a special surprise in their DMs 😘",
    tags: ['interactive', 'engagement', 'community'],
    photoInstructions: "Inviting pose, direct eye contact, warm lighting"
  },
  {
    id: 'engage_002',
    category: 'engagement',
    style: 'confident',
    title: "Rate my outfit... or what's left of it 😏",
    content: "Started the day fully dressed, but somehow pieces keep disappearing 🤷‍♀️ Currently at stage 3 of 5... Should I keep going? Your votes decide! Plus, everyone who interacts gets a special preview of the final result 🔥",
    tags: ['interactive', 'voting', 'striptease'],
    photoInstructions: "Progressive undressing, confident poses"
  },
  {
    id: 'engage_003',
    category: 'engagement',
    style: 'playful',
    title: "Truth or dare? I pick dare... always 😈",
    content: "It's Friday and I'm feeling adventurous! Leave your dares in the comments - nothing's off limits (well, almost nothing 😉). Top 3 dares will be fulfilled and documented for my VIP members. Let's see how creative you can get!",
    tags: ['game', 'dare', 'friday'],
    photoInstructions: "Mischievous expression, playful setting"
  },

  // Lifestyle Content
  {
    id: 'life_001',
    category: 'lifestyle',
    style: 'casual',
    title: "Sunday vibes: Coffee, sunshine, and absolutely no clothes",
    content: "Perfect morning = coffee in bed, sunlight through the windows, and complete freedom 🌞 This is your reminder that self-care Sundays are important! How are you spending yours? (Mine involves a camera and some very artistic angles 📸)",
    tags: ['sunday', 'lifestyle', 'natural'],
    photoInstructions: "Natural morning light, relaxed poses, coffee prop"
  },
  {
    id: 'life_002',
    category: 'lifestyle',
    style: 'confident',
    title: "Gym gains and other assets 🍑",
    content: "Leg day hit different today! 🏋️‍♀️ All this hard work is paying off in ways you can definitely appreciate. New gym content dropping tomorrow - sports bras were optional, results were mandatory 💪",
    tags: ['fitness', 'gym', 'body'],
    photoInstructions: "Athletic wear, gym setting, focus on physique"
  },
  {
    id: 'life_003',
    category: 'lifestyle',
    style: 'playful',
    title: "Cooking dinner... outfit optional 👩‍🍳",
    content: "They say the way to someone's heart is through their stomach, but I have other ideas 😏 Tonight's menu: Something spicy in the kitchen (and I'm not talking about the food). Who wants the recipe? 🌶️",
    tags: ['cooking', 'domestic', 'playful'],
    photoInstructions: "Kitchen setting, apron only, playful cooking poses"
  },

  // Announcement Content
  {
    id: 'announce_001',
    category: 'announcement',
    style: 'direct',
    title: "Big news! Taking custom requests this week 📣",
    content: "You asked, I listened! Opening up custom content slots for this week only. Whether it's a specific outfit, scenario, or that thing you've been too shy to ask for... Now's your chance! Limited spots available 💫",
    tags: ['custom', 'announcement', 'limited'],
    photoInstructions: "Professional announcement style, eye-catching"
  },
  {
    id: 'announce_002',
    category: 'announcement',
    style: 'playful',
    title: "I did something I've never done before... 🙈",
    content: "You know that thing everyone's been asking me to try? Well... I finally did it! 🎉 And wow, you're going to love the results. This is definitely my most requested content ever. Available now for my VIP members!",
    tags: ['new', 'requested', 'exclusive'],
    photoInstructions: "Excited expression, celebratory mood"
  },
  {
    id: 'announce_003',
    category: 'announcement',
    style: 'mysterious',
    title: "Midnight drop... Set your alarms 🌙",
    content: "Something special is happening at midnight tonight. I can't say much, but it involves lingerie, candlelight, and a surprise guest 👀 Only my subscribers will get the notification. Don't miss this...",
    tags: ['midnight', 'surprise', 'exclusive'],
    photoInstructions: "Dark, moody lighting with hints of lingerie"
  },

  // More variety for free tier
  {
    id: 'variety_001',
    category: 'teasing',
    style: 'confident',
    title: "Mirror selfies hit different at 2am",
    content: "Couldn't sleep, so I decided to have a little photoshoot 📸 The mirror never lies, and tonight it's showing all my best angles. Want to see what's keeping me up? Check my profile for the full album 💋",
    tags: ['mirror', 'selfie', 'latenight'],
    photoInstructions: "Mirror selfies, dim lighting, various angles"
  },
  {
    id: 'variety_002',
    category: 'promotional',
    style: 'playful',
    title: "Whoops, my subscription price slipped! 📉",
    content: "Clumsy me accidentally dropped my prices by 50%! 🙊 Guess you'll just have to take advantage before I notice... This month's content theme: 'Too Hot for TikTok'. Need I say more?",
    tags: ['discount', 'accident', 'hot'],
    photoInstructions: "Playful 'oops' expression, flirty pose"
  },
  {
    id: 'variety_003',
    category: 'engagement',
    style: 'direct',
    title: "Be honest - am I your type?",
    content: "Curious minds want to know! 💭 Drop a ❤️ if I'm your type, or tell me what would make me perfect for you. Most interesting answer gets a special surprise in their inbox...",
    tags: ['question', 'type', 'interaction'],
    photoInstructions: "Direct gaze, confident stance, alluring outfit"
  }
];

// Function to get random templates based on criteria
export function getRandomTemplates(
  count: number = 3,
  category?: string,
  style?: string,
  promotionLevel?: string,
  subCategory?: string
): ContentTemplate[] {
  let filtered = [...preGeneratedTemplates];
  
  if (category) {
    filtered = filtered.filter(t => t.category === category);
  }
  
  if (style) {
    filtered = filtered.filter(t => t.style === style);
  }
  
  if (promotionLevel) {
    filtered = filtered.filter(t => (t as any).promotionLevel === promotionLevel || !t.hasOwnProperty('promotionLevel'));
  }
  
  if (subCategory) {
    filtered = filtered.filter(t => (t as any).subCategory === subCategory);
  }
  
  // Prioritize exact matches, then partial matches
  const exactMatches = filtered.filter(t => 
    (!category || t.category === category) &&
    (!style || t.style === style) &&
    (!promotionLevel || (t as any).promotionLevel === promotionLevel)
  );
  
  const results = exactMatches.length >= count ? exactMatches : [...exactMatches, ...filtered];
  
  // Shuffle and return requested count
  const shuffled = results.sort(() => Math.random() - 0.5);
  return shuffled.slice(0, count);
}

// Function to add watermark text to free tier content
export function addWatermark(content: string, isTitle: boolean = false): string {
  const watermark = " [via ThottoPilot]";
  
  if (isTitle) {
    return content + watermark;
  }
  
  // For body content, add at the end
  return content + "\n\n" + "Created with ThottoPilot - Premium for watermark-free content";
}

// Get template by specific criteria
export function getTemplateByMood(
  mood: 'playful' | 'confident' | 'mysterious' | 'casual' | 'direct'
): ContentTemplate | null {
  const templates = preGeneratedTemplates.filter(t => t.style === mood);
  if (templates.length === 0) return null;
  
  const randomIndex = Math.floor(Math.random() * templates.length);
  return templates[randomIndex];
}

// Get trending templates (simulate based on mock engagement data)
export function getTrendingTemplates(count: number = 5): ContentTemplate[] {
  // In production, this would pull from analytics
  // For now, return templates with 'hot', 'trending', or 'viral' tags
  const trending = preGeneratedTemplates.filter(t => 
    t.tags.some(tag => ['sale', 'discount', 'exclusive', 'limited'].includes(tag))
  );
  
  return trending.slice(0, count);
}